function e(e,t,n,i){var a,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r<3?a(s):r>3?a(t,n,s):a(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const t=window,n=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),a=new WeakMap;class r{constructor(e,t,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=a.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&a.set(t,e))}return e}toString(){return this.cssText}}const s=e=>new r("string"==typeof e?e:e+"",void 0,i),o=(e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+e[i+1]),e[0]);return new r(n,e,i)},c=(e,i)=>{n?e.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):i.forEach((n=>{const i=document.createElement("style"),a=t.litNonce;void 0!==a&&i.setAttribute("nonce",a),i.textContent=n.cssText,e.appendChild(i)}))},l=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return s(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var d;const u=window,h=u.trustedTypes,m=h?h.emptyScript:"",g=u.reactiveElementPolyfillSupport,p={toAttribute(e,t){switch(t){case Boolean:e=e?m:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},f=(e,t)=>t!==e&&(t==t||e==e),_={attribute:!0,type:String,converter:p,reflect:!1,hasChanged:f};class v extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,n)=>{const i=this._$Ep(n,t);void 0!==i&&(this._$Ev.set(i,n),e.push(i))})),e}static createProperty(e,t=_){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const n="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,n,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){return{get(){return this[t]},set(i){const a=this[e];this[t]=i,this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||_}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const n of t)this.createProperty(n,e[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Ep(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}u(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,n;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(n=e.hostConnected)||void 0===n||n.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return c(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$EO(e,t,n=_){var i;const a=this.constructor._$Ep(e,n);if(void 0!==a&&!0===n.reflect){const r=(void 0!==(null===(i=n.converter)||void 0===i?void 0:i.toAttribute)?n.converter:p).toAttribute(t,n.type);this._$El=e,null==r?this.removeAttribute(a):this.setAttribute(a,r),this._$El=null}}_$AK(e,t){var n;const i=this.constructor,a=i._$Ev.get(e);if(void 0!==a&&this._$El!==a){const e=i.getPropertyOptions(a),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(n=e.converter)||void 0===n?void 0:n.fromAttribute)?e.converter:p;this._$El=a,this[a]=r.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,n){let i=!0;void 0!==e&&(((n=n||this.constructor.getPropertyOptions(e)).hasChanged||f)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===n.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const n=this._$AL;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(n)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(n)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var y;v.finalized=!0,v.elementProperties=new Map,v.elementStyles=[],v.shadowRootOptions={mode:"open"},null==g||g({ReactiveElement:v}),(null!==(d=u.reactiveElementVersions)&&void 0!==d?d:u.reactiveElementVersions=[]).push("1.6.1");const b=window,w=b.trustedTypes,x=w?w.createPolicy("lit-html",{createHTML:e=>e}):void 0,C=`lit$${(Math.random()+"").slice(9)}$`,M="?"+C,S=`<${M}>`,$=document,E=(e="")=>$.createComment(e),k=e=>null===e||"object"!=typeof e&&"function"!=typeof e,A=Array.isArray,T=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,I=/-->/g,D=/>/g,z=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),j=/'/g,O=/"/g,R=/^(?:script|style|textarea|title)$/i,P=(e=>(t,...n)=>({_$litType$:e,strings:t,values:n}))(1),N=Symbol.for("lit-noChange"),L=Symbol.for("lit-nothing"),F=new WeakMap,V=$.createTreeWalker($,129,null,!1),H=(e,t)=>{const n=e.length-1,i=[];let a,r=2===t?"<svg>":"",s=T;for(let t=0;t<n;t++){const n=e[t];let o,c,l=-1,d=0;for(;d<n.length&&(s.lastIndex=d,c=s.exec(n),null!==c);)d=s.lastIndex,s===T?"!--"===c[1]?s=I:void 0!==c[1]?s=D:void 0!==c[2]?(R.test(c[2])&&(a=RegExp("</"+c[2],"g")),s=z):void 0!==c[3]&&(s=z):s===z?">"===c[0]?(s=null!=a?a:T,l=-1):void 0===c[1]?l=-2:(l=s.lastIndex-c[2].length,o=c[1],s=void 0===c[3]?z:'"'===c[3]?O:j):s===O||s===j?s=z:s===I||s===D?s=T:(s=z,a=void 0);const u=s===z&&e[t+1].startsWith("/>")?" ":"";r+=s===T?n+S:l>=0?(i.push(o),n.slice(0,l)+"$lit$"+n.slice(l)+C+u):n+C+(-2===l?(i.push(void 0),t):u)}const o=r+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==x?x.createHTML(o):o,i]};class U{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let a=0,r=0;const s=e.length-1,o=this.parts,[c,l]=H(e,t);if(this.el=U.createElement(c,n),V.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=V.nextNode())&&o.length<s;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(C)){const n=l[r++];if(e.push(t),void 0!==n){const e=i.getAttribute(n.toLowerCase()+"$lit$").split(C),t=/([.?@])?(.*)/.exec(n);o.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?Q:"?"===t[1]?G:"@"===t[1]?K:B})}else o.push({type:6,index:a})}for(const t of e)i.removeAttribute(t)}if(R.test(i.tagName)){const e=i.textContent.split(C),t=e.length-1;if(t>0){i.textContent=w?w.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],E()),V.nextNode(),o.push({type:2,index:++a});i.append(e[t],E())}}}else if(8===i.nodeType)if(i.data===M)o.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(C,e+1));)o.push({type:7,index:a}),e+=C.length-1}a++}}static createElement(e,t){const n=$.createElement("template");return n.innerHTML=e,n}}function Z(e,t,n=e,i){var a,r,s,o;if(t===N)return t;let c=void 0!==i?null===(a=n._$Co)||void 0===a?void 0:a[i]:n._$Cl;const l=k(t)?void 0:t._$litDirective$;return(null==c?void 0:c.constructor)!==l&&(null===(r=null==c?void 0:c._$AO)||void 0===r||r.call(c,!1),void 0===l?c=void 0:(c=new l(e),c._$AT(e,n,i)),void 0!==i?(null!==(s=(o=n)._$Co)&&void 0!==s?s:o._$Co=[])[i]=c:n._$Cl=c),void 0!==c&&(t=Z(e,c._$AS(e,t.values),c,i)),t}class W{constructor(e,t){this.u=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(e){var t;const{el:{content:n},parts:i}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:$).importNode(n,!0);V.currentNode=a;let r=V.nextNode(),s=0,o=0,c=i[0];for(;void 0!==c;){if(s===c.index){let t;2===c.type?t=new q(r,r.nextSibling,this,e):1===c.type?t=new c.ctor(r,c.name,c.strings,this,e):6===c.type&&(t=new X(r,this,e)),this.u.push(t),c=i[++o]}s!==(null==c?void 0:c.index)&&(r=V.nextNode(),s++)}return a}p(e){let t=0;for(const n of this.u)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class q{constructor(e,t,n,i){var a;this.type=2,this._$AH=L,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$Cm=null===(a=null==i?void 0:i.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cm}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Z(this,e,t),k(e)?e===L||null==e||""===e?(this._$AH!==L&&this._$AR(),this._$AH=L):e!==this._$AH&&e!==N&&this.g(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):(e=>A(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]))(e)?this.k(e):this.g(e)}O(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}g(e){this._$AH!==L&&k(this._$AH)?this._$AA.nextSibling.data=e:this.T($.createTextNode(e)),this._$AH=e}$(e){var t;const{values:n,_$litType$:i}=e,a="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=U.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.p(n);else{const e=new W(a,this),t=e.v(this.options);e.p(n),this.T(t),this._$AH=e}}_$AC(e){let t=F.get(e.strings);return void 0===t&&F.set(e.strings,t=new U(e)),t}k(e){A(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const a of e)i===t.length?t.push(n=new q(this.O(E()),this.O(E()),this,this.options)):n=t[i],n._$AI(a),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cm=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class B{constructor(e,t,n,i,a){this.type=1,this._$AH=L,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=a,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=L}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,i){const a=this.strings;let r=!1;if(void 0===a)e=Z(this,e,t,0),r=!k(e)||e!==this._$AH&&e!==N,r&&(this._$AH=e);else{const i=e;let s,o;for(e=a[0],s=0;s<a.length-1;s++)o=Z(this,i[n+s],t,s),o===N&&(o=this._$AH[s]),r||(r=!k(o)||o!==this._$AH[s]),o===L?e=L:e!==L&&(e+=(null!=o?o:"")+a[s+1]),this._$AH[s]=o}r&&!i&&this.j(e)}j(e){e===L?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Q extends B{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===L?void 0:e}}const Y=w?w.emptyScript:"";class G extends B{constructor(){super(...arguments),this.type=4}j(e){e&&e!==L?this.element.setAttribute(this.name,Y):this.element.removeAttribute(this.name)}}class K extends B{constructor(e,t,n,i,a){super(e,t,n,i,a),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=Z(this,e,t,0))&&void 0!==n?n:L)===N)return;const i=this._$AH,a=e===L&&i!==L||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==L&&(i===L||a);a&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class X{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Z(this,e)}}const J=b.litHtmlPolyfillSupport;null==J||J(U,q),(null!==(y=b.litHtmlVersions)&&void 0!==y?y:b.litHtmlVersions=[]).push("2.6.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var ee,te;class ne extends v{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,n)=>{var i,a;const r=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t;let s=r._$litPart$;if(void 0===s){const e=null!==(a=null==n?void 0:n.renderBefore)&&void 0!==a?a:null;r._$litPart$=s=new q(t.insertBefore(E(),e),e,void 0,null!=n?n:{})}return s._$AI(e),s})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return N}}ne.finalized=!0,ne._$litElement$=!0,null===(ee=globalThis.litElementHydrateSupport)||void 0===ee||ee.call(globalThis,{LitElement:ne});const ie=globalThis.litElementPolyfillSupport;null==ie||ie({LitElement:ne}),(null!==(te=globalThis.litElementVersions)&&void 0!==te?te:globalThis.litElementVersions=[]).push("3.2.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ae=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:n,elements:i}=t;return{kind:n,elements:i,finisher(t){customElements.define(e,t)}}})(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,re=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}};function se(e){return(t,n)=>void 0!==n?((e,t,n)=>{t.constructor.createProperty(n,e)})(e,t,n):re(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function oe(e){return se({...e,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ce;null===(ce=window.HTMLSlotElement)||void 0===ce||ce.prototype.assignedElements;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const le={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},de=e=>(...t)=>({_$litDirective$:e,values:t});class ue{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const he=de(class extends ue{constructor(e){var t;if(super(e),e.type!==le.ATTRIBUTE||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var n,i;if(void 0===this.nt){this.nt=new Set,void 0!==e.strings&&(this.st=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null===(n=this.st)||void 0===n?void 0:n.has(e))&&this.nt.add(e);return this.render(t)}const a=e.element.classList;this.nt.forEach((e=>{e in t||(a.remove(e),this.nt.delete(e))}));for(const e in t){const n=!!t[e];n===this.nt.has(e)||(null===(i=this.st)||void 0===i?void 0:i.has(e))||(n?(a.add(e),this.nt.add(e)):(a.remove(e),this.nt.delete(e)))}return N}}),me=e=>null===e||"object"!=typeof e&&"function"!=typeof e,ge=e=>void 0===e.strings,pe={},fe=(e,t=pe)=>e._$AH=t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,_e=(e,t)=>{var n,i;const a=e._$AN;if(void 0===a)return!1;for(const e of a)null===(i=(n=e)._$AO)||void 0===i||i.call(n,t,!1),_e(e,t);return!0},ve=e=>{let t,n;do{if(void 0===(t=e._$AM))break;n=t._$AN,n.delete(e),e=t}while(0===(null==n?void 0:n.size))},ye=e=>{for(let t;t=e._$AM;e=t){let n=t._$AN;if(void 0===n)t._$AN=n=new Set;else if(n.has(e))break;n.add(e),xe(t)}};
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function be(e){void 0!==this._$AN?(ve(this),this._$AM=e,ye(this)):this._$AM=e}function we(e,t=!1,n=0){const i=this._$AH,a=this._$AN;if(void 0!==a&&0!==a.size)if(t)if(Array.isArray(i))for(let e=n;e<i.length;e++)_e(i[e],!1),ve(i[e]);else null!=i&&(_e(i,!1),ve(i));else _e(this,e)}const xe=e=>{var t,n,i,a;e.type==le.CHILD&&(null!==(t=(i=e)._$AP)&&void 0!==t||(i._$AP=we),null!==(n=(a=e)._$AQ)&&void 0!==n||(a._$AQ=be))};class Ce extends ue{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),ye(this),this.isConnected=e._$AU}_$AO(e,t=!0){var n,i;e!==this.isConnected&&(this.isConnected=e,e?null===(n=this.reconnected)||void 0===n||n.call(this):null===(i=this.disconnected)||void 0===i||i.call(this)),t&&(_e(this,e),ve(this))}setValue(e){if(ge(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Me=()=>new Se;class Se{}const $e=new WeakMap,Ee=de(class extends Ce{render(e){return L}update(e,[t]){var n;const i=t!==this.Y;return i&&void 0!==this.Y&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.Y=t,this.dt=null===(n=e.options)||void 0===n?void 0:n.host,this.rt(this.ct=e.element)),L}rt(e){var t;if("function"==typeof this.Y){const n=null!==(t=this.dt)&&void 0!==t?t:globalThis;let i=$e.get(n);void 0===i&&(i=new WeakMap,$e.set(n,i)),void 0!==i.get(this.Y)&&this.Y.call(this.dt,void 0),i.set(this.Y,e),void 0!==e&&this.Y.call(this.dt,e)}else this.Y.value=e}get lt(){var e,t,n;return"function"==typeof this.Y?null===(t=$e.get(null!==(e=this.dt)&&void 0!==e?e:globalThis))||void 0===t?void 0:t.get(this.Y):null===(n=this.Y)||void 0===n?void 0:n.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}}),ke=de(class extends ue{constructor(e){var t;if(super(e),e.type!==le.ATTRIBUTE||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{const i=e[n];return null==i?t:t+`${n=n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){const{style:n}=e.element;if(void 0===this.vt){this.vt=new Set;for(const e in t)this.vt.add(e);return this.render(t)}this.vt.forEach((e=>{null==t[e]&&(this.vt.delete(e),e.includes("-")?n.removeProperty(e):n[e]="")}));for(const e in t){const i=t[e];null!=i&&(this.vt.add(e),e.includes("-")?n.setProperty(e,i):n[e]=i)}return N}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Ae(e,t,n,i=20,a=0){let r=[];if(a>=i)return r;const s=e=>{const r=e.assignedNodes().filter((e=>1===e.nodeType));return r.length>0?Ae(r[0].parentElement,t,n,i,a+1):[]},o=Array.from(e.children||[]);for(const e of o)t(e)||(n(e)&&r.push(e),null!=e.shadowRoot?r.push(...Ae(e.shadowRoot,t,n,i,a+1)):"SLOT"===e.tagName?r.push(...s(e)):r.push(...Ae(e,t,n,i,a+1)));return r}function Te(e){return e.hasAttribute("hidden")||e.hasAttribute("aria-hidden")&&"false"!==e.getAttribute("aria-hidden")||"none"===e.style.display||"0"===e.style.opacity||"hidden"===e.style.visibility||"collapse"===e.style.visibility}function Ie(e){return"-1"!==e.getAttribute("tabindex")&&!Te(e)&&!function(e){return e.hasAttribute("disabled")||e.hasAttribute("aria-disabled")&&"false"!==e.getAttribute("aria-disabled")}(e)&&(e.hasAttribute("tabindex")||(e instanceof HTMLAnchorElement||e instanceof HTMLAreaElement)&&e.hasAttribute("href")||e instanceof HTMLButtonElement||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement||e instanceof HTMLIFrameElement)}const De=new Map;const ze=document.createElement("template");ze.innerHTML='\n\t<div id="start"></div>\n\t<div id="backup"></div>\n\t<slot></slot>\n\t<div id="end"></div>\n';class je extends HTMLElement{constructor(){super(),this.debounceId=Math.random().toString(),this._focused=!1;const e=this.attachShadow({mode:"open"});e.appendChild(ze.content.cloneNode(!0)),this.$backup=e.querySelector("#backup"),this.$start=e.querySelector("#start"),this.$end=e.querySelector("#end"),this.focusLastElement=this.focusLastElement.bind(this),this.focusFirstElement=this.focusFirstElement.bind(this),this.onFocusIn=this.onFocusIn.bind(this),this.onFocusOut=this.onFocusOut.bind(this)}static get observedAttributes(){return["inactive"]}get inactive(){return this.hasAttribute("inactive")}set inactive(e){e?this.setAttribute("inactive",""):this.removeAttribute("inactive")}get focused(){return this._focused}connectedCallback(){this.$start.addEventListener("focus",this.focusLastElement),this.$end.addEventListener("focus",this.focusFirstElement),this.addEventListener("focusin",this.onFocusIn),this.addEventListener("focusout",this.onFocusOut),this.render()}disconnectedCallback(){this.$start.removeEventListener("focus",this.focusLastElement),this.$end.removeEventListener("focus",this.focusFirstElement),this.removeEventListener("focusin",this.onFocusIn),this.removeEventListener("focusout",this.onFocusOut)}attributeChangedCallback(){this.render()}focusFirstElement(){this.trapFocus()}focusLastElement(){this.trapFocus(!0)}getFocusableElements(){return Ae(this,Te,Ie)}trapFocus(e){if(this.inactive)return;let t=this.getFocusableElements();t.length>0?(e?t[t.length-1].focus():t[0].focus(),this.$backup.setAttribute("tabindex","-1")):(this.$backup.setAttribute("tabindex","0"),this.$backup.focus())}onFocusIn(){this.updateFocused(!0)}onFocusOut(){this.updateFocused(!1)}updateFocused(e){!function(e,t,n){const i=De.get(n);null!=i&&window.clearTimeout(i),De.set(n,window.setTimeout((()=>{e(),De.delete(n)}),t))}((()=>{this.focused!==e&&(this._focused=e,this.render())}),0,this.debounceId)}render(){this.$start.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.$end.setAttribute("tabindex",!this.focused||this.inactive?"-1":"0"),this.focused?this.setAttribute("focused",""):this.removeAttribute("focused")}}function Oe(e){return Number(e.getAttribute("data-dialog-count"))||0}function Re(e,t){e.setAttribute("data-dialog-count",t.toString())}function Pe(e=document.activeElement){return null!=e&&null!=e.shadowRoot&&null!=e.shadowRoot.activeElement?Pe(e.shadowRoot.activeElement):e}window.customElements.define("focus-trap",je);const Ne=document.createElement("template");Ne.innerHTML='\n  <style>*{box-sizing:border-box}:host{padding:var(--dialog-container-padding,5vw 24px);z-index:var(--dialog-z-index,12345678);outline:none}#backdrop,:host{position:fixed;top:0;left:0;bottom:0;right:0}:host,:host([center]) #dialog{overflow-x:var(--dialog-overflow-x,hidden);overflow-y:var(--dialog-overflow-y,auto);overscroll-behavior:contain;-webkit-overflow-scrolling:touch}:host([center]){display:flex;align-items:center;justify-content:center;overflow:hidden}:host([center]) #dialog{max-height:var(--dialog-max-height,100%)}:host(:not(:defined)),:host(:not([open])){display:none}#backdrop{background:var(--dialog-backdrop-bg,rgba(0,0,0,.6));animation:fadeIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);z-index:-1}#dialog{animation:scaleIn var(--dialog-animation-duration,.1s) var(--dialog-animation-easing,ease-out);border-radius:var(--dialog-border-radius,12px);box-shadow:var(--dialog-box-shadow,0 2px 10px -5px rgba(0,0,0,.6));max-width:var(--dialog-max-width,700px);width:var(--dialog-width,100%);padding:var(--dialog-padding,24px);max-height:var(--dialog-max-height,unset);height:var(--dialog-height,auto);color:var(--dialog-color,currentColor);background:var(--dialog-bg,#fff);z-index:1;position:relative;display:flex;flex-direction:column;margin:0 auto;border:none}::slotted(article),article{flex-grow:1;overflow-y:auto;-webkit-overflow-scrolling:touch}::slotted(footer),::slotted(header),footer,header{flex-shrink:0}@keyframes scaleIn{0%{transform:scale(.9) translateY(30px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}</style>\n  <div id="backdrop" part="backdrop"></div>\n  <focus-trap id="dialog" part="dialog">\n    <slot></slot>\n  </focus-trap>\n';class Le extends HTMLElement{constructor(){super(),this.$scrollContainer=document.documentElement,this.$previousActiveElement=null;const e=this.attachShadow({mode:"open"});e.appendChild(Ne.content.cloneNode(!0)),this.$dialog=e.querySelector("#dialog"),this.$backdrop=e.querySelector("#backdrop"),this.onBackdropClick=this.onBackdropClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.setAttribute("aria-modal","true"),this.$dialog.setAttribute("role","alertdialog")}static get observedAttributes(){return["open","center"]}get open(){return this.hasAttribute("open")}set open(e){e?this.setAttribute("open",""):this.removeAttribute("open")}get center(){return this.hasAttribute("center")}set center(e){e?this.setAttribute("center",""):this.removeAttribute("center")}connectedCallback(){this.$backdrop.addEventListener("click",this.onBackdropClick)}disconnectedCallback(){this.$backdrop.removeEventListener("click",this.onBackdropClick),this.open&&this.didClose()}show(){this.open=!0}close(e){this.result=e,this.open=!1}onBackdropClick(){this.assertClosing()&&this.close()}onKeyDown(e){if("Escape"===e.code)this.assertClosing()&&(this.close(),e.stopImmediatePropagation())}assertClosing(){return this.dispatchEvent(new CustomEvent("closing",{cancelable:!0}))}didOpen(){this.$previousActiveElement=Pe(document.activeElement),requestAnimationFrame((()=>{this.$dialog.focusFirstElement()})),this.tabIndex=0,this.$scrollContainer.style.overflow="hidden",this.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!0}),Re(this.$scrollContainer,Oe(this.$scrollContainer)+1),this.dispatchEvent(new CustomEvent("open"))}didClose(){this.removeEventListener("keydown",this.onKeyDown,{capture:!0}),Re(this.$scrollContainer,Math.max(0,Oe(this.$scrollContainer)-1)),Oe(this.$scrollContainer)<=0&&(this.$scrollContainer.style.overflow=""),this.tabIndex=-1,null!=this.$previousActiveElement&&(this.$previousActiveElement.focus(),this.$previousActiveElement=null),this.dispatchEvent(new CustomEvent("close",{detail:this.result}))}attributeChangedCallback(e,t,n){if("open"===e)this.open?this.didOpen():this.didClose()}}customElements.define("web-dialog",Le);var Fe="5.2.0",Ve="Mon, 01 Apr 2024 23:44:31 GMT",He="Wed, 7 Feb 2024 22:22:42 -0800",Ue="5.2.0-dev+g305a2db",Ze=window&&window.__assign||function(){return Ze=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ze.apply(this,arguments)};["angle-degree","area-acre","area-hectare","concentr-percent","digital-bit","digital-byte","digital-gigabit","digital-gigabyte","digital-kilobit","digital-kilobyte","digital-megabit","digital-megabyte","digital-petabyte","digital-terabit","digital-terabyte","duration-day","duration-hour","duration-millisecond","duration-minute","duration-month","duration-second","duration-week","duration-year","length-centimeter","length-foot","length-inch","length-kilometer","length-meter","length-mile-scandinavian","length-mile","length-millimeter","length-yard","mass-gram","mass-kilogram","mass-ounce","mass-pound","mass-stone","temperature-celsius","temperature-fahrenheit","volume-fluid-ounce","volume-gallon","volume-liter","volume-milliliter"].map((function(e){return e.replace(/^(.*?)-/,"")}));var We,qe,Be,Qe=window&&window.__extends||(We=function(e,t){return We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},We(e,t)},function(e,t){function n(){this.constructor=e}We(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ye=window&&window.__assign||function(){return Ye=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ye.apply(this,arguments)};function Ge(e){return e.substr(0,e.indexOf("."))}!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="MISSING_LOCALE_DATA",t}Qe(t,e)}(Error),function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(qe||(qe={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(Be||(Be={}));var Ke,Xe,Je=["closed","locked","off"],et=function(e,t,n,i){i=i||{},n=null==n?{}:n;var a=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return a.detail=n,e.dispatchEvent(a),a},tt=function(e){et(window,"haptic",e)},nt=function(e,t){return function(e,t,n){void 0===n&&(n=!0);var i,a=Ge(t),r="group"===a?"homeassistant":a;switch(a){case"lock":i=n?"unlock":"lock";break;case"cover":i=n?"open_cover":"close_cover";break;default:i=n?"turn_on":"turn_off"}return e.callService(r,i,{entity_id:t})}(e,t,Je.includes(e.states[t].state))},it=function(e,t,n,i){if(i||(i={action:"more-info"}),!i.confirmation||i.confirmation.exemptions&&i.confirmation.exemptions.some((function(e){return e.user===t.user.id}))||(tt("warning"),confirm(i.confirmation.text||"Are you sure you want to "+i.action+"?")))switch(i.action){case"more-info":(n.entity||n.camera_image)&&et(e,"hass-more-info",{entityId:n.entity?n.entity:n.camera_image});break;case"navigate":i.navigation_path&&function(e,t,n){void 0===n&&(n=!1),n?history.replaceState(null,"",t):history.pushState(null,"",t),et(window,"location-changed",{replace:n})}(0,i.navigation_path);break;case"url":i.url_path&&window.open(i.url_path);break;case"toggle":n.entity&&(nt(t,n.entity),tt("success"));break;case"call-service":if(!i.service)return void tt("failure");var a=i.service.split(".",2);t.callService(a[0],a[1],i.data,i.target),tt("success");break;case"fire-dom-event":et(e,"ll-custom",i)}};function at(e){return void 0!==e&&"none"!==e.action}!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),i={};for(const e of n)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Ke||(Ke={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Xe||(Xe={}));const rt=Ke.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),st=e=>{switch(typeof e){case"undefined":return rt.undefined;case"string":return rt.string;case"number":return isNaN(e)?rt.nan:rt.number;case"boolean":return rt.boolean;case"function":return rt.function;case"bigint":return rt.bigint;case"symbol":return rt.symbol;case"object":return Array.isArray(e)?rt.array:null===e?rt.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?rt.promise:"undefined"!=typeof Map&&e instanceof Map?rt.map:"undefined"!=typeof Set&&e instanceof Set?rt.set:"undefined"!=typeof Date&&e instanceof Date?rt.date:rt.object;default:return rt.unknown}},ot=Ke.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ct extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},i=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(i);else if("invalid_return_type"===a.code)i(a.returnTypeError);else if("invalid_arguments"===a.code)i(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,i=0;for(;i<a.path.length;){const n=a.path[i];i===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],i++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ke.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}ct.create=e=>new ct(e);const lt=(e,t)=>{let n;switch(e.code){case ot.invalid_type:n=e.received===rt.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ot.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ke.jsonStringifyReplacer)}`;break;case ot.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ke.joinValues(e.keys,", ")}`;break;case ot.invalid_union:n="Invalid input";break;case ot.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ke.joinValues(e.options)}`;break;case ot.invalid_enum_value:n=`Invalid enum value. Expected ${Ke.joinValues(e.options)}, received '${e.received}'`;break;case ot.invalid_arguments:n="Invalid function arguments";break;case ot.invalid_return_type:n="Invalid function return type";break;case ot.invalid_date:n="Invalid date";break;case ot.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ke.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ot.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ot.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ot.custom:n="Invalid input";break;case ot.invalid_intersection_types:n="Intersection results could not be merged";break;case ot.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case ot.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ke.assertNever(e)}return{message:n}};let dt=lt;function ut(){return dt}const ht=e=>{const{data:t,path:n,errorMaps:i,issueData:a}=e,r=[...n,...a.path||[]],s={...a,path:r};let o="";const c=i.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(s,{data:t,defaultError:o}).message;return{...a,path:r,message:a.message||o}};function mt(e,t){const n=ht({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,ut(),lt].filter((e=>!!e))});e.common.issues.push(n)}class gt{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const i of t){if("aborted"===i.status)return pt;"dirty"===i.status&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return gt.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const i of t){const{key:t,value:a}=i;if("aborted"===t.status)return pt;if("aborted"===a.status)return pt;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),(void 0!==a.value||i.alwaysSet)&&(n[t.value]=a.value)}return{status:e.value,value:n}}}const pt=Object.freeze({status:"aborted"}),ft=e=>({status:"dirty",value:e}),_t=e=>({status:"valid",value:e}),vt=e=>"aborted"===e.status,yt=e=>"dirty"===e.status,bt=e=>"valid"===e.status,wt=e=>"undefined"!=typeof Promise&&e instanceof Promise;var xt;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(xt||(xt={}));class Ct{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Mt=(e,t)=>{if(bt(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ct(e.common.issues);return this._error=t,this._error}}};function St(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:i,description:a}=e;if(t&&(n||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=i?i:t.defaultError}:{message:null!=n?n:t.defaultError},description:a}}class $t{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return st(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:st(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new gt,ctx:{common:e.parent.common,data:e.data,parsedType:st(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(wt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const i={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:st(e)},a=this._parseSync({data:e,path:i.path,parent:i});return Mt(i,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:st(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await(wt(i)?i:Promise.resolve(i));return Mt(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const a=e(t),r=()=>i.addIssue({code:ot.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(r(),!1))):!!a||(r(),!1)}))}refinement(e,t){return this._refinement(((n,i)=>!!e(n)||(i.addIssue("function"==typeof t?t(n,i):t),!1)))}_refinement(e){return new pn({schema:this,typeName:$n.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return fn.create(this,this._def)}nullable(){return _n.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Yt.create(this,this._def)}promise(){return gn.create(this,this._def)}or(e){return Xt.create([this,e],this._def)}and(e){return nn.create(this,e,this._def)}transform(e){return new pn({...St(this._def),schema:this,typeName:$n.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new vn({...St(this._def),innerType:this,defaultValue:t,typeName:$n.ZodDefault})}brand(){return new xn({typeName:$n.ZodBranded,type:this,...St(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new yn({...St(this._def),innerType:this,catchValue:t,typeName:$n.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Cn.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Et=/^c[^\s-]{8,}$/i,kt=/^[a-z][a-z0-9]*$/,At=/[0-9A-HJKMNP-TV-Z]{26}/,Tt=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,It=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,Dt=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,zt=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,jt=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;function Ot(e,t){return!("v4"!==t&&t||!zt.test(e))||!("v6"!==t&&t||!jt.test(e))}class Rt extends $t{constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement((t=>e.test(t)),{validation:t,code:ot.invalid_string,...xt.errToObj(n)}),this.nonempty=e=>this.min(1,xt.errToObj(e)),this.trim=()=>new Rt({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new Rt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new Rt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==rt.string){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.string,received:t.parsedType}),pt}const t=new gt;let n;for(const a of this._def.checks)if("min"===a.kind)e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("max"===a.kind)e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),t.dirty());else if("length"===a.kind){const i=e.data.length>a.value,r=e.data.length<a.value;(i||r)&&(n=this._getOrReturnCtx(e,n),i?mt(n,{code:ot.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):r&&mt(n,{code:ot.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),t.dirty())}else if("email"===a.kind)It.test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"email",code:ot.invalid_string,message:a.message}),t.dirty());else if("emoji"===a.kind)Dt.test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"emoji",code:ot.invalid_string,message:a.message}),t.dirty());else if("uuid"===a.kind)Tt.test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"uuid",code:ot.invalid_string,message:a.message}),t.dirty());else if("cuid"===a.kind)Et.test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"cuid",code:ot.invalid_string,message:a.message}),t.dirty());else if("cuid2"===a.kind)kt.test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"cuid2",code:ot.invalid_string,message:a.message}),t.dirty());else if("ulid"===a.kind)At.test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"ulid",code:ot.invalid_string,message:a.message}),t.dirty());else if("url"===a.kind)try{new URL(e.data)}catch(i){n=this._getOrReturnCtx(e,n),mt(n,{validation:"url",code:ot.invalid_string,message:a.message}),t.dirty()}else if("regex"===a.kind){a.regex.lastIndex=0;a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"regex",code:ot.invalid_string,message:a.message}),t.dirty())}else if("trim"===a.kind)e.data=e.data.trim();else if("includes"===a.kind)e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),t.dirty());else if("toLowerCase"===a.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===a.kind)e.data=e.data.toUpperCase();else if("startsWith"===a.kind)e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.invalid_string,validation:{startsWith:a.value},message:a.message}),t.dirty());else if("endsWith"===a.kind)e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.invalid_string,validation:{endsWith:a.value},message:a.message}),t.dirty());else if("datetime"===a.kind){((i=a).precision?i.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${i.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${i.precision}}Z$`):0===i.precision?i.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):i.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.invalid_string,validation:"datetime",message:a.message}),t.dirty())}else"ip"===a.kind?Ot(e.data,a.version)||(n=this._getOrReturnCtx(e,n),mt(n,{validation:"ip",code:ot.invalid_string,message:a.message}),t.dirty()):Ke.assertNever(a);var i;return{status:t.value,value:e.data}}_addCheck(e){return new Rt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...xt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...xt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...xt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...xt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...xt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...xt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...xt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...xt.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...xt.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...xt.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...xt.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...xt.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...xt.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...xt.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...xt.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...xt.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Pt(e,t){const n=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,a=n>i?n:i;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}Rt.create=e=>{var t;return new Rt({checks:[],typeName:$n.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...St(e)})};class Nt extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==rt.number){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.number,received:t.parsedType}),pt}let t;const n=new gt;for(const i of this._def.checks)if("int"===i.kind)Ke.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty());else if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty())}else"multipleOf"===i.kind?0!==Pt(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.not_finite,message:i.message}),n.dirty()):Ke.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,xt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xt.toString(t))}setLimit(e,t,n,i){return new Nt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:xt.toString(i)}]})}_addCheck(e){return new Nt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:xt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xt.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:xt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xt.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Ke.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Nt.create=e=>new Nt({checks:[],typeName:$n.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...St(e)});class Lt extends $t{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==rt.bigint){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.bigint,received:t.parsedType}),pt}let t;const n=new gt;for(const i of this._def.checks)if("min"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else if("max"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty())}else"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),mt(t,{code:ot.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):Ke.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,xt.toString(t))}gt(e,t){return this.setLimit("min",e,!1,xt.toString(t))}lte(e,t){return this.setLimit("max",e,!0,xt.toString(t))}lt(e,t){return this.setLimit("max",e,!1,xt.toString(t))}setLimit(e,t,n,i){return new Lt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:xt.toString(i)}]})}_addCheck(e){return new Lt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xt.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xt.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Lt.create=e=>{var t;return new Lt({checks:[],typeName:$n.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...St(e)})};class Ft extends $t{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==rt.boolean){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.boolean,received:t.parsedType}),pt}return _t(e.data)}}Ft.create=e=>new Ft({typeName:$n.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...St(e)});class Vt extends $t{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==rt.date){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.date,received:t.parsedType}),pt}if(isNaN(e.data.getTime())){return mt(this._getOrReturnCtx(e),{code:ot.invalid_date}),pt}const t=new gt;let n;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),mt(n,{code:ot.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):Ke.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Vt({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:xt.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:xt.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Vt.create=e=>new Vt({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:$n.ZodDate,...St(e)});class Ht extends $t{_parse(e){if(this._getType(e)!==rt.symbol){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.symbol,received:t.parsedType}),pt}return _t(e.data)}}Ht.create=e=>new Ht({typeName:$n.ZodSymbol,...St(e)});class Ut extends $t{_parse(e){if(this._getType(e)!==rt.undefined){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.undefined,received:t.parsedType}),pt}return _t(e.data)}}Ut.create=e=>new Ut({typeName:$n.ZodUndefined,...St(e)});class Zt extends $t{_parse(e){if(this._getType(e)!==rt.null){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.null,received:t.parsedType}),pt}return _t(e.data)}}Zt.create=e=>new Zt({typeName:$n.ZodNull,...St(e)});class Wt extends $t{constructor(){super(...arguments),this._any=!0}_parse(e){return _t(e.data)}}Wt.create=e=>new Wt({typeName:$n.ZodAny,...St(e)});class qt extends $t{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _t(e.data)}}qt.create=e=>new qt({typeName:$n.ZodUnknown,...St(e)});class Bt extends $t{_parse(e){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.never,received:t.parsedType}),pt}}Bt.create=e=>new Bt({typeName:$n.ZodNever,...St(e)});class Qt extends $t{_parse(e){if(this._getType(e)!==rt.undefined){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.void,received:t.parsedType}),pt}return _t(e.data)}}Qt.create=e=>new Qt({typeName:$n.ZodVoid,...St(e)});class Yt extends $t{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==rt.array)return mt(t,{code:ot.invalid_type,expected:rt.array,received:t.parsedType}),pt;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(e||a)&&(mt(t,{code:e?ot.too_big:ot.too_small,minimum:a?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(mt(t,{code:ot.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(mt(t,{code:ot.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>i.type._parseAsync(new Ct(t,e,t.path,n))))).then((e=>gt.mergeArray(n,e)));const a=[...t.data].map(((e,n)=>i.type._parseSync(new Ct(t,e,t.path,n))));return gt.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new Yt({...this._def,minLength:{value:e,message:xt.toString(t)}})}max(e,t){return new Yt({...this._def,maxLength:{value:e,message:xt.toString(t)}})}length(e,t){return new Yt({...this._def,exactLength:{value:e,message:xt.toString(t)}})}nonempty(e){return this.min(1,e)}}function Gt(e){if(e instanceof Kt){const t={};for(const n in e.shape){const i=e.shape[n];t[n]=fn.create(Gt(i))}return new Kt({...e._def,shape:()=>t})}return e instanceof Yt?new Yt({...e._def,type:Gt(e.element)}):e instanceof fn?fn.create(Gt(e.unwrap())):e instanceof _n?_n.create(Gt(e.unwrap())):e instanceof an?an.create(e.items.map((e=>Gt(e)))):e}Yt.create=(e,t)=>new Yt({type:e,minLength:null,maxLength:null,exactLength:null,typeName:$n.ZodArray,...St(t)});class Kt extends $t{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Ke.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==rt.object){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.object,received:t.parsedType}),pt}const{status:t,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),r=[];if(!(this._def.catchall instanceof Bt&&"strip"===this._def.unknownKeys))for(const e in n.data)a.includes(e)||r.push(e);const s=[];for(const e of a){const t=i[e],a=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new Ct(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Bt){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)r.length>0&&(mt(n,{code:ot.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const i=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new Ct(n,i,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>gt.mergeObjectSync(t,e))):gt.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return xt.errToObj,new Kt({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var i,a,r,s;const o=null!==(r=null===(a=(i=this._def).errorMap)||void 0===a?void 0:a.call(i,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=xt.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new Kt({...this._def,unknownKeys:"strip"})}passthrough(){return new Kt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Kt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Kt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:$n.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Kt({...this._def,catchall:e})}pick(e){const t={};return Ke.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Kt({...this._def,shape:()=>t})}omit(e){const t={};return Ke.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Kt({...this._def,shape:()=>t})}deepPartial(){return Gt(this)}partial(e){const t={};return Ke.objectKeys(this.shape).forEach((n=>{const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()})),new Kt({...this._def,shape:()=>t})}required(e){const t={};return Ke.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof fn;)e=e._def.innerType;t[n]=e}})),new Kt({...this._def,shape:()=>t})}keyof(){return un(Ke.objectKeys(this.shape))}}Kt.create=(e,t)=>new Kt({shape:()=>e,unknownKeys:"strip",catchall:Bt.create(),typeName:$n.ZodObject,...St(t)}),Kt.strictCreate=(e,t)=>new Kt({shape:()=>e,unknownKeys:"strict",catchall:Bt.create(),typeName:$n.ZodObject,...St(t)}),Kt.lazycreate=(e,t)=>new Kt({shape:e,unknownKeys:"strip",catchall:Bt.create(),typeName:$n.ZodObject,...St(t)});class Xt extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new ct(e.ctx.common.issues)));return mt(t,{code:ot.invalid_union,unionErrors:n}),pt}));{let e;const i=[];for(const a of n){const n={...t,common:{...t.common,issues:[]},parent:null},r=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:n}),n.common.issues.length&&i.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=i.map((e=>new ct(e)));return mt(t,{code:ot.invalid_union,unionErrors:a}),pt}}get options(){return this._def.options}}Xt.create=(e,t)=>new Xt({options:e,typeName:$n.ZodUnion,...St(t)});const Jt=e=>e instanceof ln?Jt(e.schema):e instanceof pn?Jt(e.innerType()):e instanceof dn?[e.value]:e instanceof hn?e.options:e instanceof mn?Object.keys(e.enum):e instanceof vn?Jt(e._def.innerType):e instanceof Ut?[void 0]:e instanceof Zt?[null]:null;class en extends $t{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==rt.object)return mt(t,{code:ot.invalid_type,expected:rt.object,received:t.parsedType}),pt;const n=this.discriminator,i=t.data[n],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(mt(t,{code:ot.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),pt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const i=new Map;for(const n of t){const t=Jt(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,n)}}return new en({typeName:$n.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...St(n)})}}function tn(e,t){const n=st(e),i=st(t);if(e===t)return{valid:!0,data:e};if(n===rt.object&&i===rt.object){const n=Ke.objectKeys(t),i=Ke.objectKeys(e).filter((e=>-1!==n.indexOf(e))),a={...e,...t};for(const n of i){const i=tn(e[n],t[n]);if(!i.valid)return{valid:!1};a[n]=i.data}return{valid:!0,data:a}}if(n===rt.array&&i===rt.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let i=0;i<e.length;i++){const a=tn(e[i],t[i]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===rt.date&&i===rt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class nn extends $t{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(e,i)=>{if(vt(e)||vt(i))return pt;const a=tn(e.value,i.value);return a.valid?((yt(e)||yt(i))&&t.dirty(),{status:t.value,value:a.data}):(mt(n,{code:ot.invalid_intersection_types}),pt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}nn.create=(e,t,n)=>new nn({left:e,right:t,typeName:$n.ZodIntersection,...St(n)});class an extends $t{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==rt.array)return mt(n,{code:ot.invalid_type,expected:rt.array,received:n.parsedType}),pt;if(n.data.length<this._def.items.length)return mt(n,{code:ot.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),pt;!this._def.rest&&n.data.length>this._def.items.length&&(mt(n,{code:ot.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new Ct(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(i).then((e=>gt.mergeArray(t,e))):gt.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new an({...this._def,rest:e})}}an.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new an({items:e,typeName:$n.ZodTuple,rest:null,...St(t)})};class rn extends $t{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==rt.object)return mt(n,{code:ot.invalid_type,expected:rt.object,received:n.parsedType}),pt;const i=[],a=this._def.keyType,r=this._def.valueType;for(const e in n.data)i.push({key:a._parse(new Ct(n,e,n.path,e)),value:r._parse(new Ct(n,n.data[e],n.path,e))});return n.common.async?gt.mergeObjectAsync(t,i):gt.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return new rn(t instanceof $t?{keyType:e,valueType:t,typeName:$n.ZodRecord,...St(n)}:{keyType:Rt.create(),valueType:e,typeName:$n.ZodRecord,...St(t)})}}class sn extends $t{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==rt.map)return mt(n,{code:ot.invalid_type,expected:rt.map,received:n.parsedType}),pt;const i=this._def.keyType,a=this._def.valueType,r=[...n.data.entries()].map((([e,t],r)=>({key:i._parse(new Ct(n,e,n.path,[r,"key"])),value:a._parse(new Ct(n,t,n.path,[r,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of r){const i=await n.key,a=await n.value;if("aborted"===i.status||"aborted"===a.status)return pt;"dirty"!==i.status&&"dirty"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of r){const i=n.key,a=n.value;if("aborted"===i.status||"aborted"===a.status)return pt;"dirty"!==i.status&&"dirty"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}}}sn.create=(e,t,n)=>new sn({valueType:t,keyType:e,typeName:$n.ZodMap,...St(n)});class on extends $t{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==rt.set)return mt(n,{code:ot.invalid_type,expected:rt.set,received:n.parsedType}),pt;const i=this._def;null!==i.minSize&&n.data.size<i.minSize.value&&(mt(n,{code:ot.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&n.data.size>i.maxSize.value&&(mt(n,{code:ot.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function r(e){const n=new Set;for(const i of e){if("aborted"===i.status)return pt;"dirty"===i.status&&t.dirty(),n.add(i.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>a._parse(new Ct(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>r(e))):r(s)}min(e,t){return new on({...this._def,minSize:{value:e,message:xt.toString(t)}})}max(e,t){return new on({...this._def,maxSize:{value:e,message:xt.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}on.create=(e,t)=>new on({valueType:e,minSize:null,maxSize:null,typeName:$n.ZodSet,...St(t)});class cn extends $t{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==rt.function)return mt(t,{code:ot.invalid_type,expected:rt.function,received:t.parsedType}),pt;function n(e,n){return ht({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ut(),lt].filter((e=>!!e)),issueData:{code:ot.invalid_arguments,argumentsError:n}})}function i(e,n){return ht({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ut(),lt].filter((e=>!!e)),issueData:{code:ot.invalid_return_type,returnTypeError:n}})}const a={errorMap:t.common.contextualErrorMap},r=t.data;return this._def.returns instanceof gn?_t((async(...e)=>{const t=new ct([]),s=await this._def.args.parseAsync(e,a).catch((i=>{throw t.addIssue(n(e,i)),t})),o=await r(...s),c=await this._def.returns._def.type.parseAsync(o,a).catch((e=>{throw t.addIssue(i(o,e)),t}));return c})):_t(((...e)=>{const t=this._def.args.safeParse(e,a);if(!t.success)throw new ct([n(e,t.error)]);const s=r(...t.data),o=this._def.returns.safeParse(s,a);if(!o.success)throw new ct([i(s,o.error)]);return o.data}))}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new cn({...this._def,args:an.create(e).rest(qt.create())})}returns(e){return new cn({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new cn({args:e||an.create([]).rest(qt.create()),returns:t||qt.create(),typeName:$n.ZodFunction,...St(n)})}}class ln extends $t{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ln.create=(e,t)=>new ln({getter:e,typeName:$n.ZodLazy,...St(t)});class dn extends $t{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return mt(t,{received:t.data,code:ot.invalid_literal,expected:this._def.value}),pt}return{status:"valid",value:e.data}}get value(){return this._def.value}}function un(e,t){return new hn({values:e,typeName:$n.ZodEnum,...St(t)})}dn.create=(e,t)=>new dn({value:e,typeName:$n.ZodLiteral,...St(t)});class hn extends $t{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return mt(t,{expected:Ke.joinValues(n),received:t.parsedType,code:ot.invalid_type}),pt}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return mt(t,{received:t.data,code:ot.invalid_enum_value,options:n}),pt}return _t(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return hn.create(e)}exclude(e){return hn.create(this.options.filter((t=>!e.includes(t))))}}hn.create=un;class mn extends $t{_parse(e){const t=Ke.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==rt.string&&n.parsedType!==rt.number){const e=Ke.objectValues(t);return mt(n,{expected:Ke.joinValues(e),received:n.parsedType,code:ot.invalid_type}),pt}if(-1===t.indexOf(e.data)){const e=Ke.objectValues(t);return mt(n,{received:n.data,code:ot.invalid_enum_value,options:e}),pt}return _t(e.data)}get enum(){return this._def.values}}mn.create=(e,t)=>new mn({values:e,typeName:$n.ZodNativeEnum,...St(t)});class gn extends $t{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==rt.promise&&!1===t.common.async)return mt(t,{code:ot.invalid_type,expected:rt.promise,received:t.parsedType}),pt;const n=t.parsedType===rt.promise?t.data:Promise.resolve(t.data);return _t(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}gn.create=(e,t)=>new gn({type:e,typeName:$n.ZodPromise,...St(t)});class pn extends $t{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$n.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null;if("preprocess"===i.type){const e=i.transform(n.data);return n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}const a={addIssue:e=>{mt(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"refinement"===i.type){const e=e=>{const t=i.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===i.status?pt:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?pt:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===i.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!bt(e))return e;const r=i.transform(e.value,a);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>bt(e)?Promise.resolve(i.transform(e.value,a)).then((e=>({status:t.value,value:e}))):e))}Ke.assertNever(i)}}pn.create=(e,t,n)=>new pn({schema:e,typeName:$n.ZodEffects,effect:t,...St(n)}),pn.createWithPreprocess=(e,t,n)=>new pn({schema:t,effect:{type:"preprocess",transform:e},typeName:$n.ZodEffects,...St(n)});class fn extends $t{_parse(e){return this._getType(e)===rt.undefined?_t(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}fn.create=(e,t)=>new fn({innerType:e,typeName:$n.ZodOptional,...St(t)});class _n extends $t{_parse(e){return this._getType(e)===rt.null?_t(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}_n.create=(e,t)=>new _n({innerType:e,typeName:$n.ZodNullable,...St(t)});class vn extends $t{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===rt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}vn.create=(e,t)=>new vn({innerType:e,typeName:$n.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...St(t)});class yn extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return wt(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ct(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new ct(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}yn.create=(e,t)=>new yn({innerType:e,typeName:$n.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...St(t)});class bn extends $t{_parse(e){if(this._getType(e)!==rt.nan){const t=this._getOrReturnCtx(e);return mt(t,{code:ot.invalid_type,expected:rt.nan,received:t.parsedType}),pt}return{status:"valid",value:e.data}}}bn.create=e=>new bn({typeName:$n.ZodNaN,...St(e)});const wn=Symbol("zod_brand");class xn extends $t{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Cn extends $t{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?pt:"dirty"===e.status?(t.dirty(),ft(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?pt:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new Cn({in:e,out:t,typeName:$n.ZodPipeline})}}const Mn=(e,t={},n)=>e?Wt.create().superRefine(((i,a)=>{var r,s;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,o=null===(s=null!==(r=e.fatal)&&void 0!==r?r:n)||void 0===s||s,c="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...c,fatal:o})}})):Wt.create(),Sn={object:Kt.lazycreate};var $n;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline"}($n||($n={}));const En=Rt.create,kn=Nt.create,An=bn.create,Tn=Lt.create,In=Ft.create,Dn=Vt.create,zn=Ht.create,jn=Ut.create,On=Zt.create,Rn=Wt.create,Pn=qt.create,Nn=Bt.create,Ln=Qt.create,Fn=Yt.create,Vn=Kt.create,Hn=Kt.strictCreate,Un=Xt.create,Zn=en.create,Wn=nn.create,qn=an.create,Bn=rn.create,Qn=sn.create,Yn=on.create,Gn=cn.create,Kn=ln.create,Xn=dn.create,Jn=hn.create,ei=mn.create,ti=gn.create,ni=pn.create,ii=fn.create,ai=_n.create,ri=pn.createWithPreprocess,si=Cn.create,oi={string:e=>Rt.create({...e,coerce:!0}),number:e=>Nt.create({...e,coerce:!0}),boolean:e=>Ft.create({...e,coerce:!0}),bigint:e=>Lt.create({...e,coerce:!0}),date:e=>Vt.create({...e,coerce:!0})},ci=pt;var li=Object.freeze({__proto__:null,defaultErrorMap:lt,setErrorMap:function(e){dt=e},getErrorMap:ut,makeIssue:ht,EMPTY_PATH:[],addIssueToContext:mt,ParseStatus:gt,INVALID:pt,DIRTY:ft,OK:_t,isAborted:vt,isDirty:yt,isValid:bt,isAsync:wt,get util(){return Ke},get objectUtil(){return Xe},ZodParsedType:rt,getParsedType:st,ZodType:$t,ZodString:Rt,ZodNumber:Nt,ZodBigInt:Lt,ZodBoolean:Ft,ZodDate:Vt,ZodSymbol:Ht,ZodUndefined:Ut,ZodNull:Zt,ZodAny:Wt,ZodUnknown:qt,ZodNever:Bt,ZodVoid:Qt,ZodArray:Yt,ZodObject:Kt,ZodUnion:Xt,ZodDiscriminatedUnion:en,ZodIntersection:nn,ZodTuple:an,ZodRecord:rn,ZodMap:sn,ZodSet:on,ZodFunction:cn,ZodLazy:ln,ZodLiteral:dn,ZodEnum:hn,ZodNativeEnum:mn,ZodPromise:gn,ZodEffects:pn,ZodTransformer:pn,ZodOptional:fn,ZodNullable:_n,ZodDefault:vn,ZodCatch:yn,ZodNaN:bn,BRAND:wn,ZodBranded:xn,ZodPipeline:Cn,custom:Mn,Schema:$t,ZodSchema:$t,late:Sn,get ZodFirstPartyTypeKind(){return $n},coerce:oi,any:Rn,array:Fn,bigint:Tn,boolean:In,date:Dn,discriminatedUnion:Zn,effect:ni,enum:Jn,function:Gn,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Mn((t=>t instanceof e),t),intersection:Wn,lazy:Kn,literal:Xn,map:Qn,nan:An,nativeEnum:ei,never:Nn,null:On,nullable:ai,number:kn,object:Vn,oboolean:()=>In().optional(),onumber:()=>kn().optional(),optional:ii,ostring:()=>En().optional(),pipeline:si,preprocess:ri,promise:ti,record:Bn,set:Yn,strictObject:Hn,string:En,symbol:zn,transformer:ni,tuple:qn,undefined:jn,union:Un,unknown:Pn,void:Ln,NEVER:ci,ZodIssueCode:ot,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:ct});const di="https://github.com/dermotduffy/frigate-hass-card",ui=`${di}#troubleshooting`,hi="cameras",mi=`${hi}.#.camera_entity`,gi=`${hi}.#.frigate.camera_name`,pi=`${hi}.#.cast.method`,fi=`${hi}.#.cast.dashboard.dashboard_path`,_i=`${hi}.#.cast.dashboard.view_path`,vi=`${hi}.#.frigate.client_id`,yi=`${hi}.#.frigate.labels`,bi=`${hi}.#.frigate.url`,wi=`${hi}.#.frigate.zones`,xi=`${hi}.#.go2rtc.modes`,Ci=`${hi}.#.go2rtc.stream`,Mi=`${hi}.#.hide`,Si=`${hi}.#.icon`,$i=`${hi}.#.id`,Ei=`${hi}.#.image.refresh_seconds`,ki=`${hi}.#.image.url`,Ai=`${hi}.#.motioneye.images.directory_pattern`,Ti=`${hi}.#.motioneye.images.file_pattern`,Ii=`${hi}.#.motioneye.movies.directory_pattern`,Di=`${hi}.#.motioneye.movies.file_pattern`,zi=`${hi}.#.motioneye.url`,ji=`${hi}.#.title`,Oi=`${hi}.#.webrtc_card.entity`,Ri=`${hi}.#.webrtc_card.url`,Pi=`${hi}.#.live_provider`,Ni=`${hi}.#.dependencies.cameras`,Li=`${hi}.#.dependencies.all_cameras`,Fi=`${hi}.#.triggers.motion`,Vi=`${hi}.#.triggers.occupancy`,Hi=`${hi}.#.triggers.entities`,Ui="cameras_global",Zi=`${Ui}.image`,Wi=`${Ui}.jsmpeg`,qi=`${Ui}.webrtc_card`,Bi=`${Ui}.triggers.occupancy`,Qi=`${Ui}.image.refresh_seconds`,Yi="elements",Gi="view",Ki=`${Gi}.camera_select`,Xi=`${Gi}.dark_mode`,Ji=`${Gi}.default`,ea=`${Gi}.interaction_seconds`,ta=`${Gi}.update_cycle_camera`,na=`${Gi}.update_force`,ia=`${Gi}.update_seconds`,aa=`${Gi}.reset_after_interaction`,ra=`${Gi}.scan`,sa=`${ra}.enabled`,oa=`${ra}.show_trigger_status`,ca=`${ra}.filter_selected_camera`,la=`${ra}.untrigger_seconds`,da=`${ra}.actions`,ua=`${da}.trigger`,ha=`${da}.untrigger`,ma=`${da}.interaction_mode`,ga="media_gallery",pa=`${ga}.controls.filter.mode`,fa=`${ga}.controls.thumbnails.show_details`,_a=`${ga}.controls.thumbnails.show_download_control`,va=`${ga}.controls.thumbnails.show_favorite_control`,ya=`${ga}.controls.thumbnails.show_timeline_control`,ba=`${ga}.controls.thumbnails.size`,wa="media_viewer",xa=`${wa}.auto_play`,Ca=`${wa}.auto_pause`,Ma=`${wa}.auto_mute`,Sa=`${wa}.auto_unmute`,$a=`${wa}.display.mode`,Ea=`${wa}.display.grid_columns`,ka=`${wa}.display.grid_max_columns`,Aa=`${wa}.display.grid_selected_width_factor`,Ta=`${wa}.draggable`,Ia=`${wa}.lazy_load`,Da=`${wa}.snapshot_click_plays_clip`,za=`${wa}.transition_effect`,ja=`${wa}.controls.builtin`,Oa=`${wa}.controls.next_previous.style`,Ra=`${wa}.controls.next_previous.size`,Pa=`${wa}.controls.thumbnails.mode`,Na=`${wa}.controls.thumbnails.show_details`,La=`${wa}.controls.thumbnails.show_download_control`,Fa=`${wa}.controls.thumbnails.show_favorite_control`,Va=`${wa}.controls.thumbnails.show_timeline_control`,Ha=`${wa}.controls.thumbnails.size`,Ua=`${wa}.controls.timeline.clustering_threshold`,Za=`${wa}.controls.timeline.events_media_type`,Wa=`${wa}.controls.timeline.mode`,qa=`${wa}.controls.timeline.show_recordings`,Ba=`${wa}.controls.timeline.style`,Qa=`${wa}.controls.timeline.window_seconds`,Ya=`${wa}.zoomable`,Ga=`${wa}.controls.title.mode`,Ka=`${wa}.controls.title.duration_seconds`,Xa=`${wa}.layout.fit`,Ja=`${wa}.layout.position.x`,er=`${wa}.layout.position.y`,tr="live",nr=`${tr}.auto_play`,ir=`${tr}.auto_pause`,ar=`${tr}.auto_mute`,rr=`${tr}.auto_unmute`,sr=`${tr}.controls.builtin`,or=`${tr}.controls.next_previous.style`,cr=`${tr}.controls.next_previous.size`,lr=`${tr}.controls.ptz.hide_home`,dr=`${tr}.controls.ptz.hide_pan_tilt`,ur=`${tr}.controls.ptz.hide_zoom`,hr=`${tr}.controls.ptz.mode`,mr=`${tr}.controls.ptz.orientation`,gr=`${tr}.controls.ptz.position`,pr=`${tr}.controls.thumbnails.media_type`,fr=`${tr}.controls.thumbnails.events_media_type`,_r=`${tr}.controls.thumbnails.mode`,vr=`${tr}.controls.thumbnails.size`,yr=`${tr}.controls.thumbnails.show_details`,br=`${tr}.controls.thumbnails.show_download_control`,wr=`${tr}.controls.thumbnails.show_favorite_control`,xr=`${tr}.controls.thumbnails.show_timeline_control`,Cr=`${tr}.controls.timeline.clustering_threshold`,Mr=`${tr}.controls.timeline.events_media_type`,Sr=`${tr}.controls.timeline.mode`,$r=`${tr}.controls.timeline.show_recordings`,Er=`${tr}.controls.timeline.style`,kr=`${tr}.controls.timeline.window_seconds`,Ar=`${tr}.controls.title.mode`,Tr=`${tr}.controls.title.duration_seconds`,Ir=`${tr}.display.mode`,Dr=`${tr}.display.grid_columns`,zr=`${tr}.display.grid_max_columns`,jr=`${tr}.display.grid_selected_width_factor`,Or=`${tr}.layout.fit`,Rr=`${tr}.layout.position.x`,Pr=`${tr}.layout.position.y`,Nr=`${tr}.draggable`,Lr=`${tr}.lazy_load`,Fr=`${tr}.lazy_unload`,Vr=`${tr}.preload`,Hr=`${tr}.transition_effect`,Ur=`${tr}.show_image_during_load`,Zr=`${tr}.microphone.disconnect_seconds`,Wr=`${tr}.microphone.mute_after_microphone_mute_seconds`,qr=`${tr}.microphone.always_connected`,Br=`${tr}.zoomable`,Qr="image",Yr=`${Qr}.layout.fit`,Gr=`${Qr}.layout.position.x`,Kr=`${Qr}.layout.position.y`,Xr=`${Qr}.mode`,Jr=`${Qr}.refresh_seconds`,es=`${Qr}.url`,ts=`${Qr}.zoomable`,ns="timeline",is=`${ns}.window_seconds`,as=`${ns}.clustering_threshold`,rs=`${ns}.events_media_type`,ss=`${ns}.show_recordings`,os=`${ns}.style`,cs=`${ns}.controls.thumbnails.mode`,ls=`${ns}.controls.thumbnails.size`,ds=`${ns}.controls.thumbnails.show_details`,us=`${ns}.controls.thumbnails.show_download_control`,hs=`${ns}.controls.thumbnails.show_favorite_control`,ms=`${ns}.controls.thumbnails.show_timeline_control`,gs="menu",ps=`${gs}.alignment`,fs=`${gs}.position`,_s=`${gs}.style`,vs=`${gs}.button_size`,ys=`${gs}.buttons`,bs=`${gs}.buttons.frigate`,ws=`${gs}.buttons.camera_ui`,xs=`${gs}.buttons.media_player`,Cs=`${gs}.buttons.timeline`,Ms="dimensions",Ss=`${Ms}.aspect_ratio`,$s=`${Ms}.aspect_ratio_mode`,Es=`${Ms}.max_height`,ks=`${Ms}.min_height`,As="overrides",Ts="performance",Is=`${Ts}.features.animated_progress_indicator`,Ds=`${Ts}.features.media_chunk_size`,zs=`${Ts}.profile`,js=`${Ts}.style.box_shadow`,Os=`${Ts}.style.border_radius`,Rs=1e3,Ps="frigate";function Ns(e){if(e instanceof li.ZodDefault)return Ns(e.removeDefault());if(e instanceof li.ZodObject){const t={};for(const n in e.shape){const i=e.shape[n];t[n]=li.ZodOptional.create(Ns(i))}return new li.ZodObject({...e._def,shape:()=>t})}return e instanceof li.ZodArray?li.ZodArray.create(Ns(e.element)):e instanceof li.ZodOptional?li.ZodOptional.create(Ns(e.unwrap())):e instanceof li.ZodNullable?li.ZodNullable.create(Ns(e.unwrap())):e instanceof li.ZodTuple?li.ZodTuple.create(e.items.map((e=>Ns(e)))):e}function Ls(e){const t=e.format();return Object.keys(t).filter((e=>!e.startsWith("_")))}const Fs=e=>{const t=new Set;if(e.issues.length)for(const n of e.issues)if("invalid_union"===n.code){const e=n.unionErrors;for(const n of e)Fs(n).forEach(t.add,t)}else t.add(Vs(n.path));return t},Vs=e=>{let t="";for(let n=0;n<e.length;n++){const i=e[n];"number"==typeof i?t+="["+i+"]":t?t+=" -> "+i:t=i}return t},Hs=20,Us=100,Zs=["live","clip","clips","snapshot","snapshots","recording","recordings","image","timeline"],Ws="live",qs=["unselected","hidden"],Bs=["selected","visible"],Qs=[...Bs,"microphone"],Ys=[...qs,"microphone"],Gs=["left","right","up","down","zoom_in","zoom_out"],Ks=[...Gs,"home"],Xs=[...Gs,"preset"],Js=li.enum(["single","grid"]),eo=li.object({mode:Js,grid_selected_width_factor:li.number().min(0).optional(),grid_max_columns:li.number().min(0).optional(),grid_columns:li.number().min(0).optional()}).optional(),to=li.object({confirmation:li.boolean().or(li.object({text:li.string().optional(),exemptions:li.object({user:li.string()}).array().optional()})).optional()}),no=to.extend({action:li.literal("toggle")}),io=to.extend({action:li.literal("call-service"),service:li.string(),data:li.object({}).passthrough().optional()}),ao=to.extend({action:li.literal("navigate"),navigation_path:li.string()}),ro=to.extend({action:li.literal("url"),url_path:li.string()}),so=to.extend({action:li.literal("more-info")}),oo=to.extend({action:li.literal("fire-dom-event")}).passthrough(),co=to.extend({action:li.literal("none")}),lo=oo.extend({action:li.literal("custom:frigate-card-action").transform((()=>"fire-dom-event")).or(li.literal("fire-dom-event")),card_id:li.string().regex(/^\w+$/,"card_id parameter can only contain [a-z][A-Z][0-9_]").optional()}),uo=lo.extend({frigate_card_action:li.enum(Zs)}),ho=lo.extend({frigate_card_action:li.enum(["camera_ui","default","diagnostics","download","expand","fullscreen","live_substream_off","live_substream_on","menu_toggle","microphone_mute","microphone_unmute","mute","pause","play","screenshot","unmute"])}),mo=lo.extend({frigate_card_action:li.literal("camera_select"),camera:li.string().optional(),triggered:li.boolean().optional()}),go=lo.extend({frigate_card_action:li.literal("live_substream_select"),camera:li.string()}),po=lo.extend({frigate_card_action:li.literal("media_player"),media_player:li.string(),media_player_action:li.enum(["play","stop"])}),fo=lo.extend({frigate_card_action:li.literal("display_mode_select"),display_mode:Js}),_o=lo.extend({frigate_card_action:li.literal("ptz"),ptz_action:li.enum(Xs),ptz_phase:li.enum(["start","stop"]).optional(),ptz_preset:li.string().optional()}),vo=lo.extend({frigate_card_action:li.literal("show_ptz"),show_ptz:li.boolean()}),yo=li.union([uo,ho,mo,go,po,fo,_o,vo]),bo=li.union([no,io,ao,ro,so,co,oo,yo]),wo=li.object({tap_action:bo.or(bo.array()).optional(),hold_action:bo.or(bo.array()).optional(),double_tap_action:bo.or(bo.array()).optional(),start_tap_action:bo.or(bo.array()).optional(),end_tap_action:bo.or(bo.array()).optional()}).passthrough(),xo=li.object({actions:wo.optional()}),Co=wo.extend({style:li.record(li.string().nullable().or(li.undefined())).optional(),title:li.string().nullable().optional()}),Mo=Co.extend({type:li.literal("state-badge"),entity:li.string()}),So=Co.extend({type:li.literal("state-icon"),entity:li.string(),icon:li.string().optional(),state_color:li.boolean().default(!0)}),$o=Co.extend({type:li.literal("state-label"),entity:li.string(),attribute:li.string().optional(),prefix:li.string().optional(),suffix:li.string().optional()}),Eo=Co.extend({type:li.literal("service-button"),title:li.string(),service:li.string(),service_data:li.object({}).passthrough().optional()}),ko=Co.extend({type:li.literal("icon"),icon:li.string(),entity:li.string().optional()}),Ao=Co.extend({type:li.literal("image"),entity:li.string().optional(),image:li.string().optional(),camera_image:li.string().optional(),camera_view:li.string().optional(),state_image:li.object({}).passthrough().optional(),filter:li.string().optional(),state_filter:li.object({}).passthrough().optional(),aspect_ratio:li.string().optional()}),To=li.object({entity:li.string(),state:li.string().optional(),state_not:li.string().optional()}).array(),Io=li.object({type:li.literal("conditional"),conditions:To,elements:li.lazy((()=>Ho))}),Do=li.object({type:li.string().superRefine(((e,t)=>{e.match(/^custom:(?!frigate-card).+/)||t.addIssue({code:li.ZodIssueCode.custom,message:"Frigate-card custom elements must match specific schemas",fatal:!0})}))}).passthrough(),zo=li.object({enabled:li.boolean().default(!0).optional(),priority:li.number().min(0).max(100).default(50).optional(),alignment:li.enum(["matching","opposing"]).default("matching").optional(),icon:li.string().optional()}),jo=zo.merge(ko).extend({type:li.literal("custom:frigate-card-menu-icon")}),Oo=zo.merge(So).extend({type:li.literal("custom:frigate-card-menu-state-icon")}).merge(zo),Ro=Co.extend({entity:li.string().optional(),icon:li.string().optional(),state_color:li.boolean().default(!0),selected:li.boolean().default(!1),subtitle:li.string().optional(),enabled:li.boolean().default(!0)}),Po=zo.merge(ko).extend({type:li.literal("custom:frigate-card-menu-submenu"),items:Ro.array()}),No=zo.merge(So).extend({type:li.literal("custom:frigate-card-menu-submenu-select"),options:li.record(Ro.deepPartial()).optional()}),Lo=li.object({connected:li.boolean().optional(),muted:li.boolean().optional()}),Fo=li.object({view:li.string().array().optional(),fullscreen:li.boolean().optional(),expand:li.boolean().optional(),camera:li.string().array().optional(),media_loaded:li.boolean().optional(),state:To.optional(),media_query:li.string().optional(),display_mode:Js.optional(),triggered:li.string().array().optional(),interaction:li.boolean().optional(),microphone:Lo.optional()}),Vo=li.object({type:li.literal("custom:frigate-card-conditional"),conditions:Fo,elements:li.lazy((()=>Ho))}),Ho=li.union([Oo,jo,Po,No,Vo,Mo,So,$o,Eo,ko,Ao,Io,Do]).array().optional(),Uo=li.object({fit:li.enum(["contain","cover","fill"]).optional(),position:li.object({x:li.number().min(0).max(100).optional(),y:li.number().min(0).max(100).optional()}).optional()}),Zo={refresh_seconds:1},Wo=li.object({url:li.string().optional(),refresh_seconds:li.number().min(0).default(Zo.refresh_seconds)}),qo={mode:"url",zoomable:!0,...Zo},Bo=Wo.extend({mode:li.enum(["screensaver","camera","url"]).default(qo.mode),layout:Uo.optional(),zoomable:li.boolean().default(qo.zoomable)}).merge(xo).default(qo),Qo=175,Yo=75,Go={size:100,show_details:!0,show_favorite_control:!0,show_timeline_control:!0,show_download_control:!0},Ko=li.object({size:li.number().min(75).max(175).default(Go.size),show_details:li.boolean().default(Go.show_details),show_favorite_control:li.boolean().default(Go.show_favorite_control),show_timeline_control:li.boolean().default(Go.show_timeline_control),show_download_control:li.boolean().default(Go.show_download_control)}),Xo={...Go,mode:"right"},Jo=Ko.extend({mode:li.enum(["none","above","below","left","right"]).default(Xo.mode)}),ec=li.enum(["all","clips","snapshots"]),tc={clustering_threshold:3,events_media_type:"all",window_seconds:3600,show_recordings:!0,style:"stack"},nc=li.object({clustering_threshold:li.number().optional().default(tc.clustering_threshold),events_media_type:ec.optional().default(tc.events_media_type),window_seconds:li.number().min(60).max(86400).optional().default(tc.window_seconds),show_recordings:li.boolean().optional().default(tc.show_recordings),style:li.enum(["stack","ribbon"]).optional().default(tc.style)}),ic={...tc,mode:"none",style:"ribbon"},ac=nc.extend({mode:li.enum(["none","above","below"]).default(ic.mode),style:nc.shape.style.default(ic.style)}),rc={...tc,controls:{thumbnails:Xo}},sc=nc.extend({controls:li.object({thumbnails:Jo.default(rc.controls.thumbnails)}).default(rc.controls)}).default(rc),oc=li.object({style:li.enum(["none","chevrons","icons","thumbnails"]),size:li.number().min(20)}),cc=li.object({mode:li.enum(["none","popup-top-right","popup-top-left","popup-bottom-right","popup-bottom-left"]).optional(),duration_seconds:li.number().min(0).max(60).optional()}),lc=li.enum(["none","slide"]),dc={always_connected:!1,disconnect_seconds:90,mute_after_microphone_mute_seconds:60},uc=li.object({always_connected:li.boolean().default(dc.always_connected),disconnect_seconds:li.number().min(0).default(dc.disconnect_seconds),mute_after_microphone_mute_seconds:li.number().min(0).default(dc.mute_after_microphone_mute_seconds)}).default(dc),hc=li.object({url:li.string().transform((e=>e.replace(/\/+$/,""))).optional(),host:li.string().optional(),modes:li.enum(["webrtc","mse","mp4","mjpeg"]).array().optional(),stream:li.string().optional()}),mc=Wo,gc=li.object({entity:li.string().optional(),url:li.string().optional()}).passthrough(),pc=li.object({options:li.object({audio:li.boolean().optional(),video:li.boolean().optional(),pauseWhenHidden:li.boolean().optional(),disableGl:li.boolean().optional(),disableWebAssembly:li.boolean().optional(),preserveDrawingBuffer:li.boolean().optional(),progressive:li.boolean().optional(),throttled:li.boolean().optional(),chunkSize:li.number().optional(),maxAudioLag:li.number().optional(),videoBufferSize:li.number().optional(),audioBufferSize:li.number().optional()}).optional()}),fc=li.object({actions_left:wo.optional(),actions_right:wo.optional(),actions_up:wo.optional(),actions_down:wo.optional(),actions_zoom_in:wo.optional(),actions_zoom_out:wo.optional(),actions_home:wo.optional()}),_c={orientation:"horizontal",mode:"on",hide_pan_tilt:!1,hide_zoom:!1,hide_home:!1,position:"bottom-right"},vc=li.preprocess((e=>{if(!e||"object"!=typeof e||!e.service)return e;const t={...e};return Ks.forEach((n=>{`data_${n}`in e&&!(`actions_${n}`in e)&&(t[`actions_${n}`]={tap_action:{action:"call-service",service:e.service,data:e[`data_${n}`]}},delete t[`data_${n}`])})),t}),fc.extend({mode:li.enum(["off","on"]).default(_c.mode),position:li.enum(["top-left","top-right","bottom-left","bottom-right"]).default(_c.position),orientation:li.enum(["vertical","horizontal"]).default(_c.orientation),hide_pan_tilt:li.boolean().default(_c.hide_pan_tilt),hide_zoom:li.boolean().default(_c.hide_zoom),hide_home:li.boolean().default(_c.hide_home),service:li.string().optional(),style:li.object({}).passthrough().optional()})),yc={...Xo,media_type:"events",events_media_type:"all"},bc={auto_play:[...Bs],auto_pause:[],auto_mute:[...Ys],auto_unmute:["microphone"],preload:!1,lazy_load:!0,lazy_unload:[],draggable:!0,zoomable:!0,transition_effect:"slide",show_image_during_load:!0,mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"chevrons"},ptz:_c,thumbnails:yc,timeline:ic},microphone:{...dc}},wc=Jo.extend({media_type:li.enum(["events","recordings"]).default(bc.controls.thumbnails.media_type),events_media_type:ec.default(bc.controls.thumbnails.events_media_type)}),xc=li.object({controls:li.object({builtin:li.boolean().default(bc.controls.builtin),next_previous:oc.extend({style:li.enum(["none","chevrons","icons"]).default(bc.controls.next_previous.style),size:oc.shape.size.default(bc.controls.next_previous.size)}).default(bc.controls.next_previous),ptz:vc.default(bc.controls.ptz),thumbnails:wc.default(bc.controls.thumbnails),timeline:ac.default(bc.controls.timeline),title:cc.optional()}).default(bc.controls),show_image_during_load:li.boolean().default(bc.show_image_during_load),layout:Uo.optional(),microphone:uc.default(bc.microphone),zoomable:li.boolean().default(bc.zoomable),display:eo}).merge(xo),Cc=xc.extend({auto_play:li.enum(Bs).array().default(bc.auto_play),auto_pause:li.enum(qs).array().default(bc.auto_pause),auto_mute:li.enum(Ys).array().default(bc.auto_mute),auto_unmute:li.enum(Qs).array().default(bc.auto_unmute),preload:li.boolean().default(bc.preload),lazy_load:li.boolean().default(bc.lazy_load),lazy_unload:li.enum(qs).array().default(bc.lazy_unload),draggable:li.boolean().default(bc.draggable),transition_effect:lc.default(bc.transition_effect)}).default(bc);li.object({conditions:Fo,overrides:xc}).array().optional();const Mc=li.object({method:li.enum(["standard","dashboard"]).default("standard").optional(),dashboard:li.object({dashboard_path:li.string().optional(),view_path:li.string().optional()}).optional()}),Sc={dependencies:{all_cameras:!1,cameras:[]},engine:"auto",frigate:{client_id:"frigate"},hide:!1,image:{refresh_seconds:1},live_provider:"auto",motioneye:{images:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"},movies:{directory_pattern:"%Y-%m-%d",file_pattern:"%H-%M-%S"}},triggers:{motion:!1,occupancy:!0,entities:[]}},$c=li.object({camera_entity:li.string().optional(),icon:li.string().optional(),title:li.string().optional(),hide:li.boolean().optional(),id:li.string().optional(),dependencies:li.object({all_cameras:li.boolean().default(Sc.dependencies.all_cameras),cameras:li.string().array().default(Sc.dependencies.cameras)}).default(Sc.dependencies),triggers:li.object({motion:li.boolean().default(Sc.triggers.motion),occupancy:li.boolean().default(Sc.triggers.occupancy),entities:li.string().array().default(Sc.triggers.entities)}).default(Sc.triggers),engine:li.enum(["auto","frigate","generic","motioneye"]).default("auto"),frigate:li.object({url:li.string().optional(),client_id:li.string().default(Sc.frigate.client_id),camera_name:li.string().optional(),labels:li.string().array().optional(),zones:li.string().array().optional()}).default(Sc.frigate),motioneye:li.object({url:li.string().optional(),images:li.object({directory_pattern:li.string().includes("%").default(Sc.motioneye.images.directory_pattern),file_pattern:li.string().includes("%").default(Sc.motioneye.images.file_pattern)}).default(Sc.motioneye.images),movies:li.object({directory_pattern:li.string().includes("%").default(Sc.motioneye.movies.directory_pattern),file_pattern:li.string().includes("%").default(Sc.motioneye.movies.file_pattern)}).default(Sc.motioneye.movies)}).default(Sc.motioneye),live_provider:li.enum(["auto","image","ha","jsmpeg","go2rtc","webrtc-card"]).default(Sc.live_provider),go2rtc:hc.optional(),image:mc.default(Sc.image),jsmpeg:pc.optional(),webrtc_card:gc.optional(),cast:Mc.optional()}).default(Sc),Ec=$c.array().min(1),kc={default:Ws,camera_select:"current",interaction_seconds:300,reset_after_interaction:!0,update_seconds:0,update_force:!1,update_cycle_camera:!1,dark_mode:"off",scan:{enabled:!1,show_trigger_status:!0,filter_selected_camera:!1,actions:{interaction_mode:"inactive",trigger:"live",untrigger:"default"},untrigger_seconds:0}},Ac=li.object({enabled:li.boolean().default(kc.scan.enabled),filter_selected_camera:li.boolean().default(kc.scan.filter_selected_camera),show_trigger_status:li.boolean().default(kc.scan.show_trigger_status),actions:li.object({interaction_mode:li.enum(["all","inactive","active"]).default(kc.scan.actions.interaction_mode),trigger:li.enum(["live","none"]).default(kc.scan.actions.trigger),untrigger:li.enum(["default","none"]).default(kc.scan.actions.untrigger)}).default(kc.scan.actions),untrigger_seconds:li.number().default(kc.scan.untrigger_seconds)}),Tc=li.object({default:li.enum(Zs).default(kc.default),camera_select:li.enum([...Zs,"current"]).default(kc.camera_select),interaction_seconds:li.number().default(kc.interaction_seconds),reset_after_interaction:li.boolean().default(kc.reset_after_interaction),update_seconds:li.number().default(kc.update_seconds),update_force:li.boolean().default(kc.update_force),update_cycle_camera:li.boolean().default(kc.update_cycle_camera),update_entities:li.string().array().optional(),render_entities:li.string().array().optional(),dark_mode:li.enum(["on","off","auto"]).optional(),scan:Ac.default(kc.scan)}).merge(xo).default(kc),Ic=["left","right","top","bottom"],Dc=Ic,zc={priority:50,enabled:!0},jc={priority:50,enabled:!1},Oc={style:"hidden",position:"top",alignment:"left",buttons:{frigate:zc,cameras:zc,substreams:zc,live:zc,clips:zc,snapshots:zc,image:jc,timeline:zc,download:zc,camera_ui:zc,fullscreen:zc,expand:jc,media_player:zc,microphone:{...jc,type:"momentary"},mute:jc,play:jc,recordings:jc,screenshot:jc,display_mode:zc,ptz:jc},button_size:40},Rc=zo.extend({enabled:zo.shape.enabled.default(zc.enabled),priority:zo.shape.priority.default(zc.priority)}),Pc=zo.extend({enabled:zo.shape.enabled.default(jc.enabled),priority:zo.shape.priority.default(jc.priority)}),Nc=li.object({style:li.enum(["none","hidden","overlay","hover","hover-card","outside"]).default(Oc.style),position:li.enum(Ic).default(Oc.position),alignment:li.enum(Dc).default(Oc.alignment),buttons:li.object({frigate:Rc.default(Oc.buttons.frigate),cameras:Rc.default(Oc.buttons.cameras),substreams:Rc.default(Oc.buttons.substreams),live:Rc.default(Oc.buttons.live),clips:Rc.default(Oc.buttons.clips),snapshots:Rc.default(Oc.buttons.snapshots),image:Pc.default(Oc.buttons.image),timeline:Rc.default(Oc.buttons.timeline),download:Rc.default(Oc.buttons.download),camera_ui:Rc.default(Oc.buttons.camera_ui),fullscreen:Rc.default(Oc.buttons.fullscreen),expand:Pc.default(Oc.buttons.expand),media_player:Rc.default(Oc.buttons.media_player),microphone:Pc.extend({type:li.enum(["momentary","toggle"]).default(Oc.buttons.microphone.type)}).default(Oc.buttons.microphone),recordings:Pc.default(Oc.buttons.recordings),mute:Pc.default(Oc.buttons.mute),play:Pc.default(Oc.buttons.play),screenshot:Pc.default(Oc.buttons.screenshot),display_mode:Rc.default(Oc.buttons.display_mode),ptz:Pc.default(Oc.buttons.ptz)}).default(Oc.buttons),button_size:li.number().min(20).default(Oc.button_size)}).default(Oc),Lc={auto_play:[...Bs],auto_pause:[...qs],auto_mute:[...qs],auto_unmute:[],lazy_load:!0,draggable:!0,zoomable:!0,transition_effect:"slide",snapshot_click_plays_clip:!0,display_mode:"single",controls:{builtin:!0,next_previous:{size:48,style:"thumbnails"},thumbnails:Xo,timeline:ic}},Fc=oc.extend({style:li.enum(["none","thumbnails","chevrons"]).default(Lc.controls.next_previous.style),size:oc.shape.size.default(Lc.controls.next_previous.size)}),Vc=li.object({auto_play:li.enum(Bs).array().default(Lc.auto_play),auto_pause:li.enum(qs).array().default(Lc.auto_pause),auto_mute:li.enum(qs).array().default(Lc.auto_mute),auto_unmute:li.enum(Bs).array().default(Lc.auto_unmute),lazy_load:li.boolean().default(Lc.lazy_load),draggable:li.boolean().default(Lc.draggable),zoomable:li.boolean().default(Lc.zoomable),transition_effect:lc.default(Lc.transition_effect),snapshot_click_plays_clip:li.boolean().default(Lc.snapshot_click_plays_clip),display:eo,controls:li.object({builtin:li.boolean().default(Lc.controls.builtin),next_previous:Fc.default(Lc.controls.next_previous),thumbnails:Jo.default(Lc.controls.thumbnails),timeline:ac.default(Lc.controls.timeline),title:cc.optional()}).default(Lc.controls),layout:Uo.optional()}).merge(xo).default(Lc),Hc={...Xo,show_details:!1},Uc={controls:{thumbnails:Hc,filter:{mode:"right"}}},Zc=Jo.extend({show_details:li.boolean().default(Hc.show_details)}),Wc=li.object({controls:li.object({thumbnails:Zc.default(Uc.controls.thumbnails),filter:li.object({mode:li.enum(["none","left","right"]).default(Uc.controls.filter.mode)}).default(Uc.controls.filter)}).default(Uc.controls)}).merge(xo).default(Uc),qc={aspect_ratio_mode:"dynamic",aspect_ratio:[16,9],max_height:"100vh",min_height:"100px"},Bc=li.object({aspect_ratio_mode:li.enum(["dynamic","static","unconstrained"]).default(qc.aspect_ratio_mode),aspect_ratio:li.number().array().length(2).or(li.string().regex(/^\s*\d+\s*[:/]\s*\d+\s*$/).transform((e=>e.split(/[:\/]/).map((e=>Number(e)))))).default(qc.aspect_ratio),max_height:li.string().default(qc.max_height),min_height:li.string().default(qc.min_height)}).default(qc),Qc=li.object({cameras:Ns(Ec).optional(),cameras_global:Ns($c).optional(),live:Ns(xc).optional(),menu:Ns(Nc).optional(),image:Ns(Bo).optional(),view:Ns(Tc).optional(),dimensions:Ns(Bc).optional()}),Yc=li.object({conditions:Fo,overrides:Qc}).array().optional(),Gc=bo.array(),Kc=li.object({conditions:Fo,actions:Gc.optional(),actions_not:Gc.optional()}).array().optional(),Xc={profile:"high",features:{animated_progress_indicator:!0,media_chunk_size:50},style:{border_radius:!0,box_shadow:!0}},Jc=li.object({profile:li.enum(["low","high"]).default(Xc.profile),features:li.object({animated_progress_indicator:li.boolean().default(Xc.features.animated_progress_indicator),media_chunk_size:li.number().min(0).max(1e3).default(Xc.features.media_chunk_size)}).default(Xc.features),style:li.object({border_radius:li.boolean().default(Xc.style.border_radius),box_shadow:li.boolean().default(Xc.style.box_shadow)}).default(Xc.style)}).default(Xc),el={logging:!1},tl=li.object({logging:li.boolean().default(el.logging)}).default(el),nl=li.object({cameras:Ns(Ec),cameras_global:$c,view:Tc,menu:Nc,live:Cc,media_gallery:Wc,media_viewer:Vc,image:Bo,elements:Ho,dimensions:Bc,timeline:sc,performance:Jc,debug:tl,automations:Kc,overrides:Yc,card_mod:li.unknown(),card_id:li.string().regex(/^\w+$/).optional(),type:li.string()}),il={cameras:Sc,view:kc,menu:Oc,live:bc,media_gallery:Uc,media_viewer:Lc,image:qo,timeline:rc,performance:Xc,debug:el};function al(e){if(!e)return null;const t=yo.safeParse(e);return t.success?t.data:null}function rl(e,t){return{action:"fire-dom-event",frigate_card_action:e,...t?.cardID&&{card_id:t.cardID}}}function sl(e,t,n){return{action:"fire-dom-event",frigate_card_action:e,camera:t,...n?.cardID&&{card_id:n.cardID}}}function ol(e,t,n){return{action:"fire-dom-event",frigate_card_action:"media_player",media_player:e,media_player_action:t,...n?.cardID&&{card_id:n.cardID}}}function cl(e,t){return{action:"fire-dom-event",frigate_card_action:"display_mode_select",display_mode:e,...t?.cardID&&{card_id:t.cardID}}}function ll(e,t){return{action:"fire-dom-event",frigate_card_action:"show_ptz",show_ptz:e,...t?.cardID&&{card_id:t.cardID}}}function dl(e,t){return e&&t?"tap"===e&&t.tap_action?t.tap_action:"hold"===e&&t.hold_action?t.hold_action:"double_tap"===e&&t.double_tap_action?t.double_tap_action:"end_tap"===e&&t.end_tap_action?t.end_tap_action:"start_tap"===e&&t.start_tap_action?t.start_tap_action:null:null}const ul=(e,t,n,i,a)=>!(!a&&"tap"!=i)&&(hl(e,t,n,a),!0),hl=(e,t,n,i)=>{Array.isArray(i)?i.forEach((i=>it(e,t,n,i))):it(e,t,n,i??void 0)},ml=e=>Array.isArray(e)?!!e.find((e=>at(e))):at(e),gl=e=>{e.stopPropagation()};class pl{constructor(){this._timer=null,this._repeated=!1}stop(){this._timer&&(this._repeated?window.clearInterval(this._timer):window.clearTimeout(this._timer),this._timer=null)}isRunning(){return null!==this._timer}start(e,t){this.stop(),this._timer=window.setTimeout((()=>{this._timer=null,t()}),1e3*e),this._repeated=!1}startRepeated(e,t){this.stop(),this._timer=window.setInterval((()=>{t()}),1e3*e),this._repeated=!0}}class fl extends HTMLElement{constructor(){super(...arguments),this.holdTime=.4,this.holdTimer=new pl,this.doubleClickTimer=new pl,this.held=!1,this.started=!1}connectedCallback(){["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach((e=>{document.addEventListener(e,(()=>{this.holdTimer.stop()}),{passive:!0})}))}bind(e,t){if(e.actionHandlerOptions)return void(e.actionHandlerOptions=t);e.actionHandlerOptions=t,e.addEventListener("contextmenu",(e=>{const t=e||window.event;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}));const n=()=>{this.held=!1,this.holdTimer.start(this.holdTime,(()=>{this.held=!0})),this.started||(this.started=!0,et(e,"action",{action:"start_tap"}))},i=t=>{const n=e.actionHandlerOptions;n?.allowPropagation||gl(t),["touchend","touchcancel"].includes(t.type)&&!this.held||(this.holdTimer.stop(),this.started=!1,et(e,"action",{action:"end_tap"}),n?.hasHold&&this.held?et(e,"action",{action:"hold"}):n?.hasDoubleClick?"click"===t.type&&t.detail<2||!this.doubleClickTimer.isRunning()?this.doubleClickTimer.start(.25,(()=>et(e,"action",{action:"tap"}))):(this.doubleClickTimer.stop(),et(e,"action",{action:"double_tap"})):et(e,"action",{action:"tap"}))};e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchend",i),e.addEventListener("touchcancel",i),e.addEventListener("mousedown",n,{passive:!0}),e.addEventListener("click",i),e.addEventListener("keyup",(e=>{"Enter"===e.key&&i(e)}))}}customElements.define("action-handler-frigate-card",fl);const _l=(e,t)=>{const n=(()=>{const e=document.body;if(e.querySelector("action-handler-frigate-card"))return e.querySelector("action-handler-frigate-card");const t=document.createElement("action-handler-frigate-card");return e.appendChild(t),t})();n&&n.bind(e,t)},vl=de(class extends ue{update(e,[t]){return _l(e.element,t),N}render(e){}});function yl(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function bl(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function wl(e){return wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(e)}function xl(e){bl(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===wl(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function Cl(e,t){bl(2,arguments);var n=xl(e),i=yl(t);return isNaN(i)?new Date(NaN):i?(n.setDate(n.getDate()+i),n):n}function Ml(e,t){bl(2,arguments);var n=xl(e),i=yl(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var a=n.getDate(),r=new Date(n.getTime());return r.setMonth(n.getMonth()+i+1,0),a>=r.getDate()?r:(n.setFullYear(r.getFullYear(),r.getMonth(),a),n)}function Sl(e){return Sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(e)}function $l(e,t){if(bl(2,arguments),!t||"object"!==Sl(t))return new Date(NaN);var n=t.years?yl(t.years):0,i=t.months?yl(t.months):0,a=t.weeks?yl(t.weeks):0,r=t.days?yl(t.days):0,s=t.hours?yl(t.hours):0,o=t.minutes?yl(t.minutes):0,c=t.seconds?yl(t.seconds):0,l=xl(e),d=i||n?Ml(l,i+12*n):l,u=r||a?Cl(d,r+7*a):d,h=1e3*(c+60*(o+60*s));return new Date(u.getTime()+h)}function El(e,t){return e===t||e!=e&&t!=t}function kl(e,t){for(var n=e.length;n--;)if(El(e[n][0],t))return n;return-1}var Al=Array.prototype.splice;function Tl(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Tl.prototype.clear=function(){this.__data__=[],this.size=0},Tl.prototype.delete=function(e){var t=this.__data__,n=kl(t,e);return!(n<0)&&(n==t.length-1?t.pop():Al.call(t,n,1),--this.size,!0)},Tl.prototype.get=function(e){var t=this.__data__,n=kl(t,e);return n<0?void 0:t[n][1]},Tl.prototype.has=function(e){return kl(this.__data__,e)>-1},Tl.prototype.set=function(e,t){var n=this.__data__,i=kl(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this};var Il="object"==typeof global&&global&&global.Object===Object&&global,Dl="object"==typeof self&&self&&self.Object===Object&&self,zl=Il||Dl||Function("return this")(),jl=zl.Symbol,Ol=Object.prototype,Rl=Ol.hasOwnProperty,Pl=Ol.toString,Nl=jl?jl.toStringTag:void 0;var Ll=Object.prototype.toString;var Fl="[object Null]",Vl="[object Undefined]",Hl=jl?jl.toStringTag:void 0;function Ul(e){return null==e?void 0===e?Vl:Fl:Hl&&Hl in Object(e)?function(e){var t=Rl.call(e,Nl),n=e[Nl];try{e[Nl]=void 0;var i=!0}catch(e){}var a=Pl.call(e);return i&&(t?e[Nl]=n:delete e[Nl]),a}(e):function(e){return Ll.call(e)}(e)}function Zl(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var Wl="[object AsyncFunction]",ql="[object Function]",Bl="[object GeneratorFunction]",Ql="[object Proxy]";function Yl(e){if(!Zl(e))return!1;var t=Ul(e);return t==ql||t==Bl||t==Wl||t==Ql}var Gl,Kl=zl["__core-js_shared__"],Xl=(Gl=/[^.]+$/.exec(Kl&&Kl.keys&&Kl.keys.IE_PROTO||""))?"Symbol(src)_1."+Gl:"";var Jl=Function.prototype.toString;function ed(e){if(null!=e){try{return Jl.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var td=/^\[object .+?Constructor\]$/,nd=Function.prototype,id=Object.prototype,ad=nd.toString,rd=id.hasOwnProperty,sd=RegExp("^"+ad.call(rd).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function od(e){return!(!Zl(e)||(t=e,Xl&&Xl in t))&&(Yl(e)?sd:td).test(ed(e));var t}function cd(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return od(n)?n:void 0}var ld=cd(zl,"Map"),dd=cd(Object,"create");var ud="__lodash_hash_undefined__",hd=Object.prototype.hasOwnProperty;var md=Object.prototype.hasOwnProperty;var gd="__lodash_hash_undefined__";function pd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function fd(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function _d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}pd.prototype.clear=function(){this.__data__=dd?dd(null):{},this.size=0},pd.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},pd.prototype.get=function(e){var t=this.__data__;if(dd){var n=t[e];return n===ud?void 0:n}return hd.call(t,e)?t[e]:void 0},pd.prototype.has=function(e){var t=this.__data__;return dd?void 0!==t[e]:md.call(t,e)},pd.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=dd&&void 0===t?gd:t,this},_d.prototype.clear=function(){this.size=0,this.__data__={hash:new pd,map:new(ld||Tl),string:new pd}},_d.prototype.delete=function(e){var t=fd(this,e).delete(e);return this.size-=t?1:0,t},_d.prototype.get=function(e){return fd(this,e).get(e)},_d.prototype.has=function(e){return fd(this,e).has(e)},_d.prototype.set=function(e,t){var n=fd(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this};var vd=200;function yd(e){var t=this.__data__=new Tl(e);this.size=t.size}yd.prototype.clear=function(){this.__data__=new Tl,this.size=0},yd.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},yd.prototype.get=function(e){return this.__data__.get(e)},yd.prototype.has=function(e){return this.__data__.has(e)},yd.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Tl){var i=n.__data__;if(!ld||i.length<vd-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new _d(i)}return n.set(e,t),this.size=n.size,this};var bd=function(){try{var e=cd(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();function wd(e,t,n){"__proto__"==t&&bd?bd(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var xd=Object.prototype.hasOwnProperty;function Cd(e,t,n){var i=e[t];xd.call(e,t)&&El(i,n)&&(void 0!==n||t in e)||wd(e,t,n)}function Md(e,t,n,i){var a=!n;n||(n={});for(var r=-1,s=t.length;++r<s;){var o=t[r],c=i?i(n[o],e[o],o,n,e):void 0;void 0===c&&(c=e[o]),a?wd(n,o,c):Cd(n,o,c)}return n}function Sd(e){return null!=e&&"object"==typeof e}var $d="[object Arguments]";function Ed(e){return Sd(e)&&Ul(e)==$d}var kd=Object.prototype,Ad=kd.hasOwnProperty,Td=kd.propertyIsEnumerable,Id=Ed(function(){return arguments}())?Ed:function(e){return Sd(e)&&Ad.call(e,"callee")&&!Td.call(e,"callee")},Dd=Array.isArray;var zd="object"==typeof exports&&exports&&!exports.nodeType&&exports,jd=zd&&"object"==typeof module&&module&&!module.nodeType&&module,Od=jd&&jd.exports===zd?zl.Buffer:void 0,Rd=(Od?Od.isBuffer:void 0)||function(){return!1},Pd=9007199254740991,Nd=/^(?:0|[1-9]\d*)$/;function Ld(e,t){var n=typeof e;return!!(t=null==t?Pd:t)&&("number"==n||"symbol"!=n&&Nd.test(e))&&e>-1&&e%1==0&&e<t}var Fd=9007199254740991;function Vd(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Fd}var Hd={};function Ud(e){return function(t){return e(t)}}Hd["[object Float32Array]"]=Hd["[object Float64Array]"]=Hd["[object Int8Array]"]=Hd["[object Int16Array]"]=Hd["[object Int32Array]"]=Hd["[object Uint8Array]"]=Hd["[object Uint8ClampedArray]"]=Hd["[object Uint16Array]"]=Hd["[object Uint32Array]"]=!0,Hd["[object Arguments]"]=Hd["[object Array]"]=Hd["[object ArrayBuffer]"]=Hd["[object Boolean]"]=Hd["[object DataView]"]=Hd["[object Date]"]=Hd["[object Error]"]=Hd["[object Function]"]=Hd["[object Map]"]=Hd["[object Number]"]=Hd["[object Object]"]=Hd["[object RegExp]"]=Hd["[object Set]"]=Hd["[object String]"]=Hd["[object WeakMap]"]=!1;var Zd="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wd=Zd&&"object"==typeof module&&module&&!module.nodeType&&module,qd=Wd&&Wd.exports===Zd&&Il.process,Bd=function(){try{var e=Wd&&Wd.require&&Wd.require("util").types;return e||qd&&qd.binding&&qd.binding("util")}catch(e){}}(),Qd=Bd&&Bd.isTypedArray,Yd=Qd?Ud(Qd):function(e){return Sd(e)&&Vd(e.length)&&!!Hd[Ul(e)]},Gd=Object.prototype.hasOwnProperty;function Kd(e,t){var n=Dd(e),i=!n&&Id(e),a=!n&&!i&&Rd(e),r=!n&&!i&&!a&&Yd(e),s=n||i||a||r,o=s?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],c=o.length;for(var l in e)!t&&!Gd.call(e,l)||s&&("length"==l||a&&("offset"==l||"parent"==l)||r&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ld(l,c))||o.push(l);return o}var Xd=Object.prototype;function Jd(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Xd)}function eu(e,t){return function(n){return e(t(n))}}var tu=eu(Object.keys,Object),nu=Object.prototype.hasOwnProperty;function iu(e){return null!=e&&Vd(e.length)&&!Yl(e)}function au(e){return iu(e)?Kd(e):function(e){if(!Jd(e))return tu(e);var t=[];for(var n in Object(e))nu.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var ru=Object.prototype.hasOwnProperty;function su(e){if(!Zl(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Jd(e),n=[];for(var i in e)("constructor"!=i||!t&&ru.call(e,i))&&n.push(i);return n}function ou(e){return iu(e)?Kd(e,!0):su(e)}var cu="object"==typeof exports&&exports&&!exports.nodeType&&exports,lu=cu&&"object"==typeof module&&module&&!module.nodeType&&module,du=lu&&lu.exports===cu?zl.Buffer:void 0,uu=du?du.allocUnsafe:void 0;function hu(e,t){if(t)return e.slice();var n=e.length,i=uu?uu(n):new e.constructor(n);return e.copy(i),i}function mu(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function gu(){return[]}var pu=Object.prototype.propertyIsEnumerable,fu=Object.getOwnPropertySymbols,_u=fu?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,a=0,r=[];++n<i;){var s=e[n];t(s,n,e)&&(r[a++]=s)}return r}(fu(e),(function(t){return pu.call(e,t)})))}:gu;function vu(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}var yu=eu(Object.getPrototypeOf,Object),bu=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)vu(t,_u(e)),e=yu(e);return t}:gu;function wu(e,t,n){var i=t(e);return Dd(e)?i:vu(i,n(e))}function xu(e){return wu(e,au,_u)}function Cu(e){return wu(e,ou,bu)}var Mu=cd(zl,"DataView"),Su=cd(zl,"Promise"),$u=cd(zl,"Set"),Eu=cd(zl,"WeakMap"),ku="[object Map]",Au="[object Promise]",Tu="[object Set]",Iu="[object WeakMap]",Du="[object DataView]",zu=ed(Mu),ju=ed(ld),Ou=ed(Su),Ru=ed($u),Pu=ed(Eu),Nu=Ul;(Mu&&Nu(new Mu(new ArrayBuffer(1)))!=Du||ld&&Nu(new ld)!=ku||Su&&Nu(Su.resolve())!=Au||$u&&Nu(new $u)!=Tu||Eu&&Nu(new Eu)!=Iu)&&(Nu=function(e){var t=Ul(e),n="[object Object]"==t?e.constructor:void 0,i=n?ed(n):"";if(i)switch(i){case zu:return Du;case ju:return ku;case Ou:return Au;case Ru:return Tu;case Pu:return Iu}return t});var Lu=Nu,Fu=Object.prototype.hasOwnProperty;var Vu=zl.Uint8Array;function Hu(e){var t=new e.constructor(e.byteLength);return new Vu(t).set(new Vu(e)),t}var Uu=/\w*$/;var Zu=jl?jl.prototype:void 0,Wu=Zu?Zu.valueOf:void 0;function qu(e,t){var n=t?Hu(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Bu="[object Boolean]",Qu="[object Date]",Yu="[object Map]",Gu="[object Number]",Ku="[object RegExp]",Xu="[object Set]",Ju="[object String]",eh="[object Symbol]",th="[object ArrayBuffer]",nh="[object DataView]",ih="[object Float32Array]",ah="[object Float64Array]",rh="[object Int8Array]",sh="[object Int16Array]",oh="[object Int32Array]",ch="[object Uint8Array]",lh="[object Uint8ClampedArray]",dh="[object Uint16Array]",uh="[object Uint32Array]";function hh(e,t,n){var i,a,r,s=e.constructor;switch(t){case th:return Hu(e);case Bu:case Qu:return new s(+e);case nh:return function(e,t){var n=t?Hu(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case ih:case ah:case rh:case sh:case oh:case ch:case lh:case dh:case uh:return qu(e,n);case Yu:return new s;case Gu:case Ju:return new s(e);case Ku:return(r=new(a=e).constructor(a.source,Uu.exec(a))).lastIndex=a.lastIndex,r;case Xu:return new s;case eh:return i=e,Wu?Object(Wu.call(i)):{}}}var mh=Object.create,gh=function(){function e(){}return function(t){if(!Zl(t))return{};if(mh)return mh(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ph(e){return"function"!=typeof e.constructor||Jd(e)?{}:gh(yu(e))}var fh="[object Map]";var _h=Bd&&Bd.isMap,vh=_h?Ud(_h):function(e){return Sd(e)&&Lu(e)==fh},yh="[object Set]";var bh=Bd&&Bd.isSet,wh=bh?Ud(bh):function(e){return Sd(e)&&Lu(e)==yh},xh=1,Ch=2,Mh=4,Sh="[object Arguments]",$h="[object Function]",Eh="[object GeneratorFunction]",kh="[object Object]",Ah={};function Th(e,t,n,i,a,r){var s,o=t&xh,c=t&Ch,l=t&Mh;if(n&&(s=a?n(e,i,a,r):n(e)),void 0!==s)return s;if(!Zl(e))return e;var d=Dd(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Fu.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!o)return mu(e,s)}else{var u=Lu(e),h=u==$h||u==Eh;if(Rd(e))return hu(e,o);if(u==kh||u==Sh||h&&!a){if(s=c||h?{}:ph(e),!o)return c?function(e,t){return Md(e,bu(e),t)}(e,function(e,t){return e&&Md(t,ou(t),e)}(s,e)):function(e,t){return Md(e,_u(e),t)}(e,function(e,t){return e&&Md(t,au(t),e)}(s,e))}else{if(!Ah[u])return a?e:{};s=hh(e,u,o)}}r||(r=new yd);var m=r.get(e);if(m)return m;r.set(e,s),wh(e)?e.forEach((function(i){s.add(Th(i,t,n,i,e,r))})):vh(e)&&e.forEach((function(i,a){s.set(a,Th(i,t,n,a,e,r))}));var g=d?void 0:(l?c?Cu:xu:c?ou:au)(e);return function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););}(g||e,(function(i,a){g&&(i=e[a=i]),Cd(s,a,Th(i,t,n,a,e,r))})),s}Ah[Sh]=Ah["[object Array]"]=Ah["[object ArrayBuffer]"]=Ah["[object DataView]"]=Ah["[object Boolean]"]=Ah["[object Date]"]=Ah["[object Float32Array]"]=Ah["[object Float64Array]"]=Ah["[object Int8Array]"]=Ah["[object Int16Array]"]=Ah["[object Int32Array]"]=Ah["[object Map]"]=Ah["[object Number]"]=Ah[kh]=Ah["[object RegExp]"]=Ah["[object Set]"]=Ah["[object String]"]=Ah["[object Symbol]"]=Ah["[object Uint8Array]"]=Ah["[object Uint8ClampedArray]"]=Ah["[object Uint16Array]"]=Ah["[object Uint32Array]"]=!0,Ah["[object Error]"]=Ah[$h]=Ah["[object WeakMap]"]=!1;var Ih=1,Dh=4;function zh(e){return Th(e,Ih|Dh)}function jh(e,t,n){(void 0!==n&&!El(e[t],n)||void 0===n&&!(t in e))&&wd(e,t,n)}var Oh,Rh=function(e,t,n){for(var i=-1,a=Object(e),r=n(e),s=r.length;s--;){var o=r[Oh?s:++i];if(!1===t(a[o],o,a))break}return e};var Ph="[object Object]",Nh=Function.prototype,Lh=Object.prototype,Fh=Nh.toString,Vh=Lh.hasOwnProperty,Hh=Fh.call(Object);function Uh(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Zh(e,t,n,i,a,r,s){var o=Uh(e,n),c=Uh(t,n),l=s.get(c);if(l)jh(e,n,l);else{var d,u=r?r(o,c,n+"",e,t,s):void 0,h=void 0===u;if(h){var m=Dd(c),g=!m&&Rd(c),p=!m&&!g&&Yd(c);u=c,m||g||p?Dd(o)?u=o:Sd(d=o)&&iu(d)?u=mu(o):g?(h=!1,u=hu(c,!0)):p?(h=!1,u=qu(c,!0)):u=[]:function(e){if(!Sd(e)||Ul(e)!=Ph)return!1;var t=yu(e);if(null===t)return!0;var n=Vh.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Fh.call(n)==Hh}(c)||Id(c)?(u=o,Id(o)?u=function(e){return Md(e,ou(e))}(o):Zl(o)&&!Yl(o)||(u=ph(c))):h=!1}h&&(s.set(c,u),a(u,c,i,r,s),s.delete(c)),jh(e,n,u)}}function Wh(e,t,n,i,a){e!==t&&Rh(t,(function(r,s){if(a||(a=new yd),Zl(r))Zh(e,t,s,n,Wh,i,a);else{var o=i?i(Uh(e,s),r,s+"",e,t,a):void 0;void 0===o&&(o=r),jh(e,s,o)}}),ou)}function qh(e){return e}var Bh=Math.max;var Qh=bd?function(e,t){return bd(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:qh,Yh=800,Gh=16,Kh=Date.now;var Xh,Jh,em,tm=(Xh=Qh,Jh=0,em=0,function(){var e=Kh(),t=Gh-(e-em);if(em=e,t>0){if(++Jh>=Yh)return arguments[0]}else Jh=0;return Xh.apply(void 0,arguments)});function nm(e,t){return tm(function(e,t,n){return t=Bh(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,r=Bh(i.length-t,0),s=Array(r);++a<r;)s[a]=i[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=i[a];return o[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,o)}}(e,t,qh),e+"")}var im,am=(im=function(e,t,n){Wh(e,t,n)},nm((function(e,t){var n=-1,i=t.length,a=i>1?t[i-1]:void 0,r=i>2?t[2]:void 0;for(a=im.length>3&&"function"==typeof a?(i--,a):void 0,r&&function(e,t,n){if(!Zl(n))return!1;var i=typeof t;return!!("number"==i?iu(n)&&Ld(t,n.length):"string"==i&&t in n)&&El(n[t],e)}(t[0],t[1],r)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=t[n];s&&im(e,s,n,a)}return e})));var rm={frigate_card:"Frigate card",frigate_card_description:"A Lovelace card for use with Frigate",live:"Live",no_media:"No media to display",recordings:"Recordings",version:"Version"},sm={cameras:{camera_entity:"Camera Entity",cast:{dashboard:{dashboard_path:"Dashboard path",view_path:"View path"},editor_label:"Cast Options",method:"Cast method",methods:{dashboard:"Dashboard",standard:"Standard"}},dependencies:{all_cameras:"Show events for all cameras with this camera",cameras:"Show events for specific cameras with this camera",editor_label:"Dependency Options"},engines:{editor_label:"Camera engine options"},frigate:{camera_name:"Frigate camera name (Autodetected from entity)",client_id:"Frigate client id (For >1 Frigate server)",editor_label:"Frigate Options",labels:"Frigate labels/object filters",url:"Frigate server URL",zones:"Frigate zones"},go2rtc:{editor_label:"go2rtc Options",modes:{editor_label:"go2rtc Modes",mjpeg:"Motion JPEG (MJPEG)",mp4:"MPEG-4 (MP4)",mse:"Media Source Extensions (MSE)",webrtc:"Web Real-Time Communication (WebRTC)"},stream:"go2rtc stream name"},hide:"Hide camera from UI",icon:"Icon for this camera (Autodetected from entity)",id:"Unique id for this camera in this card",image:{editor_label:"Image Options",refresh_seconds:"Number of seconds after which to refresh live image (0=never)",url:"Image URL to use instead of camera entity snapshot"},live_provider:"Live view provider for this camera",live_provider_options:{editor_label:"Live provider options"},live_providers:{auto:"Automatic",go2rtc:"go2rtc",ha:"Home Assistant video stream (i.e. HLS, LL-HLS, WebRTC via HA)",image:"Home Assistant images",jsmpeg:"JSMpeg","webrtc-card":"WebRTC Card (i.e. AlexxIT's WebRTC Card)"},motioneye:{editor_label:"MotionEye Options",images:{directory_pattern:"Images directory pattern",file_pattern:"Images file pattern"},movies:{directory_pattern:"Movies directory pattern",file_pattern:"Movies file pattern"},url:"MotionEye UI URL"},title:"Title for this camera (Autodetected from entity)",triggers:{editor_label:"Trigger Options",entities:"Trigger from other entities",motion:"Trigger by auto-detecting the motion sensor",occupancy:"Trigger by auto-detecting the occupancy sensor"},webrtc_card:{editor_label:"WebRTC Card Options",entity:"WebRTC Card Camera Entity (Not a Frigate camera)",url:"WebRTC Card Camera URL"}},common:{controls:{builtin:"Built-in video controls",filter:{editor_label:"Media Filter",mode:"Filter mode",modes:{left:"Media filter in a drawer to the left",none:"No media filter",right:"Media filter in a drawer to the right"}},next_previous:{editor_label:"Next & Previous",size:"Next & previous control size in pixels",style:"Next & previous control style",styles:{chevrons:"Chevrons",icons:"Icons",none:"None",thumbnails:"Thumbnails"}},thumbnails:{editor_label:"Thumbnails",events_media_type:"Whether to show event thumbnails of clips or snapshots",events_media_types:{clips:"Clip thumbnails",snapshots:"Snapshot thumbnails"},media_type:"Whether to show thumnails of events or recordings",media_types:{events:"Events",recordings:"Recordings"},mode:"Thumbnails mode",modes:{above:"Thumbnails above",below:"Thumbnails below",left:"Thumbnails in a drawer to the left",none:"No thumbnails",right:"Thumbnails in a drawer to the right"},show_details:"Show details with thumbnails",show_download_control:"Show download control on thumbnails",show_favorite_control:"Show favorite control on thumbnails",show_timeline_control:"Show timeline control on thumbnails",size:"Thumbnails size in pixels"},timeline:{editor_label:"Mini Timeline",mode:"Mode",modes:{above:"Above",below:"Below",none:"None"}},title:{duration_seconds:"Seconds to display popup title (0=forever)",editor_label:"Popup Title Controls",mode:"Popup title display mode",modes:{none:"No title display","popup-bottom-left":"Popup on the bottom left","popup-bottom-right":"Popup on the bottom right","popup-top-left":"Popup on the top left","popup-top-right":"Popup on the top right"}}},display:{editor_label:"Display",grid_columns:"Exact number of grid columns",grid_max_columns:"Maximum number of grid columns",grid_selected_width_factor:"Increase selected media width by this factor",mode:"Mode"},layout:{fit:"Layout fit",fits:{contain:"Media is contained/letterboxed",cover:"Media expands proportionally to cover the card",fill:"Media is stretched to fill the card"},position:{x:"Horizontal placement percentage",y:"Vertical placement percentage"}},media_action_conditions:{all:"All opportunities",hidden:"On browser/tab hiding",microphone_mute:"On microphone mute",microphone_unmute:"On microphone unmute",never:"Never",selected:"On selection",unselected:"On unselection",visible:"On browser/tab visibility"},timeline:{clustering_threshold:"The count of events at which they are clustered (0=no clustering)",events_media_type:"The events media the timeline displays",events_media_types:{all:"All event media types",clips:"Clips",snapshots:"Snapshots"},show_recordings:"Show recordings",style:"Timeline style",styles:{ribbon:"Events on a single ribbon",stack:"Stacked & clustered events"},window_seconds:"The default length of the timeline view in seconds"}},dimensions:{aspect_ratio:"Default aspect ratio (e.g. '16:9')",aspect_ratio_mode:"Aspect ratio mode",aspect_ratio_modes:{dynamic:"Aspect ratio adjusts to media",static:"Static aspect ratio",unconstrained:"Unconstrained aspect ratio"},max_height:"Maximum card height in CSS units (e.g. '100vh')",min_height:"Minimum card height in CSS units (e.g. '100px')"},image:{layout:"Image Layout",mode:"Image view mode",modes:{camera:"Home Assistant camera snapshot of camera entity",screensaver:"Embedded Frigate logo",url:"Arbitrary image specified by URL"},refresh_seconds:"Number of seconds after which to refresh (0=never)",url:"Static image URL for image view",zoomable:"Image can be zoomed/panned"},live:{auto_mute:"Automatically mute live cameras",auto_pause:"Automatically pause live cameras",auto_play:"Automatically play live cameras",auto_unmute:"Automatically unmute live cameras",controls:{editor_label:"Live Controls",ptz:{editor_label:"PTZ",hide_home:"Hide home control",hide_pan_tilt:"Hide pan & tilt control",hide_zoom:"Hide zoom control",mode:"Mode",modes:{auto:"Automatic",off:"Off",on:"On"},orientation:"Orientation",orientations:{horizontal:"Horizontal",vertical:"Vertical"},position:"Position",positions:{"bottom-left":"Bottom left","bottom-right":"Bottom right","top-left":"Top left","top-right":"Top right"}}},draggable:"Live cameras view can be dragged/swiped",layout:"Live Layout",lazy_load:"Live cameras are lazily loaded",lazy_unload:"Live cameras are lazily unloaded",microphone:{always_connected:"Always keep the microphone connected",disconnect_seconds:"Seconds after which to disconnect microphone (0=never)",editor_label:"Microphone",enabled:"Microphone enabled",mute_after_microphone_mute_seconds:"Seconds after microphone mute to mute inbound audio"},preload:"Preload live view in the background",show_image_during_load:"Show still image while the live stream is loading",transition_effect:"Live camera transition effect",zoomable:"Live cameras can be zoomed/panned"},media_viewer:{auto_mute:"Automatically mute media",auto_pause:"Automatically pause media",auto_play:"Automatically play media",auto_unmute:"Automatically unmute media",controls:{editor_label:"Media Viewer Controls"},draggable:"Media Viewer can be dragged/swiped",layout:"Media Viewer Layout",lazy_load:"Media Viewer media is lazily loaded in carousel",snapshot_click_plays_clip:"Clicking on a snapshot plays a related clip",transition_effect:"Media Viewer transition effect",transition_effects:{none:"No transition",slide:"Slide transition"},zoomable:"Media Viewer can be zoomed/panned"},menu:{alignment:"Menu alignment",alignments:{bottom:"Aligned to the bottom",left:"Aligned to the left",right:"Aligned to the right",top:"Aligned to the top"},button_size:"Menu button size in pixels",buttons:{alignment:"Button alignment",alignments:{matching:"Matching the menu alignment",opposing:"Opposing the menu alignment"},camera_ui:"Camera user interface",cameras:"Cameras",clips:"Clips",display_mode:"Display mode",download:"Download",enabled:"Button enabled",expand:"Expand",frigate:"Frigate menu / Default view",fullscreen:"Fullscreen",icon:"Icon",image:"Image",live:"Live",media_player:"Send to media player",microphone:"Microphone",mute:"Mute / Unmute",play:"Play / Pause",priority:"Priority",ptz:"Show PTZ controls",recordings:"Recordings",screenshot:"Screenshot",snapshots:"Snapshots",substreams:"Substream(s)",timeline:"Timeline",type:"Button type",types:{momentary:"Momentary",toggle:"Toggle"}},position:"Menu position",positions:{bottom:"Positioned on the bottom",left:"Positioned on the left",right:"Positioned on the right",top:"Positioned on the top"},style:"Menu style",styles:{hidden:"Hidden menu",hover:"Hover menu","hover-card":"Hover menu (card-wide)",none:"No menu",outside:"Outside menu",overlay:"Overlay menu"}},overrides:{info:"This card configuration has manually specified overrides configured which may override values shown in the visual editor, please consult the code editor to view/modify these overrides"},performance:{features:{animated_progress_indicator:"Animated Progress Indicator",editor_label:"Feature Options",media_chunk_size:"Media chunk size"},profile:"Performance profile",profiles:{high:"High/full performance",low:"Low performance"},style:{border_radius:"Curves",box_shadow:"Shadows",editor_label:"Style Options"},warning:"This card is in low profile mode so defaults have changed to optimize performance"},view:{camera_select:"View for newly selected cameras",dark_mode:"Dark mode",dark_modes:{auto:"Auto",off:"Off",on:"On"},default:"Default view",interaction_seconds:"Seconds after user action to remain interacted with (0=never)",reset_after_interaction:"Reset to the default view after user interaction",scan:{actions:{editor_label:"Scan mode actions",interaction_mode:"How to handle actions when the card has human interaction",interaction_modes:{active:"Only trigger actions when card has human interaction",all:"Trigger actions regardless of human interaction",inactive:"Only trigger actions when card has no human interaction"},trigger:"Trigger action",triggers:{live:"Change to live",none:"No action"},untrigger:"Untrigger action",untriggers:{default:"Change to default view/camera",none:"No action"}},editor_label:"Scan mode",enabled:"Scan mode enabled",filter_selected_camera:"Only trigger on selected camera",show_trigger_status:"Show pulsing border when triggered",untrigger_seconds:"Seconds after inactive state change to untrigger"},update_cycle_camera:"Cycle through cameras when default view updates",update_force:"Force card updates (ignore user interaction)",update_seconds:"Refresh default view every X seconds (0=never)",views:{clip:"Most recent clip",clips:"Clips gallery",current:"Current view",image:"Static image",live:"Live view",recording:"Most recent recording",recordings:"Recordings gallery",snapshot:"Most recent snapshot",snapshots:"Snapshots gallery",timeline:"Timeline view"}}},om={grid:"Show media viewer for each camera in a grid",single:"Show single media viewer"},cm={add_new_camera:"Add new camera",button:"Button",camera:"Camera",cameras:"Cameras",cameras_secondary:"What cameras to render on this card",delete:"Delete",dimensions:"Dimensions",dimensions_secondary:"Dimensions & shape options",image:"Image",image_secondary:"Static image view options",live:"Live",live_secondary:"Live camera view options",media_gallery:"Media gallery",media_gallery_secondary:"Media gallery options",media_viewer:"Media viewer",media_viewer_secondary:"Viewer for static media (clips, snapshots or recordings)",menu:"Menu",menu_secondary:"Menu look & feel options",move_down:"Move down",move_up:"Move up",overrides:"Overrides are active",overrides_secondary:"Dynamic configuration overrides detected",performance:"Performance",performance_secondary:"Card performance options",timeline:"Timeline",timeline_secondary:"Event timeline options",upgrade:"Upgrade",upgrade_available:"An automatic card configuration upgrade is available",view:"View",view_secondary:"What the card should show and how to show it"},lm={ptz:{down:"Down",home:"Home",left:"Left",right:"Right",up:"Up",zoom_in:"Zoom In",zoom_out:"Zoom Out"}},dm={awaiting_live:"Waiting for live stream to load ...",could_not_render_elements:"Could not render picture elements",could_not_resolve:"Could not resolve media URL",diagnostics:"Card diagnostics. Please review for confidential information prior to sharing",download_no_media:"No media to download",download_sign_failed:"Could not sign media URL for download",duplicate_camera_id:"Duplicate Frigate camera id for the following camera, use the 'id' parameter to uniquely identify cameras",empty_response:"Received empty response from Home Assistant for request",failed_response:"Failed to receive response from Home Assistant for request",failed_retain:"Could not retain event",failed_sign:"Could not sign Home Assistant URL",image_load_error:"The image could not be loaded",invalid_configuration:"Invalid configuration",invalid_configuration_no_hint:"No location hint available (bad or missing type?)",invalid_elements_config:"Invalid picture elements configuration",invalid_response:"Received invalid response from Home Assistant for request",jsmpeg_no_player:"Could not start JSMPEG player",live_camera_no_endpoint:"Could not get camera endpoint for this live provider (incomplete configuration?)",live_camera_not_found:"The configured camera_entity was not found",live_camera_unavailable:"Camera unavailable",no_camera_engine:"Could not determine suitable engine for camera",no_camera_entity:"Could not find camera entity",no_camera_entity_for_triggers:"A camera entity is required in order to autodetect triggers",no_camera_id:"Could not determine camera id for the following camera, may need to set 'id' parameter manually",no_camera_name:"Could not determine a Frigate camera name for camera (or one of its dependents), please specify either 'camera_entity' or 'camera_name'",no_dashboard_or_view:"Both 'dashboard_path' and 'view_path' parameters are required for the 'dashboard' cast method",no_live_camera:"The camera_entity parameter must be set and valid for this live provider",no_visible_cameras:"No visible cameras found, you must configure at least one non-hidden camera",reconnecting:"Reconnecting",timeline_no_cameras:"No Frigate cameras to show in timeline",too_many_automations:"Too many nested automation calls, please check your configuration for loops",troubleshooting:"Check troubleshooting",unknown:"Unknown error",upgrade_available:"An automated card configuration upgrade is available, please visit the visual card editor",webrtc_card_reported_error:"WebRTC Card reported an error",webrtc_card_waiting:"Waiting for WebRTC Card to load ..."},um={camera:"Camera",duration:"Duration",in_progress:"In Progress",score:"Score",seek:"Seek",start:"Start",tag:"Tag",what:"What",where:"Where"},hm={all:"All",camera:"Camera",favorite:"Favorite",media_type:"Media Type",media_types:{clips:"Clips",recordings:"Recordings",snapshots:"Snapshots"},not_favorite:"Not Favorite",select_camera:"Select camera...",select_favorite:"Select favorite...",select_media_type:"Select media type...",select_tag:"Select tag...",select_what:"Select what...",select_when:"Select when...",select_where:"Select where...",tag:"Tag",what:"What",when:"When",whens:{custom:"Custom",past_month:"Past Month",past_week:"Past Week",today:"Today",yesterday:"Yesterday"},where:"Where"},mm={unseekable:"Seek time not found in media"},gm={camera:"Camera",duration:"Duration",events:"Events",in_progress:"In Progress",seek:"Seek",start:"Start"},pm={download:"Download media",no_thumbnail:"No thumbnail available",retain_indefinitely:"Media will be indefinitely retained",timeline:"See media in timeline"},fm={pan_behavior:{pan:"Pan",seek:"Pan seeks across all media","seek-in-camera":"Pan seeks within selected camera only","seek-in-media":"Pan seeks within selected media item only"},select_date:"Choose date"},_m={common:rm,config:sm,display_modes:om,editor:cm,elements:lm,error:dm,event:um,media_filter:hm,media_viewer:mm,recording:gm,thumbnail:pm,timeline:fm};const vm="en",ym={[vm]:Object.freeze({__proto__:null,common:rm,config:sm,display_modes:om,editor:cm,elements:lm,error:dm,event:um,media_filter:hm,media_viewer:mm,recording:gm,thumbnail:pm,timeline:fm,default:_m})};let bm;function wm(e){const t=e=>e.replace("-","_"),n=e?.language??e?.selectedLanguage;if(n)return t(n);const i=localStorage.getItem("selectedLanguage");if(i){const e=JSON.parse(i);if(e)return t(e)}for(const e of navigator.languages){const n=t(e);if(n&&n in ym)return n}return vm}function xm(e,t="",n=""){let i="";try{i=e.split(".").reduce(((e,t)=>e[t]),ym[bm??vm])}catch(e){}return i||(i=e.split(".").reduce(((e,t)=>e[t]),ym[vm])),""!==t&&""!==n&&(i=i.replace(t,n)),i}var Cm=6e4,Mm=36e5,Sm=1e3;function $m(e,t){return bl(2,arguments),xl(e).getTime()-xl(t).getTime()}var Em={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},km="trunc";function Am(e){return e?Em[e]:Em[km]}function Tm(e,t,n){bl(2,arguments);var i=$m(e,t)/1e3;return Am(null==n?void 0:n.roundingMethod)(i)}function Im(e){return Im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(e)}function Dm(e){if(bl(1,arguments),!function(e){return bl(1,arguments),e instanceof Date||"object"===Im(e)&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e)return!1;var t=xl(e);return!isNaN(Number(t))}function zm(e,t){return bl(2,arguments),function(e,t){bl(2,arguments);var n=xl(e).getTime(),i=yl(t);return new Date(n+i)}(e,-yl(t))}var jm=864e5;function Om(e){bl(1,arguments);var t=xl(e),n=t.getUTCDay(),i=(n<1?7:0)+n-1;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function Rm(e){bl(1,arguments);var t=xl(e),n=t.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(n+1,0,4),i.setUTCHours(0,0,0,0);var a=Om(i),r=new Date(0);r.setUTCFullYear(n,0,4),r.setUTCHours(0,0,0,0);var s=Om(r);return t.getTime()>=a.getTime()?n+1:t.getTime()>=s.getTime()?n:n-1}var Pm=6048e5;function Nm(e){bl(1,arguments);var t=xl(e),n=Om(t).getTime()-function(e){bl(1,arguments);var t=Rm(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),Om(n)}(t).getTime();return Math.round(n/Pm)+1}var Lm={};function Fm(){return Lm}function Vm(e,t){var n,i,a,r,s,o,c,l;bl(1,arguments);var d=Fm(),u=yl(null!==(n=null!==(i=null!==(a=null!==(r=null==t?void 0:t.weekStartsOn)&&void 0!==r?r:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.weekStartsOn)&&void 0!==a?a:d.weekStartsOn)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=xl(e),m=h.getUTCDay(),g=(m<u?7:0)+m-u;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function Hm(e,t){var n,i,a,r,s,o,c,l;bl(1,arguments);var d=xl(e),u=d.getUTCFullYear(),h=Fm(),m=yl(null!==(n=null!==(i=null!==(a=null!==(r=null==t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:h.firstWeekContainsDate)&&void 0!==i?i:null===(c=h.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(u+1,0,m),g.setUTCHours(0,0,0,0);var p=Vm(g,t),f=new Date(0);f.setUTCFullYear(u,0,m),f.setUTCHours(0,0,0,0);var _=Vm(f,t);return d.getTime()>=p.getTime()?u+1:d.getTime()>=_.getTime()?u:u-1}var Um=6048e5;function Zm(e,t){bl(1,arguments);var n=xl(e),i=Vm(n,t).getTime()-function(e,t){var n,i,a,r,s,o,c,l;bl(1,arguments);var d=Fm(),u=yl(null!==(n=null!==(i=null!==(a=null!==(r=null==t?void 0:t.firstWeekContainsDate)&&void 0!==r?r:null==t||null===(s=t.locale)||void 0===s||null===(o=s.options)||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==a?a:d.firstWeekContainsDate)&&void 0!==i?i:null===(c=d.locale)||void 0===c||null===(l=c.options)||void 0===l?void 0:l.firstWeekContainsDate)&&void 0!==n?n:1),h=Hm(e,t),m=new Date(0);return m.setUTCFullYear(h,0,u),m.setUTCHours(0,0,0,0),Vm(m,t)}(n,t).getTime();return Math.round(i/Um)+1}function Wm(e,t){for(var n=e<0?"-":"",i=Math.abs(e).toString();i.length<t;)i="0"+i;return n+i}var qm=function(e,t){var n=e.getUTCFullYear(),i=n>0?n:1-n;return Wm("yy"===t?i%100:i,t.length)},Bm=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):Wm(n+1,2)},Qm=function(e,t){return Wm(e.getUTCDate(),t.length)},Ym=function(e,t){return Wm(e.getUTCHours()%12||12,t.length)},Gm=function(e,t){return Wm(e.getUTCHours(),t.length)},Km=function(e,t){return Wm(e.getUTCMinutes(),t.length)},Xm=function(e,t){return Wm(e.getUTCSeconds(),t.length)},Jm=function(e,t){var n=t.length,i=e.getUTCMilliseconds();return Wm(Math.floor(i*Math.pow(10,n-3)),t.length)},eg="midnight",tg="noon",ng="morning",ig="afternoon",ag="evening",rg="night",sg={G:function(e,t,n){var i=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});default:return n.era(i,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear(),a=i>0?i:1-i;return n.ordinalNumber(a,{unit:"year"})}return qm(e,t)},Y:function(e,t,n,i){var a=Hm(e,i),r=a>0?a:1-a;return"YY"===t?Wm(r%100,2):"Yo"===t?n.ordinalNumber(r,{unit:"year"}):Wm(r,t.length)},R:function(e,t){return Wm(Rm(e),t.length)},u:function(e,t){return Wm(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return Wm(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,t,n){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return Wm(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return Bm(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var i=e.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return Wm(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(e,t,n,i){var a=Zm(e,i);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):Wm(a,t.length)},I:function(e,t,n){var i=Nm(e);return"Io"===t?n.ordinalNumber(i,{unit:"week"}):Wm(i,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):Qm(e,t)},D:function(e,t,n){var i=function(e){bl(1,arguments);var t=xl(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var i=n-t.getTime();return Math.floor(i/jm)+1}(e);return"Do"===t?n.ordinalNumber(i,{unit:"dayOfYear"}):Wm(i,t.length)},E:function(e,t,n){var i=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(e,t,n,i){var a=e.getUTCDay(),r=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return Wm(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,i){var a=e.getUTCDay(),r=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return Wm(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var i=e.getUTCDay(),a=0===i?7:i;switch(t){case"i":return String(a);case"ii":return Wm(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(e,t,n){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){var i,a=e.getUTCHours();switch(i=12===a?tg:0===a?eg:a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){var i,a=e.getUTCHours();switch(i=a>=17?ag:a>=12?ig:a>=4?ng:rg,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Ym(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Gm(e,t)},K:function(e,t,n){var i=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(i,{unit:"hour"}):Wm(i,t.length)},k:function(e,t,n){var i=e.getUTCHours();return 0===i&&(i=24),"ko"===t?n.ordinalNumber(i,{unit:"hour"}):Wm(i,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Km(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Xm(e,t)},S:function(e,t){return Jm(e,t)},X:function(e,t,n,i){var a=(i._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return cg(a);case"XXXX":case"XX":return lg(a);default:return lg(a,":")}},x:function(e,t,n,i){var a=(i._originalDate||e).getTimezoneOffset();switch(t){case"x":return cg(a);case"xxxx":case"xx":return lg(a);default:return lg(a,":")}},O:function(e,t,n,i){var a=(i._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+og(a,":");default:return"GMT"+lg(a,":")}},z:function(e,t,n,i){var a=(i._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+og(a,":");default:return"GMT"+lg(a,":")}},t:function(e,t,n,i){var a=i._originalDate||e;return Wm(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,i){return Wm((i._originalDate||e).getTime(),t.length)}};function og(e,t){var n=e>0?"-":"+",i=Math.abs(e),a=Math.floor(i/60),r=i%60;if(0===r)return n+String(a);var s=t||"";return n+String(a)+s+Wm(r,2)}function cg(e,t){return e%60==0?(e>0?"-":"+")+Wm(Math.abs(e)/60,2):lg(e,t)}function lg(e,t){var n=t||"",i=e>0?"-":"+",a=Math.abs(e);return i+Wm(Math.floor(a/60),2)+n+Wm(a%60,2)}var dg=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},ug=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},hg={p:ug,P:function(e,t){var n,i=e.match(/(P+)(p+)?/)||[],a=i[1],r=i[2];if(!r)return dg(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",dg(a,t)).replace("{{time}}",ug(r,t))}};function mg(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var gg=["D","DD"],pg=["YY","YYYY"];function fg(e){return-1!==gg.indexOf(e)}function _g(e){return-1!==pg.indexOf(e)}function vg(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var yg={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function bg(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var wg={date:bg({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:bg({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:bg({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},xg={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Cg(e){return function(t,n){var i;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,r=null!=n&&n.width?String(n.width):a;i=e.formattingValues[r]||e.formattingValues[a]}else{var s=e.defaultWidth,o=null!=n&&n.width?String(n.width):e.defaultWidth;i=e.values[o]||e.values[s]}return i[e.argumentCallback?e.argumentCallback(t):t]}}function Mg(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.width,a=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],r=t.match(a);if(!r)return null;var s,o=r[0],c=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return}(c,(function(e){return e.test(o)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n;return}(c,(function(e){return e.test(o)}));return s=e.valueCallback?e.valueCallback(l):l,{value:s=n.valueCallback?n.valueCallback(s):s,rest:t.slice(o.length)}}}var Sg,$g={code:"en-US",formatDistance:function(e,t,n){var i,a=yg[e];return i="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i},formatLong:wg,formatRelative:function(e,t,n,i){return xg[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Cg({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Cg({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Cg({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Cg({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Cg({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Sg={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(Sg.matchPattern);if(!n)return null;var i=n[0],a=e.match(Sg.parsePattern);if(!a)return null;var r=Sg.valueCallback?Sg.valueCallback(a[0]):a[0];return{value:r=t.valueCallback?t.valueCallback(r):r,rest:e.slice(i.length)}}),era:Mg({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Mg({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Mg({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Mg({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Mg({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},Eg=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kg=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ag=/^'([^]*?)'?$/,Tg=/''/g,Ig=/[a-zA-Z]/;function Dg(e,t,n){var i,a,r,s,o,c,l,d,u,h,m,g,p,f,_,v,y,b;bl(2,arguments);var w=String(t),x=Fm(),C=null!==(i=null!==(a=null==n?void 0:n.locale)&&void 0!==a?a:x.locale)&&void 0!==i?i:$g,M=yl(null!==(r=null!==(s=null!==(o=null!==(c=null==n?void 0:n.firstWeekContainsDate)&&void 0!==c?c:null==n||null===(l=n.locale)||void 0===l||null===(d=l.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==o?o:x.firstWeekContainsDate)&&void 0!==s?s:null===(u=x.locale)||void 0===u||null===(h=u.options)||void 0===h?void 0:h.firstWeekContainsDate)&&void 0!==r?r:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=yl(null!==(m=null!==(g=null!==(p=null!==(f=null==n?void 0:n.weekStartsOn)&&void 0!==f?f:null==n||null===(_=n.locale)||void 0===_||null===(v=_.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==p?p:x.weekStartsOn)&&void 0!==g?g:null===(y=x.locale)||void 0===y||null===(b=y.options)||void 0===b?void 0:b.weekStartsOn)&&void 0!==m?m:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!C.localize)throw new RangeError("locale must contain localize property");if(!C.formatLong)throw new RangeError("locale must contain formatLong property");var $=xl(e);if(!Dm($))throw new RangeError("Invalid time value");var E=zm($,mg($)),k={firstWeekContainsDate:M,weekStartsOn:S,locale:C,_originalDate:$};return w.match(kg).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,hg[t])(e,C.formatLong):e})).join("").match(Eg).map((function(i){if("''"===i)return"'";var a=i[0];if("'"===a)return function(e){var t=e.match(Ag);if(!t)return e;return t[1].replace(Tg,"'")}(i);var r=sg[a];if(r)return null!=n&&n.useAdditionalWeekYearTokens||!_g(i)||vg(i,t,String(e)),null!=n&&n.useAdditionalDayOfYearTokens||!fg(i)||vg(i,t,String(e)),r(E,i,C.localize,k);if(a.match(Ig))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");return i})).join("")}var zg="__lodash_hash_undefined__";function jg(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new _d;++t<n;)this.add(e[t])}function Og(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function Rg(e,t){return e.has(t)}jg.prototype.add=jg.prototype.push=function(e){return this.__data__.set(e,zg),this},jg.prototype.has=function(e){return this.__data__.has(e)};var Pg=1,Ng=2;function Lg(e,t,n,i,a,r){var s=n&Pg,o=e.length,c=t.length;if(o!=c&&!(s&&c>o))return!1;var l=r.get(e),d=r.get(t);if(l&&d)return l==t&&d==e;var u=-1,h=!0,m=n&Ng?new jg:void 0;for(r.set(e,t),r.set(t,e);++u<o;){var g=e[u],p=t[u];if(i)var f=s?i(p,g,u,t,e,r):i(g,p,u,e,t,r);if(void 0!==f){if(f)continue;h=!1;break}if(m){if(!Og(t,(function(e,t){if(!Rg(m,t)&&(g===e||a(g,e,n,i,r)))return m.push(t)}))){h=!1;break}}else if(g!==p&&!a(g,p,n,i,r)){h=!1;break}}return r.delete(e),r.delete(t),h}function Fg(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function Vg(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var Hg=1,Ug=2,Zg="[object Boolean]",Wg="[object Date]",qg="[object Error]",Bg="[object Map]",Qg="[object Number]",Yg="[object RegExp]",Gg="[object Set]",Kg="[object String]",Xg="[object Symbol]",Jg="[object ArrayBuffer]",ep="[object DataView]",tp=jl?jl.prototype:void 0,np=tp?tp.valueOf:void 0;var ip=1,ap=Object.prototype.hasOwnProperty;var rp=1,sp="[object Arguments]",op="[object Array]",cp="[object Object]",lp=Object.prototype.hasOwnProperty;function dp(e,t,n,i,a,r){var s=Dd(e),o=Dd(t),c=s?op:Lu(e),l=o?op:Lu(t),d=(c=c==sp?cp:c)==cp,u=(l=l==sp?cp:l)==cp,h=c==l;if(h&&Rd(e)){if(!Rd(t))return!1;s=!0,d=!1}if(h&&!d)return r||(r=new yd),s||Yd(e)?Lg(e,t,n,i,a,r):function(e,t,n,i,a,r,s){switch(n){case ep:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Jg:return!(e.byteLength!=t.byteLength||!r(new Vu(e),new Vu(t)));case Zg:case Wg:case Qg:return El(+e,+t);case qg:return e.name==t.name&&e.message==t.message;case Yg:case Kg:return e==t+"";case Bg:var o=Fg;case Gg:var c=i&Hg;if(o||(o=Vg),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;i|=Ug,s.set(e,t);var d=Lg(o(e),o(t),i,a,r,s);return s.delete(e),d;case Xg:if(np)return np.call(e)==np.call(t)}return!1}(e,t,c,n,i,a,r);if(!(n&rp)){var m=d&&lp.call(e,"__wrapped__"),g=u&&lp.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,f=g?t.value():t;return r||(r=new yd),a(p,f,n,i,r)}}return!!h&&(r||(r=new yd),function(e,t,n,i,a,r){var s=n&ip,o=xu(e),c=o.length;if(c!=xu(t).length&&!s)return!1;for(var l=c;l--;){var d=o[l];if(!(s?d in t:ap.call(t,d)))return!1}var u=r.get(e),h=r.get(t);if(u&&h)return u==t&&h==e;var m=!0;r.set(e,t),r.set(t,e);for(var g=s;++l<c;){var p=e[d=o[l]],f=t[d];if(i)var _=s?i(f,p,d,t,e,r):i(p,f,d,e,t,r);if(!(void 0===_?p===f||a(p,f,n,i,r):_)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var v=e.constructor,y=t.constructor;v==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y||(m=!1)}return r.delete(e),r.delete(t),m}(e,t,n,i,a,r))}function up(e,t,n,i,a){return e===t||(null==e||null==t||!Sd(e)&&!Sd(t)?e!=e&&t!=t:dp(e,t,n,i,up,a))}function hp(e,t){return up(e,t)}class mp extends Error{constructor(e,t){super(e),this.context=t}}const gp={info:10,error:20,connection:30,diagnostics:40},pp=li.object({url:li.string(),mime_type:li.string()}),fp=li.object({path:li.string()});function _p(e,t,n){e.dispatchEvent(new CustomEvent(`frigate-card:${t}`,{bubbles:!0,composed:!0,detail:n}))}function vp(e){if(!e)return;return e.split(/[_\s]+/).map((e=>e[0].toUpperCase()+e.substring(1))).join(" ")}function yp(e,t,n){const i=e[t];return e.splice(t,1),e.splice(n,0,i),e}const bp=e=>Array.isArray(e)?e:[e],wp=e=>e instanceof Set?e:new Set(bp(e));function xp(e,t){return!hp(e,t)}function Cp(e,t=console.warn){e instanceof mp&&e.context?t(e,e.context):t(e)}const Mp=()=>window.matchMedia("(hover: hover) and (pointer: fine)").matches,Sp=(e,t)=>Dg(e,"yyyy-MM-dd HH:mm"+(t?":ss":"")),$p=e=>Dg(e,"yyyy-MM-dd"),Ep=(e,t)=>{window.requestIdleCallback?window.requestIdleCallback(e,{...t&&{timeout:t}}):e()};function kp(e,t){const n=function(e,t,n){bl(2,arguments);var i=$m(e,t)/Mm;return Am(null==n?void 0:n.roundingMethod)(i)}(t,e),i=function(e,t,n){bl(2,arguments);var i=$m(e,t)/Cm;return Am(null==n?void 0:n.roundingMethod)(i)}(t,e)-60*n;let a="";return n&&(a+=`${n}h `),i&&(a+=`${i}m `),a+=`${Tm(t,e)-60*n*60-60*i}s`,a}const Ap=async(e,t)=>await Promise.all(Array.from(e).map((e=>t(e)))),Tp=e=>new Date(`${e}T00:00:00`),Ip=async e=>{await new Promise((t=>setTimeout(t,1e3*e)))},Dp=e=>!isNaN(e.getTime()),zp=(e,t,n,i)=>{t?e.setAttribute(n,i??""):e.removeAttribute(n)},jp=e=>!!e,Op=e=>e instanceof HTMLElement,Rp=e=>(e instanceof HTMLSlotElement?e.assignedElements({flatten:!0}):[...e.children]).filter(Op);function Pp(e){return"string"==typeof e?.id&&e.id||"string"==typeof e?.camera_entity&&e.camera_entity||"object"==typeof e?.webrtc_card&&e.webrtc_card&&("string"==typeof e.webrtc_card.entity&&e.webrtc_card.entity||"string"==typeof e.webrtc_card.url&&e.webrtc_card.url)||"object"==typeof e?.go2rtc&&e.go2rtc&&"string"==typeof e.go2rtc.url&&"string"==typeof e.go2rtc.stream&&`${e.go2rtc.url}#${e.go2rtc.stream}`||"object"==typeof e?.frigate&&e.frigate&&"string"==typeof e?.frigate.camera_name&&e.frigate.camera_name||""}const Np=(e,...t)=>{e?.debug?.logging&&console.debug(...t)},Lp=(e,t)=>0!=((e.attributes.supported_features??0)&t),Fp=e=>(e=>Lp(e,4)&&"number"==typeof e.attributes.in_progress)(e)||!!e.attributes.in_progress,Vp=e=>{switch(e){case"armed_away":return"mdi:shield-lock";case"armed_vacation":return"mdi:shield-airplane";case"armed_home":return"mdi:shield-home";case"armed_night":return"mdi:shield-moon";case"armed_custom_bypass":return"mdi:security";case"pending":case"arming":return"mdi:shield-sync";case"triggered":return"mdi:bell-ring";case"disarmed":return"mdi:shield-off";default:return"mdi:shield"}},Hp=(e,t)=>{const n="off"===e;switch(t?.attributes.device_class){case"battery":return n?"mdi:battery":"mdi:battery-outline";case"battery_charging":return n?"mdi:battery":"mdi:battery-charging";case"cold":return n?"mdi:thermometer":"mdi:snowflake";case"connectivity":return n?"mdi:close-network-outline":"mdi:check-network-outline";case"door":return n?"mdi:door-closed":"mdi:door-open";case"garage_door":return n?"mdi:garage":"mdi:garage-open";case"power":case"plug":return n?"mdi:power-plug-off":"mdi:power-plug";case"gas":case"problem":case"safety":case"tamper":return n?"mdi:check-circle":"mdi:alert-circle";case"smoke":return n?"mdi:check-circle":"mdi:smoke";case"heat":return n?"mdi:thermometer":"mdi:fire";case"light":return n?"mdi:brightness5":"mdi:brightness-7";case"lock":return n?"mdi:lock":"mdi:lock-open";case"moisture":return n?"mdi:water-off":"mdi:water";case"motion":return n?"mdi:motion-sensor-off":"mdi:motion-sensor";case"occupancy":case"presence":return n?"mdi:home-outline":"mdi:home";case"opening":return n?"mdi:square":"mdi:square-outline";case"running":return n?"mdi:stop":"mdi:play";case"sound":return n?"mdi:music-note-off":"mdi:music-note";case"update":return n?"mdi:package":"mdi:package-up";case"vibration":return n?"mdi:crop-portrait":"mdi:vibrate";case"window":return n?"mdi:window-closed":"mdi:window-open";default:return n?"mdi:radiobox-blank":"mdi:checkbox-marked-circle"}},Up=(e,t)=>{const n="closed"!==e;switch(t?.attributes.device_class){case"garage":switch(e){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:garage";default:return"mdi:garage-open"}case"gate":switch(e){case"opening":case"closing":return"mdi:gate-arrow-right";case"closed":return"mdi:gate";default:return"mdi:gate-open"}case"door":return n?"mdi:door-open":"mdi:door-closed";case"damper":return n?"md:circle":"mdi:circle-slice-8";case"shutter":switch(e){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:window-shutter";default:return"mdi:window-shutter-open"}case"curtain":switch(e){case"opening":return"mdi:arrow-split-vertical";case"closing":return"mdi:arrow-collapse-horizontal";case"closed":return"mdi:curtains-closed";default:return"mdi:curtains"}case"blind":case"shade":switch(e){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:blinds";default:return"mdi:blinds-open"}case"window":switch(e){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:window-closed";default:return"mdi:window-open"}}switch(e){case"opening":return"mdi:arrow-up-box";case"closing":return"mdi:arrow-down-box";case"closed":return"mdi:window-closed";default:return"mdi:window-open"}},Zp={apparent_power:"mdi:flash",aqi:"mdi:air-filter",carbon_dioxide:"mdi:molecule-co2",carbon_monoxide:"mdi:molecule-co",current:"mdi:current-ac",date:"mdi:calendar",energy:"mdi:lightning-bolt",frequency:"mdi:sine-wave",gas:"mdi:gas-cylinder",humidity:"mdi:water-percent",illuminance:"mdi:brightness-5",monetary:"mdi:cash",nitrogen_dioxide:"mdi:molecule",nitrogen_monoxide:"mdi:molecule",nitrous_oxide:"mdi:molecule",ozone:"mdi:molecule",pm1:"mdi:molecule",pm10:"mdi:molecule",pm25:"mdi:molecule",power:"mdi:flash",power_factor:"mdi:angle-acute",pressure:"mdi:gauge",reactive_power:"mdi:flash",signal_strength:"mdi:wifi",sulphur_dioxide:"mdi:molecule",temperature:"mdi:thermometer",timestamp:"mdi:clock",volatile_organic_compounds:"mdi:molecule",voltage:"mdi:sine-wave"},Wp={10:"mdi:battery-10",20:"mdi:battery-20",30:"mdi:battery-30",40:"mdi:battery-40",50:"mdi:battery-50",60:"mdi:battery-60",70:"mdi:battery-70",80:"mdi:battery-80",90:"mdi:battery-90",100:"mdi:battery"},qp={10:"mdi:battery-charging-10",20:"mdi:battery-charging-20",30:"mdi:battery-charging-30",40:"mdi:battery-charging-40",50:"mdi:battery-charging-50",60:"mdi:battery-charging-60",70:"mdi:battery-charging-70",80:"mdi:battery-charging-80",90:"mdi:battery-charging-90",100:"mdi:battery-charging"},Bp=(e,t)=>{const n=Number(e);if(isNaN(n))return"off"===e?"mdi:battery":"on"===e?"mdi:battery-alert":"mdi:battery-unknown";const i=10*Math.round(n/10);return t&&n>=10?qp[i]:t?"mdi:battery-charging-outline":n<=5?"mdi:battery-alert-variant-outline":Wp[i]},Qp=e=>{const t=e?.attributes.device_class;if(t&&t in Zp)return Zp[t];if("battery"===t)return e?((e,t)=>{const n=e.state;return Bp(n,"on"===t?.state)})(e):"mdi:battery";const n=e?.attributes.unit_of_measurement;return"°C"===n||"°F"===n?"mdi:thermometer":void 0},Yp="mdi:bookmark",Gp={alert:"mdi:alert",air_quality:"mdi:air-filter",automation:"mdi:robot",calendar:"mdi:calendar",camera:"mdi:video",climate:"mdi:thermostat",configurator:"mdi:cog",conversation:"mdi:text-to-speech",counter:"mdi:counter",fan:"mdi:fan",google_assistant:"mdi:google-assistant",group:"mdi:google-circles-communities",homeassistant:"mdi:home-assistant",homekit:"mdi:home-automation",image_processing:"mdi:image-filter-frames",input_button:"mdi:gesture-tap-button",input_datetime:"mdi:calendar-clock",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:form-textbox",light:"mdi:lightbulb",mailbox:"mdi:mailbox",notify:"mdi:comment-alert",number:"mdi:ray-vertex",persistent_notification:"mdi:bell",person:"mdi:account",plant:"mdi:flower",proximity:"mdi:apple-safari",remote:"mdi:remote",scene:"mdi:palette",script:"mdi:script-text",select:"mdi:format-list-bulleted",sensor:"mdi:eye",siren:"mdi:bullhorn",simple_alarm:"mdi:bell",sun:"mdi:white-balance-sunny",timer:"mdi:timer-outline",updater:"mdi:cloud-upload",vacuum:"mdi:robot-vacuum",water_heater:"mdi:thermometer",weather:"mdi:weather-cloudy",zone:"mdi:map-marker-radius"};function Kp(e,t,n,i){switch(e){case"alarm_control_panel":return Vp(n);case"binary_sensor":return Hp(n,t);case"button":switch(t?.attributes.device_class){case"restart":return"mdi:restart";case"update":return"mdi:package-up";default:return"mdi:gesture-tap-button"}case"cover":return Up(n,t);case"device_tracker":return"router"===t?.attributes.source_type?"home"===n?"mdi:lan-connect":"mdi:lan-disconnect":["bluetooth","bluetooth_le"].includes(t?.attributes.source_type)?"home"===n?"mdi:bluetooth-connect":"mdi:bluetooth":"not_home"===n?"mdi:account-arrow-right":"mdi:account";case"humidifier":return n&&"off"===n?"mdi:air-humidifier-off":"mdi:air-humidifier";case"input_boolean":return"on"===n?"mdi:check-circle-outline":"mdi:close-circle-outline";case"lock":switch(n){case"unlocked":return"mdi:lock-open";case"jammed":return"mdi:lock-alert";case"locking":case"unlocking":return"mdi:lock-clock";default:return"mdi:lock"}case"media_player":switch(t?.attributes.device_class){case"speaker":switch(n){case"playing":return"mdi:speaker-play";case"paused":return"mdi:speaker-pause";case"off":return"mdi:speaker-off";default:return"mdi:speaker"}case"tv":switch(n){case"playing":return"mdi:television-play";case"paused":return"mdi:television-pause";case"off":return"mdi:television-off";default:return"mdi:television"}default:switch(n){case"playing":case"paused":return"mdi:cast-connected";case"off":return"mdi:cast-off";default:return"mdi:cast"}}case"switch":switch(t?.attributes.device_class){case"outlet":return"on"===n?"mdi:power-plug":"mdi:power-plug-off";case"switch":return"on"===n?"mdi:toggle-switch":"mdi:toggle-switch-off";default:return"mdi:flash"}case"zwave":switch(n){case"dead":return"mdi:emoticon-dead";case"sleeping":return"mdi:sleep";case"initializing":return"mdi:timer-sand";default:return"mdi:z-wave"}case"sensor":{const e=Qp(t);if(e)return e;break}case"input_datetime":if(!t?.attributes.has_date)return"mdi:clock";if(!t.attributes.has_time)return"mdi:calendar";break;case"sun":return"above_horizon"===t?.state?Gp[e]:"mdi:weather-night";case"update":return"on"===t?.state?Fp(t)?"mdi:package-down":"mdi:package-up":"mdi:package"}return e in Gp?Gp[e]:i??Yp}async function Xp(e,t,n,i=!1){let a;try{a=await e.callWS(n)}catch(e){if(!(e instanceof Error))throw new mp(xm("error.failed_response"),{request:n,response:e});throw e}if(!a)throw new mp(xm("error.empty_response"),{request:n});const r=i?t.safeParse(JSON.parse(a)):t.safeParse(a);if(!r.success)throw new mp(xm("error.invalid_response"),{request:n,response:a,invalid_keys:Ls(r.error)});return r.data}async function Jp(e,t,n){const i={type:"auth/sign_path",path:t,expires:n},a=await Xp(e,fp,i);return a?e.hassUrl(a.path):null}function ef(e,t,n,i){if(!e||!n||!n.length)return[];const a=[];for(const r of n){const n=t?.states[r],s=e.states[r];if((i?.stateOnly&&n?.state!==s?.state||!i?.stateOnly&&n!==s)&&(a.push({entity:r,oldState:n,newState:s}),i?.firstOnly))break}return a}function tf(e,t,n,i){return!!ef(e,t,n,{...i,firstOnly:!0}).length}function nf(e){if("off"===e.state||!e.attributes.brightness)return"";return`brightness(${(e.attributes.brightness+245)/5}%)`}function af(e){return"off"===e.state?"":e.attributes.rgb_color?`rgb(${e.attributes.rgb_color.join(",")})`:""}function rf(e){return{color:af(e),filter:nf(e)}}const sf=e=>{const t=e.entity_id.split(".")[0];let n=e.state;return"climate"===t&&(n=e.attributes.hvac_action),n};function of(e,t){if(!t.entity)return t;const n=e.states[t.entity];n&&t.state_color&&(t.style={...rf(n),...t.style}),t.title=t.title??(n?.attributes?.friendly_name||t.entity),t.icon=t.icon??lf(e,t.entity);const i=n?function(e){return Ge(e.entity_id)}(n):void 0;return t.data_domain=t.state_color||"light"===i&&!1!==t.state_color?i:void 0,n&&(t.data_state=sf(n)),t}function cf(e,t){return t?e?.states[t]?.attributes?.friendly_name:void 0}function lf(e,t,n){const i=e.states[t];return i&&i.attributes.icon?i.attributes.icon:Kp(Ge(t),i,i?.state,n)}const df=async()=>{if(["ha-selector","ha-menu-button","ha-camera-stream","ha-hls-player","ha-web-rtc-player","ha-icon","ha-circular-progress","ha-icon-button","ha-card","ha-svg-icon","ha-button-menu"].every((e=>customElements.get(e))))return!0;const e=await window.loadCardHelpers(),t=await e.createCardElement({type:"picture-glance",entities:[],camera_image:"dummy-to-load-editor-components"});return!!t.constructor.getConfigElement&&(await t.constructor.getConfigElement(),!0)},uf=e=>!!e&&["on","open"].includes(e.state),hf=(e,t)=>{if(!e)return[];const n=Object.keys(e.states).filter((e=>!t||e.substr(0,e.indexOf("."))===t));return n.sort(),n};function mf(e,t){return e&&t&&t.startsWith("/")?e.hassUrl(t):t??null}const gf=li.lazy((()=>li.object({title:li.string(),media_class:li.string(),media_content_type:li.string(),media_content_id:li.string(),can_play:li.boolean(),can_expand:li.boolean(),children_media_class:li.string().nullable().optional(),thumbnail:li.string().nullable(),children:li.array(gf).nullable().optional()}))),pf="video",ff="image",_f=60;class vf{constructor(e){this._cache=e}async walkBrowseMedias(e,t,n){return t&&t.length?(await Ap(t,(async t=>await this._walkBrowseMedia(e,t,n)))).flat():[]}async _walkBrowseMedia(e,t,n){const i=await Ap(t.targets,(async i=>await this._browseMedia(e,i,{useCache:n?.useCache,metadataGenerator:t.metadataGenerator}))),a=[];for(const e of i)for(const n of e.children??[])t.matcher(n)&&a.push(n);const r=t.advance?t.advance(a):null;if(!r||!r.length)return a;const s=new Set(r.map((e=>e.targets)).flat()),o=[];for(const e of a)s.has(e)||o.push(e);const c=await this.walkBrowseMedias(e,r,n);return o.concat(c)}async _browseMedia(e,t,n){const i="object"==typeof t?t.media_content_id:t,a=n?.useCache??1?this._cache.get(i):null;if(a)return a;const r={type:"media_source/browse_media",media_content_id:i},s=await Xp(e,gf,r);if(n?.metadataGenerator)for(const e of s.children??[])e._metadata=n.metadataGenerator(e,"object"==typeof t?t:void 0)??void 0;return(n?.useCache??1)&&this._cache.set(i,s,$l(new Date,{seconds:60})),s}}function yf(e,t){for(var n=-1,i=null==e?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}var bf="[object Symbol]";function wf(e){return"symbol"==typeof e||Sd(e)&&Ul(e)==bf}var xf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cf=/^\w*$/;function Mf(e,t){if(Dd(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!wf(e))||(Cf.test(e)||!xf.test(e)||null!=t&&e in Object(t))}var Sf="Expected a function";function $f(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Sf);var n=function(){var i=arguments,a=t?t.apply(this,i):i[0],r=n.cache;if(r.has(a))return r.get(a);var s=e.apply(this,i);return n.cache=r.set(a,s)||r,s};return n.cache=new($f.Cache||_d),n}$f.Cache=_d;var Ef=500;var kf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Af=/\\(\\)?/g,Tf=function(e){var t=$f(e,(function(e){return n.size===Ef&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(kf,(function(e,n,i,a){t.push(i?a.replace(Af,"$1"):n||e)})),t})),If=1/0,Df=jl?jl.prototype:void 0,zf=Df?Df.toString:void 0;function jf(e){if("string"==typeof e)return e;if(Dd(e))return yf(e,jf)+"";if(wf(e))return zf?zf.call(e):"";var t=e+"";return"0"==t&&1/e==-If?"-0":t}function Of(e){return null==e?"":jf(e)}function Rf(e,t){return Dd(e)?e:Mf(e,t)?[e]:Tf(Of(e))}var Pf=1/0;function Nf(e){if("string"==typeof e||wf(e))return e;var t=e+"";return"0"==t&&1/e==-Pf?"-0":t}function Lf(e,t){for(var n=0,i=(t=Rf(t,e)).length;null!=e&&n<i;)e=e[Nf(t[n++])];return n&&n==i?e:void 0}var Ff=1,Vf=2;function Hf(e){return e==e&&!Zl(e)}function Uf(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function Zf(e){var t=function(e){for(var t=au(e),n=t.length;n--;){var i=t[n],a=e[i];t[n]=[i,a,Hf(a)]}return t}(e);return 1==t.length&&t[0][2]?Uf(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,i){var a=n.length,r=a,s=!i;if(null==e)return!r;for(e=Object(e);a--;){var o=n[a];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<r;){var c=(o=n[a])[0],l=e[c],d=o[1];if(s&&o[2]){if(void 0===l&&!(c in e))return!1}else{var u=new yd;if(i)var h=i(l,d,c,e,t,u);if(!(void 0===h?up(d,l,Ff|Vf,i,u):h))return!1}}return!0}(n,e,t)}}function Wf(e,t,n){var i=null==e?void 0:Lf(e,t);return void 0===i?n:i}function qf(e,t){return null!=e&&t in Object(e)}function Bf(e,t){return null!=e&&function(e,t,n){for(var i=-1,a=(t=Rf(t,e)).length,r=!1;++i<a;){var s=Nf(t[i]);if(!(r=null!=e&&n(e,s)))break;e=e[s]}return r||++i!=a?r:!!(a=null==e?0:e.length)&&Vd(a)&&Ld(s,a)&&(Dd(e)||Id(e))}(e,t,qf)}var Qf=1,Yf=2;function Gf(e){return Mf(e)?(t=Nf(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Lf(t,e)}}(e);var t}function Kf(e){return"function"==typeof e?e:null==e?qh:"object"==typeof e?Dd(e)?(t=e[0],n=e[1],Mf(t)&&Hf(n)?Uf(Nf(t),n):function(e){var i=Wf(e,t);return void 0===i&&i===n?Bf(e,t):up(n,i,Qf|Yf)}):Zf(e):Gf(e);var t,n}var Xf=function(e,t){return function(n,i){if(null==n)return n;if(!iu(n))return e(n,i);for(var a=n.length,r=t?a:-1,s=Object(n);(t?r--:++r<a)&&!1!==i(s[r],r,s););return n}}((function(e,t){return e&&Rh(e,t,au)}));function Jf(e,t){if(e!==t){var n=void 0!==e,i=null===e,a=e==e,r=wf(e),s=void 0!==t,o=null===t,c=t==t,l=wf(t);if(!o&&!l&&!r&&e>t||r&&s&&c&&!o&&!l||i&&s&&c||!n&&c||!a)return 1;if(!i&&!r&&!l&&e<t||l&&n&&a&&!i&&!r||o&&n&&a||!s&&a||!c)return-1}return 0}function e_(e,t,n){t=t.length?yf(t,(function(e){return Dd(e)?function(t){return Lf(t,1===e.length?e[0]:e)}:e})):[qh];var i=-1;t=yf(t,Ud(Kf));var a=function(e,t){var n=-1,i=iu(e)?Array(e.length):[];return Xf(e,(function(e,a,r){i[++n]=t(e,a,r)})),i}(e,(function(e,n,a){return{criteria:yf(t,(function(t){return t(e)})),index:++i,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(a,(function(e,t){return function(e,t,n){for(var i=-1,a=e.criteria,r=t.criteria,s=a.length,o=n.length;++i<s;){var c=Jf(a[i],r[i]);if(c)return i>=o?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}))}function t_(e,t,n,i){return null==e?[]:(Dd(t)||(t=null==t?[]:[t]),Dd(n=i?void 0:n)||(n=null==n?[]:[n]),e_(e,t,n))}function n_(e,t){return e&&e.length?function(e,t){for(var n=-1,i=e.length,a=0,r=[];++n<i;){var s=e[n],o=t?t(s):s;if(!n||!El(o,c)){var c=o;r[a++]=0===s?0:s}}return r}(e,Kf(t)):[]}class i_{constructor(e){this._ranges=e??[]}hasCoverage(e){return this._ranges.some((t=>r_(t,e)))}add(e){this._ranges.push(e),this._ranges=o_(this._ranges)}clear(){this._ranges=[]}}class a_{constructor(e){this._ranges=e??[]}hasCoverage(e){const t=new Date;return this._ranges.some((n=>t<n.expires&&r_(n,e)))}add(e){this._ranges.push(e),this._expireOldRanges()}_expireOldRanges(){const e=new Date;this._ranges=this._ranges.filter((t=>e<t.expires))}clear(){this._ranges=[]}}const r_=(e,t)=>t.start>=e.start&&t.end<=e.end,s_=(e,t)=>e.start>=t.start&&e.start<=t.end||e.end>=t.start&&e.end<=t.end||e.start<=t.start&&e.end>=t.end,o_=(e,t=0)=>{const n=[];e=t_(e,(e=>e.start),"asc");let i=null;for(const a of e){const e=a.start instanceof Date?a.start.getTime():a.start;if(!i){i={...a};continue}(i.end instanceof Date?i.end.getTime():i.end)+1e3*t>=e?a.end>i.end&&(i.end=a.end):(n.push(i),i={...a})}return i&&n.push(i),n};class c_{constructor(){this._data=[]}get(e){const t=new Date;for(const n of this._data)if((!n.expires||t<=n.expires)&&this._contains(e,n.request))return n.response;return null}clear(){this._data=[]}has(e){return!!this.get(e)}set(e,t,n){this._data.push({request:e,response:t,expires:n}),this._expireOldRequests()}_contains(e,t){return hp(e,t)}_expireOldRequests(){const e=new Date;this._data=this._data.filter((t=>!t.expires||e<t.expires))}}class l_ extends c_{}class d_{constructor(e,t){this._ranges=new i_,this._data=[],this._timeFunc=e,this._idFunc=t}add(e,t){this._ranges.add(e),this._data=n_(t_(this._data.concat(t),this._timeFunc,"asc"),this._idFunc)}hasCoverage(e){return this._ranges.hasCoverage(e)}get(e){if(!this.hasCoverage(e))return null;const t=[];for(const n of this._data){const i=this._timeFunc(n);if(i>=e.start.getTime()){if(i>e.end.getTime())break;t.push(n)}}return t}getSize(){return this._data.length}expireMatches(e){this._data=this._data.filter((t=>!e(t)))}}class u_{constructor(){this._segments=new Map}add(e,t,n){let i=this._segments.get(e);i||(i=new d_((e=>1e3*e.start_time),(e=>e.id)),this._segments.set(e,i)),i.add(t,n)}clear(){this._segments.clear()}hasCoverage(e,t){return!!this._segments.get(e)?.hasCoverage(t)}get(e,t){return this._segments.get(e)?.get(t)??null}getSize(e){return this._segments.get(e)?.getSize()??null}getCameraIDs(){return[...this._segments.keys()]}expireMatches(e,t){this._segments.get(e)?.expireMatches(t)}}class h_ extends mp{}class m_ extends mp{}var g_,p_,f_;function __(e){bl(1,arguments);var t=xl(e);return t.setHours(23,59,59,999),t}function v_(e){bl(1,arguments);var t=xl(e);return t.setMinutes(59,59,999),t}function y_(e){bl(1,arguments);var t=xl(e);return t.setHours(0,0,0,0),t}function b_(e){bl(1,arguments);var t=xl(e);return t.setMinutes(0,0,0),t}function w_(e){return e!=e}function x_(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}(e,t,n):function(e,t,n,i){for(var a=e.length,r=n+(i?1:-1);i?r--:++r<a;)if(t(e[r],r,e))return r;return-1}(e,w_,n)}(e,t,0)>-1}function C_(e,t,n){for(var i=-1,a=null==e?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}!function(e){e.Event="event-query",e.Recording="recording-query",e.RecordingSegments="recording-segments-query",e.MediaMetadata="media-metadata"}(g_||(g_={})),function(e){e.Event="event-results",e.Recording="recording-results",e.RecordingSegments="recording-segments-results",e.MediaMetadata="media-metadata-results"}(p_||(p_={})),function(e){e.Frigate="frigate",e.Generic="generic",e.MotionEye="motioneye"}(f_||(f_={}));var M_=$u&&1/Vg(new $u([,-0]))[1]==1/0?function(e){return new $u(e)}:function(){},S_=200;function $_(e,t,n){var i=-1,a=x_,r=e.length,s=!0,o=[],c=o;if(n)s=!1,a=C_;else if(r>=S_){var l=t?null:M_(e);if(l)return Vg(l);s=!1,a=Rg,c=new jg}else c=t?[]:o;e:for(;++i<r;){var d=e[i],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u==u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),o.push(d)}else a(c,u,n)||(c!==o&&c.push(u),o.push(d))}return o}const E_=(e,t)=>{let n,i;return(e.end.getTime()-e.start.getTime())/1e3<=3600?(n=b_(e.start),i=v_(e.end)):(n=y_(e.start),i=__(e.end)),t?.endCap&&(i=function(e){bl(1,arguments);var t=xl(e);return t.setSeconds(59,999),t}(k_(i))),{start:n,end:i}},k_=e=>{const t=new Date;return e>t?t:e},A_=e=>{return t_((n=e=>e.getID()??e,(t=e)&&t.length?$_(t,Kf(n)):[]),(e=>e.getStartTime()),"asc");var t,n},T_=e=>e.camera_entity??e.webrtc_card?.entity??null,I_=(e,t)=>{const n=t?.url??e.go2rtc?.url,i=t?.stream??e.go2rtc?.stream;if(!n||!i)return null;const a=`${n}/api/ws?src=${i}`;return{endpoint:a,sign:a.startsWith("/")}};class D_{constructor(e,t){this._entityRegistryManager=e,this._resolvedMediaCache=t}async createEngine(e){let t;switch(e){case f_.Generic:const{GenericCameraManagerEngine:e}=await import("./engine-generic-91f6cc98.js").then((function(e){return e.e}));t=new e;break;case f_.Frigate:const{FrigateCameraManagerEngine:n}=await import("./engine-frigate-dad8be8d.js");t=new n(new u_,new l_);break;case f_.MotionEye:const{MotionEyeCameraManagerEngine:i}=await import("./engine-motioneye-56c2b283.js");t=new i(new vf(new c_),this._resolvedMediaCache,new l_)}return t}async getEngineForCamera(e,t){let n=null;if("frigate"===t.engine)n=f_.Frigate;else if("motioneye"===t.engine)n=f_.MotionEye;else if("generic"===t.engine)n=f_.Generic;else{const i=T_(t);if(i){let a;try{a=await this._entityRegistryManager.getEntity(e,i)}catch(n){if(e.states[i])return f_.Generic;throw new h_(xm("error.no_camera_entity"),t)}switch(a?.platform){case"frigate":n=f_.Frigate;break;case"motioneye":n=f_.MotionEye;break;default:n=f_.Generic}}else t.frigate.camera_name?n=f_.Frigate:(t.webrtc_card?.url||t.go2rtc?.url&&t.go2rtc?.stream)&&(n=f_.Generic)}return n}}class z_{constructor(){this._cameras=new Map,this._enginesByType=new Map}addCamera(e){this._cameras.set(e.getID(),e),this._enginesByType.set(e.getEngine().getEngineType(),e.getEngine())}reset(){this._cameras.clear(),this._enginesByType.clear()}getCamera(e){return this._cameras.get(e)??null}getCameraConfig(e){return this._cameras.get(e)?.getConfig()??null}hasCameraID(e){return this._cameras.has(e)}getCameraCount(){return this._cameras.size}getVisibleCameraCount(){return this.getVisibleCameraIDs().size}getCameras(){return this._cameras}*getCameraConfigs(e){for(const[t,n]of this.getCameraConfigEntries(e))yield n}*getCameraConfigEntries(e){for(const t of e??this._cameras.keys()){const e=this.getCameraConfig(t);e&&(yield[t,e])}}getCameraIDs(){return new Set(this._cameras.keys())}getVisibleCameraIDs(){return this._getMatchingCameraIDs((e=>!e.getConfig().hide))}getCameraConfigForMedia(e){return this.getCameraConfig(e.getCameraID())}getEngineOfType(e){return this._enginesByType.get(e)??null}getEngineForCameraID(e){return this._cameras.get(e)?.getEngine()??null}getEnginesForCameraIDs(e){const t=new Map;for(const n of e){const e=this.getEngineForCameraID(n);e&&(t.has(e)||t.set(e,new Set),t.get(e)?.add(n))}return t.size?t:null}getEngineForMedia(e){return this.getEngineForCameraID(e.getCameraID())}getAllDependentCameras(e){const t=new Set,n=e=>{const i=this.getCameraConfig(e);if(i){t.add(e);const a=new Set;i.dependencies.cameras.forEach((e=>a.add(e))),i.dependencies.all_cameras&&this.getCameraIDs().forEach((e=>a.add(e)));for(const e of a)t.has(e)||n(e)}};return n(e),t}_getMatchingCameraIDs(e){const t=new Set;for(const[n,i]of this._cameras.entries())e(i)&&t.add(n);return t}}class j_{static isEventQuery(e){return e.type===g_.Event}static isRecordingQuery(e){return e.type===g_.Recording}static isRecordingSegmentsQuery(e){return e.type===g_.RecordingSegments}static isMediaMetadataQuery(e){return e.type===g_.MediaMetadata}}class O_{static isEventQueryResult(e){return e.type===p_.Event}static isRecordingQuery(e){return e.type===p_.Recording}static isRecordingSegmentsQuery(e){return e.type===p_.RecordingSegments}static isMediaMetadataQuery(e){return e.type===p_.MediaMetadata}}class R_{constructor(e,t){this._api=e,this._engineFactory=new D_(this._api.getEntityRegistryManager(),this._api.getResolvedMediaCache()),this._store=t??new z_}async initializeCamerasFromConfig(){const e=this._api.getConfigManager().getConfig(),t=this._api.getHASSManager().getHASS();if(!e||!t)return!1;this._store.reset();const n=e.cameras.map((t=>am(zh(e?.cameras_global),t)));try{await this._initializeCameras(n)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e),!1}return!0}async _getEnginesForCameras(e){const t=new Map,n=new Map,i=this._api.getHASSManager().getHASS();if(!i)return t;const a=await(async e=>await Ap(e,(e=>this._engineFactory.getEngineForCamera(i,e))))(e);for(const[i,r]of e.entries()){const e=a[i],s=e?n.get(e)??await this._engineFactory.createEngine(e):null;if(!s||!e)throw new h_(xm("error.no_camera_engine"),zh(r));n.set(e,s),t.set(r,s)}return t}async _initializeCameras(e){const t=new Date,n=this._api.getHASSManager().getHASS();if(!n)return;e.some((e=>(e=>e.triggers.motion||e.triggers.occupancy)(e)))&&await this._api.getEntityRegistryManager().fetchEntityList(n);const i=await this._getEnginesForCameras(e);if((await Ap(i.entries(),(async([e,t])=>await t.initializeCamera(n,this._api.getEntityRegistryManager(),e)))).forEach((e=>{const t=Pp(e.getConfig());if(!t)throw new h_(xm("error.no_camera_id"),e.getConfig());if(this._store.hasCameraID(t))throw new h_(xm("error.duplicate_camera_id"),e.getConfig());e.setID(t),this._store.addCamera(e)})),!this._store.getVisibleCameraCount())throw new h_(xm("error.no_visible_cameras"));Np(this._api.getConfigManager().getCardWideConfig(),"Frigate Card CameraManager initialized (Cameras: ",this._store.getCameras(),`, Duration: ${((new Date).getTime()-t.getTime())/1e3}s,`,")")}isInitialized(){return this._store.getCameraCount()>0}getStore(){return this._store}generateDefaultEventQueries(e,t){return this._generateDefaultQueries(e,{type:g_.Event,...t})}generateDefaultRecordingQueries(e,t){return this._generateDefaultQueries(e,{type:g_.Recording,...t})}generateDefaultRecordingSegmentsQueries(e,t){return this._generateDefaultQueries(e,{type:g_.RecordingSegments,...t})}async getMediaMetadata(){const e=new Set,t=new Set,n=new Set,i=new Set,a={type:g_.MediaMetadata,cameraIDs:this._store.getCameraIDs()},r=await this._handleQuery(a);for(const a of r?.values()??[])a.metadata.tags&&a.metadata.tags.forEach(e.add,e),a.metadata.what&&a.metadata.what.forEach(t.add,t),a.metadata.where&&a.metadata.where.forEach(n.add,n),a.metadata.days&&a.metadata.days.forEach(i.add,i);return t.size||n.size||i.size?{...e.size&&{tags:e},...t.size&&{what:t},...n.size&&{where:n},...i.size&&{days:i}}:null}_generateDefaultQueries(e,t){const n=[],i=wp(e),a=this._store.getEnginesForCameraIDs(i);if(!a)return null;for(const[e,i]of a){let a=null;j_.isEventQuery(t)?a=e.generateDefaultEventQuery(this._store,i,t):j_.isRecordingQuery(t)?a=e.generateDefaultRecordingQuery(this._store,i,t):j_.isRecordingSegmentsQuery(t)&&(a=e.generateDefaultRecordingSegmentsQuery(this._store,i,t));for(const e of a??[])n.push(e)}return n.length?n:null}async getEvents(e,t){return await this._handleQuery(e,t)}async getRecordings(e,t){return await this._handleQuery(e,t)}async getRecordingSegments(e,t){return await this._handleQuery(e,t)}async executeMediaQueries(e,t){return this._convertQueryResultsToMedia(await this._handleQuery(e,t))}async extendMediaQueries(e,t,n,i){if(!this._api.getHASSManager().getHASS())return null;const a=e=>{let n=null;for(const i of t){const t=i.getStartTime();t&&(!n||"earliest"===e&&t<n||"latest"===e&&t>n)&&(n=t)}return n},r=this._api.getConfigManager().getCardWideConfig()?.performance?.features.media_chunk_size??50,s=[],o=[];for(const t of e){const e={...t};if("later"===n){const t=a("latest");t&&(e.start=t)}else if("earlier"===n){const t=a("earliest");t&&(e.end=t)}e.limit=r,o.push({...t,limit:(t.limit??0)+r}),s.push(e)}const c=this._convertQueryResultsToMedia(await this._handleQuery(s,i));if(!c.length)return null;const l=A_(t.concat(c));return l.length===t.length?null:{queries:o,results:l}}async getMediaDownloadPath(e){const t=this._store.getCameraConfigForMedia(e),n=this._store.getEngineForMedia(e),i=this._api.getHASSManager().getHASS();return t&&n&&i?await n.getMediaDownloadPath(i,t,e):null}getMediaCapabilities(e){const t=this._store.getEngineForMedia(e);return t?t.getMediaCapabilities(e):null}async favoriteMedia(e,t){const n=this._store.getCameraConfigForMedia(e),i=this._store.getEngineForMedia(e),a=this._api.getHASSManager().getHASS();if(!n||!i||!a)return;const r=new Date;await i.favoriteMedia(a,n,e,t),Np(this._api.getConfigManager().getCardWideConfig(),"Frigate Card CameraManager favorite request (",`Duration: ${((new Date).getTime()-r.getTime())/1e3}s,`,"Media:",e.getID(),", Favorite:",t,")")}areMediaQueriesResultsFresh(e,t){const n=new Date;for(const i of e){const e=this._store.getEnginesForCameraIDs(i.cameraIDs);for(const[a,r]of e??[]){const e=a.getQueryResultMaxAge({...i,cameraIDs:r});if(null!==e&&$l(t,{seconds:e})<n)return!1}}return!0}async getMediaSeekTime(e,t){const n=e.getStartTime(),i=e.getEndTime(),a=this._store.getCameraConfigForMedia(e),r=this._store.getEngineForMedia(e),s=this._api.getHASSManager().getHASS();return!s||!a||!r||!n||!i||t<n||t>i?null:await r.getMediaSeekTime(s,this._store,e,t)}async _handleQuery(e,t){const n=bp(e),i=new Map,a=new Date,r=this._api.getHASSManager().getHASS();if(!r)return i;const s=async(e,n)=>{if(!n)return;let a=null;j_.isEventQuery(n)?a=await e.getEvents(r,this._store,n,t):j_.isRecordingQuery(n)?a=await e.getRecordings(r,this._store,n,t):j_.isRecordingSegmentsQuery(n)?a=await e.getRecordingSegments(r,this._store,n,t):j_.isMediaMetadataQuery(n)&&(a=await e.getMediaMetadata(r,this._store,n,t)),a?.forEach(((e,t)=>i.set(t,e)))},o=async e=>{const t=this._store.getEnginesForCameraIDs(e.cameraIDs);t&&await Promise.all(Array.from(t.keys()).map((n=>s(n,{...e,cameraIDs:t.get(n)}))))};await Promise.all(n.map((e=>o(e))));const c=(l=Array.from(i.values()).map((e=>Number(e.cached??0))))&&l.length?function(e,t){for(var n,i=-1,a=e.length;++i<a;){var r=t(e[i]);void 0!==r&&(n=void 0===n?r:n+r)}return n}(l,qh):0;var l;return Np(this._api.getConfigManager().getCardWideConfig(),"Frigate Card CameraManager request [Input queries:",n.length,", Cached output queries:",c,", Total output queries:",i.size,", Duration:",((new Date).getTime()-a.getTime())/1e3+"s,",", Queries:",n,", Results:",i,"]"),i}_convertQueryResultsToMedia(e){const t=[],n=this._api.getHASSManager().getHASS();if(!n)return t;for(const[i,a]of e.entries()){const e=this._store.getEngineOfType(a.engine);if(e){let r=null;j_.isEventQuery(i)&&O_.isEventQueryResult(a)?r=e.generateMediaFromEvents(n,this._store,i,a):j_.isRecordingQuery(i)&&O_.isRecordingQuery(a)&&(r=e.generateMediaFromRecordings(n,this._store,i,a)),r&&t.push(...r)}}return A_(t)}getCameraEndpoints(e,t){const n=this._store.getCameraConfig(e),i=this._store.getEngineForCameraID(e);return n&&i?i.getCameraEndpoints(n,t):null}getCameraMetadata(e){const t=this._store.getCameraConfig(e),n=this._store.getEngineForCameraID(e),i=this._api.getHASSManager().getHASS();return t&&n&&i?n.getCameraMetadata(i,t):null}getCameraCapabilities(e){return this._store.getCamera(e)?.getCapabilities()??null}getAggregateCameraCapabilities(e){const t=[...e??this._store.getCameraIDs()].map((e=>this.getCameraCapabilities(e)));return{canFavoriteEvents:t.some((e=>e?.canFavoriteEvents)),canFavoriteRecordings:t.some((e=>e?.canFavoriteRecordings)),canSeek:t.some((e=>e?.canSeek)),supportsClips:t.some((e=>e?.supportsClips)),supportsRecordings:t.some((e=>e?.supportsRecordings)),supportsSnapshots:t.some((e=>e?.supportsSnapshots)),supportsTimeline:t.some((e=>e?.supportsTimeline)),supportsPTZ:t.some((e=>!!e?.ptz))}}async executePTZAction(e,t,n){const i=this._api.getHASSManager().getHASS(),a=this._store.getEngineForCameraID(e),r=this._store.getCameraConfig(e);if(a&&r&&i)return a.executePTZAction(i,r,t,n)}}const P_=li.object({config_entry_id:li.string().nullable(),device_id:li.string().nullable(),disabled_by:li.string().nullable(),entity_id:li.string(),hidden_by:li.string().nullable(),platform:li.string(),translation_key:li.string().nullable(),unique_id:li.string().or(li.number()).optional()}),N_=P_.array();class L_{constructor(e){this._fetchedEntityList=!1,this._cache=e}async getEntity(e,t){const n=this._cache.get(t);if(n)return n;const i=await Xp(e,P_,{type:"config/entity_registry/get",entity_id:t});return this._cache.set(i),i}async getMatchingEntities(e,t){return await this.fetchEntityList(e),this._cache.getMatches(t)}async getEntities(e,t){const n=new Map;return await Promise.all(t.map((async t=>{let i=null;try{i=await this.getEntity(e,t)}catch{return}i&&n.set(t,i)}))),n}async fetchEntityList(e){if(this._fetchedEntityList)return;const t=await Xp(e,N_,{type:"config/entity_registry/list"});this._cache.set(t),this._fetchedEntityList=!0}}class F_{constructor(){this._cache=new Map}has(e){return this._cache.has(e)}getMatches(e){return[...this._cache.values()].filter(e)}get(e){return this._cache.get(e)}set(e){const t=e=>this._cache.set(e.entity_id,e);Array.isArray(e)?e.forEach(t):t(e)}}class V_ extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield e)}}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const i="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:i}):this._set(e,{value:t,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;if(!this.cache.has(t)){!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,a]=n;!1===this._deleteIfExpired(i,a)&&(yield[i,a.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[i,a]=n;if(!this.cache.has(i)){!1===this._deleteIfExpired(i,a)&&(yield[i,a.value])}}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,i]of this.entriesAscending())e.call(t,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class H_{constructor(){this._cache=new V_({maxSize:1e3})}has(e){return this._cache.has(e)}get(e){return this._cache.get(e)}set(e,t){this._cache.set(e,t)}}const U_=async(e,t,n)=>{const i=n?n.get(t):void 0;if(i)return i;const a={type:"media_source/resolve_media",media_content_id:t};let r=null;try{r=await Xp(e,pp,a)}catch(e){Cp(e)}return n&&r&&n.set(t,r),r},Z_=e=>e?.context?.live?.overrides?.get(e.camera)??e.camera,W_=e=>Z_(e)!==e.camera;class q_{constructor(e){this.handleActionEvent=e=>{if(!("detail"in e))return;const t=al(e.detail);t&&this.executeFrigateAction(t)},this._api=e}getMergedActions(){const e=this._api.getViewManager().getView();if(this._api.getMessageManager().hasMessage())return{};const t=this._api.getConfigManager().getConfig();let n;if(e?.is("live"))n=t?.live.actions;else if(e?.isGalleryView())n=t?.media_gallery?.actions;else if(e?.isViewerView())n=t?.media_viewer.actions;else{if(!e?.is("image"))return{};n=t?.image?.actions}return{...t?.view.actions,...n}}handleInteraction(e){const t=this._api.getHASSManager().getHASS(),n=this.getMergedActions(),i=dl(e,n);t&&n&&e&&i&&ul(this._api.getCardElementManager().getElement(),t,n,e,i)}executeActions(e){const t=this._api.getHASSManager().getHASS();t&&hl(this._api.getCardElementManager().getElement(),t,{},e)}async executeFrigateAction(e){const t=this._api.getConfigManager().getConfig(),n=this._api.getMediaLoadedInfoManager();if(e.card_id&&t?.card_id!==e.card_id)return;const i=this._api.getViewManager().getView(),a=e.frigate_card_action;switch(a){case"default":this._api.getViewManager().setViewDefault();break;case"clip":case"clips":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":this._api.getViewManager().setViewByParameters({viewName:a,cameraID:i?.camera});break;case"download":await this._api.getDownloadManager().downloadViewerMedia();break;case"camera_ui":this._api.getCameraURLManager().openURL();break;case"expand":this._api.getExpandManager().toggleExpanded();break;case"fullscreen":this._api.getFullscreenManager().toggleFullscreen();break;case"menu_toggle":this._api.getCardElementManager().toggleMenu();break;case"camera_select":const r=e.camera??(e.triggered?this._api.getTriggersManager().getMostRecentlyTriggeredCameraID():null);if(r&&i){const e=t?.view.camera_select??"current",n="current"===e?i.view:e,a=this._api.getViewManager().isViewSupportedByCamera(r,n)?n:Ws;this._api.getViewManager().setViewByParameters({viewName:a,cameraID:r})}break;case"live_substream_select":this._api.getViewManager().setViewWithSubstream(e.camera);break;case"live_substream_off":this._api.getViewManager().setViewWithoutSubstream();break;case"live_substream_on":this._api.getViewManager().setViewWithSubstream();break;case"media_player":const s=e.media_player,o=this._api.getMediaPlayerManager(),c=i?.queryResults?.getSelectedResult()??null;"stop"===e.media_player_action?await o.stop(s):i?.is("live")?await o.playLive(s,Z_(i)):i?.isViewerView()&&c&&await o.playMedia(s,c);break;case"diagnostics":this._api.getViewManager().setViewByParameters({viewName:"diagnostics"});break;case"microphone_mute":this._api.getMicrophoneManager().mute();break;case"microphone_unmute":await this._api.getMicrophoneManager().unmute();break;case"mute":await(n.get()?.player?.mute());break;case"unmute":await(n.get()?.player?.unmute());break;case"play":await(n.get()?.player?.play());break;case"pause":await(n.get()?.player?.pause());break;case"screenshot":await this._api.getDownloadManager().downloadScreenshot();break;case"display_mode_select":this._api.getViewManager().setViewWithNewDisplayMode(e.display_mode);break;case"ptz":const l=this._api.getViewManager().getView()?.camera;l&&this._api.getCameraManager().executePTZAction(l,e.ptz_action,{phase:e.ptz_phase,preset:e.ptz_preset});break;case"show_ptz":this._api.getViewManager().setViewWithNewContext({live:{ptzVisible:e.show_ptz}});break;default:console.warn(`Frigate card received unknown card action: ${a}`)}}}class B_{constructor(e){this._timer=new pl,this._api=e}startDefaultViewTimer(){this._timer.stop();const e=this._api.getConfigManager().getConfig()?.view.update_seconds;e&&this._timer.start(e,(()=>{this._isAutomatedUpdateAllowed()?this._api.getViewManager().setViewDefault():this.startDefaultViewTimer()}))}_isAutomatedUpdateAllowed(){const e=this._api.getTriggersManager(),t=this._api.getConfigManager().getConfig(),n=this._api.getInteractionManager();return!e.isTriggered()&&(t?.view.update_force||!n.hasInteraction())}}class Q_{constructor(e){this._priorEvaluations=new Map,this._nestedAutomationExecutions=0,this._api=e}setAutomationsFromConfig(){this._automations=this._api.getConfigManager().getNonOverriddenConfig()?.automations}execute(){const e=this._api.getHASSManager().getHASS();if(!e||this._api.getMessageManager().hasErrorMessage())return;const t=[];for(const e of this._automations??[]){const n=this._api.getConditionsManager().evaluateCondition(e.conditions),i=n?e.actions:e.actions_not,a=this._priorEvaluations.get(e);this._priorEvaluations.set(e,n),n!==a&&i&&t.push(i)}++this._nestedAutomationExecutions,this._nestedAutomationExecutions>10?this._api.getMessageManager().setMessageIfHigherPriority({type:"error",message:xm("error.too_many_automations")}):(t.forEach((t=>{hl(this._api.getCardElementManager().getElement(),e,{},t)})),--this._nestedAutomationExecutions)}}class Y_{constructor(e){this._api=e}openURL(){const e=this.getCameraURL();e&&window.open(e)}hasCameraURL(){return!!this.getCameraURL()}getCameraURL(){const e=this._api.getViewManager().getView(),t=e?.queryResults?.getSelectedResult()??null;return(e?.camera?this._api.getCameraManager().getCameraEndpoints(e.camera,{view:e.view,...t&&{media:t}})??null:null)?.ui?.endpoint??null}}class G_{constructor(e,t,n,i){this._api=e,this._element=t,this._scrollCallback=n,this._menuToggleCallback=i}getElement(){return this._element}scrollReset(){this._scrollCallback()}toggleMenu(){this._menuToggleCallback()}update(){this._element.requestUpdate()}hasUpdated(){return this._element.hasUpdated}getCardHeight(){return this._element.getBoundingClientRect().height}elementConnected(){this._api.getInteractionManager().initialize(),this._api.getFullscreenManager().initialize(),this._api.getExpandManager().initialize(),this._api.getMediaLoadedInfoManager().initialize(),this._api.getMicrophoneManager().initialize(),zp(this._element,(e=>{const t=e.getRootNode();return!!(t&&t instanceof ShadowRoot&&"HUI-PANEL-VIEW"===t.host.tagName)})(this._element),"panel"),this._api.getFullscreenManager().connect(),this._element.addEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.addEventListener("ll-custom",this._api.getActionsManager().handleActionEvent),this._element.addEventListener("@action",this._api.getInteractionManager().reportInteraction),window.addEventListener("location-changed",this._api.getQueryStringManager().executeAll),window.addEventListener("popstate",this._api.getQueryStringManager().executeAll),this._api.getQueryStringManager().executeAll()}elementDisconnected(){zp(this._element,!1,"panel"),this._api.getMediaLoadedInfoManager().clear(),this._api.getFullscreenManager().disconnect(),this._element.removeEventListener("mousemove",this._api.getInteractionManager().reportInteraction),this._element.removeEventListener("ll-custom",this._api.getActionsManager().handleActionEvent),this._element.removeEventListener("@action",this._api.getInteractionManager().reportInteraction),window.removeEventListener("location-changed",this._api.getQueryStringManager().executeAll),window.removeEventListener("popstate",this._api.getQueryStringManager().executeAll)}}function K_(e,t,n){return null==e?e:function(e,t,n,i){if(!Zl(e))return e;for(var a=-1,r=(t=Rf(t,e)).length,s=r-1,o=e;null!=o&&++a<r;){var c=Nf(t[a]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(a!=s){var d=o[c];void 0===(l=i?i(d,c,o):void 0)&&(l=Zl(d)?d:Ld(t[a+1])?[]:{})}Cd(o,c,l),o=o[c]}return e}(e,t,n)}function X_(e,t){return t.length<2?e:Lf(e,function(e,t,n){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var r=Array(a);++i<a;)r[i]=e[i+t];return r}(t,0,-1))}function J_(e,t){return null==e||function(e,t){return null==(e=X_(e,t=Rf(t,e)))||delete e[Nf((n=t,i=null==n?0:n.length,i?n[i-1]:void 0))];var n,i}(e,t)}const ev=(e,t,n)=>{K_(e,t,n)},tv=(e,t,n)=>Wf(e,t,n),nv=(e,t)=>{J_(e,t)},iv=e=>zh(e),av=(e,t)=>e.replace("#",`[${t.toString()}]`),rv=function(e){let t=!1;for(let n=0;n<pv.length;n++)t=pv[n](e)||t;return t},sv=function(e){return rv(iv(e))},ov=function(e,t,n){return function(i){return((e,t,n,i)=>{const a=tv(e,t);if(void 0===a)return!1;const r=i?.transform?i.transform(a):a;return!(t===n&&hp(a,r)||(null===r?i?.keepOriginal||(nv(e,t),0):void 0===r||(i?.keepOriginal||nv(e,t),ev(e,n,r),0)))})(i,e,t,n)}},cv=function(e,t,n){return function(i){let a=ov(e,t,n)(i);return a=dv(As,ov(e,t,n),(e=>e.overrides))(i)||a,a}},lv=function(e,t){return cv(e,e,{transform:t})},dv=function(e,t,n){return function(i){let a=!1;const r=tv(i,e);return Array.isArray(r)&&r.forEach((e=>{const i=n?n(e):e;i&&"object"==typeof i&&(a=t(i)||a)})),a}},uv=(e,t)=>{const n=i=>{let a=!1;if(i&&"object"==typeof i){const r=t?t(i):i;r&&(a=e(r)||a),Array.isArray(i)?i.forEach((e=>{a=n(e)||a})):Object.keys(i).forEach((e=>{a=n(i[e])||a}))}return a};return n},hv=e=>!("object"!=typeof e||!e||void 0===e.mediaLoaded)&&(e.media_loaded=e.mediaLoaded,delete e.mediaLoaded,!0),mv=e=>!("object"!=typeof e||!e||"call-service"!==e.action||void 0===e.service||void 0===e.service_data||void 0!==e.data)&&(e.data=e.service_data,delete e.service_data,!0),gv=e=>!("object"!=typeof e||!e||"custom:frigate-card-action"!==e.action||"frigate_ui"!==e.frigate_card_action)&&(e.frigate_card_action="camera_ui",!0),pv=[dv(As,hv,(e=>e.conditions)),e=>uv(hv,(e=>e.conditions))("object"==typeof e&&e?e[Yi]:{}),cv("event_gallery",ga),cv("menu.buttons.frigate_ui",ws),e=>uv(gv)("object"==typeof e&&e?e:{}),dv(hi,lv("live_provider",(e=>"frigate-jsmpeg"===e?"jsmpeg":e))),cv("live.jsmpeg",Wi),cv("live.image",Zi),cv("live.webrtc_card",qi),dv(hi,cv("frigate.zone","frigate.zones",{transform:e=>bp(e)})),dv(hi,cv("frigate.label","frigate.labels",{transform:e=>bp(e)})),e=>uv(mv)("object"==typeof e&&e?e:{}),function(e){if("object"!=typeof e||!e||!(Yi in e)||!Array.isArray(e[Yi]))return!1;let t=!1;const n=n=>{if(!t){if(!Wf(e,"live.controls.ptz")){const{type:t,...i}=n;K_(e,"live.controls.ptz",i)}t=!0}},i=e=>{const t=[];for(const a of e)if("custom:frigate-card-ptz"===a.type)n(a);else if("conditional"!==a.type&&"custom:frigate-card-conditional"!==a.type||!Array.isArray(a.elements))t.push(a);else{const e=i(a.elements);e.length&&(a.elements=e,t.push(a))}return t},a=i(e[Yi]);return t&&(a.length?e[Yi]=a:delete e[Yi]),t},cv("view.scan.untrigger_reset",ha,{transform:e=>e?"default":null}),cv("view.timeout_seconds",ea),lv("live.lazy_unload",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:bp(e))),lv("live.auto_play",(e=>"all"===e?null:"never"===e?[]:bp(e))),lv("live.auto_pause",(e=>"all"===e?["unselected","hidden"]:"never"===e?null:bp(e))),lv("live.auto_mute",(e=>"all"===e?null:"never"===e?[]:bp(e))),lv("live.auto_unmute",(e=>"all"===e?["selected","visible","microphone"]:"never"===e?null:bp(e))),lv("media_viewer.auto_play",(e=>"all"===e?null:"never"===e?[]:bp(e))),lv("media_viewer.auto_pause",(e=>"all"===e?null:"never"===e?[]:bp(e))),lv("media_viewer.auto_mute",(e=>"all"===e?null:"never"===e?[]:bp(e))),lv("media_viewer.auto_unmute",(e=>"all"===e?["selected","visible"]:"never"===e?null:bp(e))),cv("live.controls.thumbnails.media",fr),cv("timeline.media",rs),cv("live.controls.timeline.media",Mr),cv("media_viewer.controls.timeline.media",Za)];class fv extends Event{constructor(e,t){super("frigate-card:condition:evaluate",t),this.condition=e}}function _v(e,t,n,i){const a=iv(t);let r=!1;if(n)for(const t of n)e.evaluateCondition(t.conditions,i)&&(am(a,t.overrides),r=!0);return r?a:t}class vv{constructor(e,t){this._state={},this._epoch=this._createEpoch(),this._hasHAStateConditions=!1,this._mediaQueries=[],this._mediaQueryTrigger=()=>this._triggerChange(),this._api=e,this._listeners=[()=>this._api.getConfigManager().computeOverrideConfig(),()=>this._api.getAutomationsManager().execute(),...t?[t]:[]]}removeConditions(){this._mediaQueries.forEach((e=>e.removeEventListener("change",this._mediaQueryTrigger))),this._mediaQueries=[]}setConditionsFromConfig(){this.removeConditions();const e=(()=>{const e=this._api.getConfigManager().getConfig(),t=[];e?.overrides?.forEach((e=>t.push(e.conditions)));const n=e=>{const i=Vo.safeParse(e);i.success?(t.push(i.data.conditions),i.data.elements?.forEach(n)):e&&"object"==typeof e&&Object.keys(e).forEach((t=>n(e[t])))};return e?.elements?.forEach(n),t})();this._hasHAStateConditions=e.some((e=>!!e.state?.length)),e.forEach((e=>{if(e.media_query){const t=window.matchMedia(e.media_query);t.addEventListener("change",this._mediaQueryTrigger),this._mediaQueries.push(t)}}))}setState(e){this._state={...this._state,...e},this._triggerChange()}hasHAStateConditions(){return this._hasHAStateConditions}getEpoch(){return this._epoch}evaluateCondition(e,t){const n={...this._state,...t};let i=!0;if(e.view?.length&&(i&&=!!n?.view&&e.view.includes(n.view)),void 0!==e.fullscreen&&(i&&=void 0!==n.fullscreen&&e.fullscreen===n.fullscreen),void 0!==e.expand&&(i&&=void 0!==n.expand&&e.expand===n.expand),e.camera?.length&&(i&&=!!n.camera&&e.camera.includes(n.camera)),e.state?.length)for(const t of e.state)i&&=!(!n.state||(t.state||t.state_not)&&(!(t.entity in n.state)||t.state&&n.state[t.entity].state!==t.state||t.state_not&&n.state[t.entity].state===t.state_not));return void 0!==e.media_loaded&&(i&&=void 0!==n.media_loaded&&e.media_loaded===n.media_loaded),e.media_query&&(i&&=window.matchMedia(e.media_query).matches),e.display_mode&&(i&&=!!n.displayMode&&e.display_mode===n.displayMode),e.triggered?.length&&(i&&=e.triggered.some((e=>n.triggered?.has(e)))),void 0!==e.interaction&&(i&&=void 0!==n.interaction&&e.interaction===n.interaction),e.microphone&&(i&&=!(void 0!==e.microphone.connected&&n.microphone?.connected!==e.microphone.connected||void 0!==e.microphone.muted&&n.microphone?.muted!==e.microphone.muted)),i}_createEpoch(){return{manager:this}}_triggerChange(){this._epoch=this._createEpoch(),this._listeners.forEach((e=>e()))}}const yv={[_r]:"none",[Pa]:"none",[cs]:"none",[$r]:!1,[qa]:!1,[ss]:!1,[ar]:"never",[xa]:"never",[Ca]:"never",[Ma]:"never",[Fr]:"all",[Nr]:!1,[Ta]:!1,[Hr]:"none",[za]:"none",[Ur]:!1,[Oa]:"chevrons",[Ga]:"none",[Ar]:"none",[_s]:"outside",[`${bs}.enabled`]:!1,[`${Cs}.enabled`]:!1,[`${Cs}.enabled`]:!1,[`${xs}.enabled`]:!1,[_a]:!1,[va]:!1,[ya]:!1,[fa]:!1,[br]:!1,[wr]:!1,[xr]:!1,[yr]:!1,[La]:!1,[Fa]:!1,[Va]:!1,[Na]:!1,[us]:!1,[hs]:!1,[ms]:!1,[ds]:!1,[Is]:!1,[Ds]:10,[Os]:!1,[js]:!1,[Da]:!1,[Bi]:!1,[Qi]:10},bv=(e,t)=>{const n=Ns(nl).safeParse(e);if(n.success){const e=n.data;Object.entries(yv).forEach((([n,i])=>((e,t,n,i)=>{void 0===tv(e,n)&&ev(t,n,i)})(e,t,n,i)))}return t},wv={box_shadow:"none",border_radius:"0px"};var xv,Cv;!function(e){e.INITIALIZING="initializing",e.INITIALIZED="initialized"}(xv||(xv={}));class Mv{constructor(){this._state=new Map}async initializeMultipleIfNecessary(e){return(await Ap(Object.entries(e),(async([e,t])=>this.initializeIfNecessary(e,t)))).every(Boolean)}async initializeIfNecessary(e,t){const n=this._state.get(e);return n===xv.INITIALIZED||n!==xv.INITIALIZING&&(t?(this._state.set(e,xv.INITIALIZING),await t()?this._state.set(e,xv.INITIALIZED):this.uninitialize(e)):this._state.set(e,xv.INITIALIZED),!0)}uninitialize(e){return this._state.delete(e)}isInitialized(e){return this._state.get(e)==xv.INITIALIZED}isInitializedMultiple(e){return e.every((e=>this.isInitialized(e)))}}!function(e){e.LANGUAGES="languages",e.SIDE_LOAD_ELEMENTS="side-load-elements",e.MEDIA_PLAYERS="media-players",e.CAMERAS="cameras",e.MICROPHONE_CONNECT="microphone-connect"}(Cv||(Cv={}));class Sv{constructor(e,t){this._api=e,this._initializer=t??new Mv}isInitializedMandatory(){const e=this._api.getConfigManager().getConfig();return!!e&&(this._initializer.isInitializedMultiple([Cv.LANGUAGES,Cv.SIDE_LOAD_ELEMENTS,Cv.CAMERAS,...e.live.microphone.always_connected?[Cv.MICROPHONE_CONNECT]:[]])&&this._api.getViewManager().hasView())}async initializeMandatory(){const e=this._api.getHASSManager().getHASS();if(!e)return!1;if(!await this._initializer.initializeMultipleIfNecessary({[Cv.LANGUAGES]:async()=>await(async e=>{const t=wm(e);return"it"===t?ym[t]=await import("./lang-it-9cdf0b26.js"):"pt"===t?ym[t]=await import("./lang-pt-PT-3cac9c35.js"):"pt_BR"===t&&(ym[t]=await import("./lang-pt-BR-2afd5fb1.js")),t&&(bm=t),!0})(e),[Cv.SIDE_LOAD_ELEMENTS]:async()=>await df()}))return!1;const t=this._api.getConfigManager().getConfig();if(!t)return!1;if(!await this._initializer.initializeMultipleIfNecessary({[Cv.CAMERAS]:async()=>await this._api.getCameraManager().initializeCamerasFromConfig(),...t.live.microphone.always_connected&&{[Cv.MICROPHONE_CONNECT]:async()=>await this._api.getMicrophoneManager().connect()}}))return!1;if(!this._api.getMessageManager().hasMessage()){this._api.getQueryStringManager().hasViewRelatedActions()?this._api.getQueryStringManager().executeViewRelated():this._api.getViewManager().setViewDefault()}return!0}async initializeBackgroundIfNecessary(){const e=this._api.getHASSManager().getHASS(),t=this._api.getConfigManager().getConfig();return!(!e||!t)&&(!!this._initializer.isInitializedMultiple([...t.menu.buttons.media_player.enabled?[Cv.MEDIA_PLAYERS]:[]])||!!await this._initializer.initializeMultipleIfNecessary({...t.menu.buttons.media_player.enabled&&{[Cv.MEDIA_PLAYERS]:async()=>await this._api.getMediaPlayerManager().initialize()}})&&(this._api.getCardElementManager().update(),!0))}uninitialize(e){return this._initializer.uninitialize(e)}}class $v{constructor(e){this._config=null,this._overriddenConfig=null,this._rawConfig=null,this._cardWideConfig=null,this._api=e}hasConfig(){return!!this.getConfig()}getConfig(){return this._overriddenConfig??this._config}getCardWideConfig(){return this._cardWideConfig}getNonOverriddenConfig(){return this._config}getRawConfig(){return this._rawConfig}setConfig(e){if(!e)throw new Error(xm("error.invalid_configuration"));const t=nl.safeParse(e);if(!t.success){const n=sv(e),i=Fs(t.error);let a="";throw n&&(a=`${xm("error.upgrade_available")}. `),new Error(a+`${xm("error.invalid_configuration")}: `+(i&&i.size?JSON.stringify([...i],null," "):xm("error.invalid_configuration_no_hint")))}const n="low"!==t.data.performance.profile?t.data:bv(e,t.data);this._rawConfig=e,hp(this._config,n)||(this._config=n,this._cardWideConfig={performance:n.performance,debug:n.debug},this._api.getConditionsManager().setConditionsFromConfig(),this._api.getConditionsManager().setState({view:void 0,displayMode:void 0,camera:void 0}),this._api.getMediaLoadedInfoManager().clear(),this._api.getViewManager().reset(),this._api.getMessageManager().reset(),this._api.getAutomationsManager().setAutomationsFromConfig(),this._api.getStyleManager().setPerformance(),this._api.getCardElementManager().update(),this.computeOverrideConfig())}computeOverrideConfig(){const e=this._api.getConditionsManager();if(!this._config)return;const t=_v(e,this._config,this._config.overrides);if(hp(t,this._overriddenConfig))return;const n=this._overriddenConfig;this._overriddenConfig=t,this._api.getStyleManager().setMinMaxHeight(),!n||hp(n?.cameras,this._overriddenConfig?.cameras)&&hp(n?.cameras_global,this._overriddenConfig?.cameras_global)||this._api.getInitializationManager().uninitialize(Cv.CAMERAS),n&&n?.live.microphone.always_connected!==this._overriddenConfig?.live.microphone.always_connected&&this._api.getInitializationManager().uninitialize(Cv.MICROPHONE_CONNECT),this._api.getCardElementManager().update()}}const Ev=(e,t="download")=>{const n=new URL(e).origin===window.location.origin,i=e.startsWith("data:");if(navigator.userAgent.startsWith("Home Assistant/")||navigator.userAgent.startsWith("HomeAssistant/")||!n&&!i)window.open(e,"_blank");else{const n=document.createElement("a");n.setAttribute("download",t),n.href=e,n.click(),n.remove()}},kv=async(e,t,n)=>{const i=await t.getMediaDownloadPath(n);if(!i)throw new mp(xm("error.download_no_media"));let a=i.endpoint;if(i.sign){let t;try{t=await Jp(e,i.endpoint)}catch(e){Cp(e)}if(!t)throw new mp(xm("error.download_sign_failed"));a=t}Ev(a)},Av=e=>{const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;const n=t.getContext("2d");return n?(n.drawImage(e,0,0,t.width,t.height),t.toDataURL("image/jpeg")):null};class Tv{constructor(e){this._api=e}async downloadViewerMedia(){const e=this._api.getViewManager().getView()?.queryResults?.getSelectedResult(),t=this._api.getHASSManager().getHASS();if(!e||!t)return!1;try{await kv(t,this._api.getCameraManager(),e)}catch(e){return this._api.getMessageManager().setErrorIfHigherPriority(e),!1}return!0}async downloadScreenshot(){const e=await(this._api.getMediaLoadedInfoManager().get()?.player?.getScreenshotURL());e&&Ev(e,(e=>{if(e?.is("live")||e?.is("image"))return`${e.view}-${e.camera}-${Dg(new Date,"yyyy-MM-dd-HH-mm-ss")}.jpg`;if(e?.isViewerView()){const t=e.queryResults?.getSelectedResult(),n=t?.getID()??null;return`${e.view}-${e.camera}${n?`-${n}`:""}.jpg`}return"screenshot.jpg"})(this._api.getViewManager().getView()))}}class Iv{constructor(e){this._expanded=!1,this._api=e}initialize(){this._setConditionState()}isExpanded(){return this._expanded}toggleExpanded(){this.setExpanded(!this._expanded)}setExpanded(e){e&&this._api.getFullscreenManager().isInFullscreen()&&this._api.getFullscreenManager().stopFullscreen(),this._expanded=e,this._setConditionState(),this._api.getCardElementManager().update()}_setConditionState(){this._api.getConditionsManager()?.setState({expand:this._expanded})}}const Dv=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],zv=(()=>{if("undefined"==typeof document)return!1;const e=Dv[0],t={};for(const n of Dv){const i=n?.[1];if(i in document){for(const[i,a]of n.entries())t[e[i]]=a;return t}}return!1})(),jv={change:zv.fullscreenchange,error:zv.fullscreenerror};let Ov={request:(e=document.documentElement,t)=>new Promise(((n,i)=>{const a=()=>{Ov.off("change",a),n()};Ov.on("change",a);const r=e[zv.requestFullscreen](t);r instanceof Promise&&r.then(a).catch(i)})),exit:()=>new Promise(((e,t)=>{if(!Ov.isFullscreen)return void e();const n=()=>{Ov.off("change",n),e()};Ov.on("change",n);const i=document[zv.exitFullscreen]();i instanceof Promise&&i.then(n).catch(t)})),toggle:(e,t)=>Ov.isFullscreen?Ov.exit():Ov.request(e,t),onchange(e){Ov.on("change",e)},onerror(e){Ov.on("error",e)},on(e,t){const n=jv[e];n&&document.addEventListener(n,t,!1)},off(e,t){const n=jv[e];n&&document.removeEventListener(n,t,!1)},raw:zv};Object.defineProperties(Ov,{isFullscreen:{get:()=>Boolean(document[zv.fullscreenElement])},element:{enumerable:!0,get:()=>document[zv.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[zv.fullscreenEnabled])}}),zv||(Ov={isEnabled:!1});var Rv=Ov;class Pv{constructor(e){this._fullscreenHandler=()=>{this._api.getExpandManager().setExpanded(!1),this._setConditionState(),this._api.getCardElementManager().update()},this._api=e}initialize(){this._setConditionState()}connect(){Rv.isEnabled&&Rv.on("change",this._fullscreenHandler)}disconnect(){Rv.isEnabled&&Rv.off("change",this._fullscreenHandler)}isInFullscreen(){return Rv.isEnabled&&Rv.isFullscreen}toggleFullscreen(){Rv.toggle(this._api.getCardElementManager().getElement())}stopFullscreen(){Rv.exit()}_setConditionState(){this._api.getConditionsManager()?.setState({fullscreen:this.isInFullscreen()})}}class Nv{constructor(e){this._hass=null,this._api=e}getHASS(){return this._hass}setHASS(e){if(((e,t)=>e?.connected!==t?.connected)(this._hass,e)&&(e?.connected?this._api.getMessageManager().resetType("connection"):this._api.getMessageManager().setMessageIfHigherPriority({message:xm("error.reconnecting"),icon:"mdi:lan-disconnect",type:"connection",dotdotdot:!0})),!e)return;const t=this._hass;this._hass=e,this._isAutomatedViewUpdateAllowed()&&tf(this._hass,t,[...this._api.getConfigManager().getConfig()?.view.update_entities??[],...(()=>{const e=this._api.getViewManager().getView(),t=this._api.getCameraManager();return e&&t?t?.getStore().getCameraConfig(e.camera)??null:null})()?.triggers.entities??[]])?this._api.getViewManager().setViewDefault():tf(this._hass,t,[...this._api.getConfigManager().getConfig()?.view.render_entities??[],...this._api.getMediaPlayerManager().getMediaPlayers()])&&this._api.getCardElementManager().update(),this._api.getTriggersManager().updateTriggerHAState(t),this._api.getConditionsManager().hasHAStateConditions()&&this._api.getConditionsManager().setState({state:this._hass.states}),this._api.getStyleManager().setLightOrDarkMode()}_isAutomatedViewUpdateAllowed(){return this._api.getConfigManager().getConfig()?.view.update_force||!this._api.getInteractionManager().hasInteraction()}}var Lv=function(){return zl.Date.now()},Fv=/\s/;var Vv=/^\s+/;function Hv(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Fv.test(e.charAt(t)););return t}(e)+1).replace(Vv,""):e}var Uv=NaN,Zv=/^[-+]0x[0-9a-f]+$/i,Wv=/^0b[01]+$/i,qv=/^0o[0-7]+$/i,Bv=parseInt;function Qv(e){if("number"==typeof e)return e;if(wf(e))return Uv;if(Zl(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Zl(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Hv(e);var n=Wv.test(e);return n||qv.test(e)?Bv(e.slice(2),n?2:8):Zv.test(e)?Uv:+e}var Yv="Expected a function",Gv=Math.max,Kv=Math.min;function Xv(e,t,n){var i,a,r,s,o,c,l=0,d=!1,u=!1,h=!0;if("function"!=typeof e)throw new TypeError(Yv);function m(t){var n=i,r=a;return i=a=void 0,l=t,s=e.apply(r,n)}function g(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=r}function p(){var e=Lv();if(g(e))return f(e);o=setTimeout(p,function(e){var n=t-(e-c);return u?Kv(n,r-(e-l)):n}(e))}function f(e){return o=void 0,h&&i?m(e):(i=a=void 0,s)}function _(){var e=Lv(),n=g(e);if(i=arguments,a=this,c=e,n){if(void 0===o)return function(e){return l=e,o=setTimeout(p,t),d?m(e):s}(c);if(u)return clearTimeout(o),o=setTimeout(p,t),m(c)}return void 0===o&&(o=setTimeout(p,t)),s}return t=Qv(t)||0,Zl(n)&&(d=!!n.leading,r=(u="maxWait"in n)?Gv(Qv(n.maxWait)||0,t):r,h="trailing"in n?!!n.trailing:h),_.cancel=function(){void 0!==o&&clearTimeout(o),l=0,i=c=a=o=void 0},_.flush=function(){return void 0===o?s:f(Lv())},_}var Jv="Expected a function";function ey(e,t,n){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError(Jv);return Zl(n)&&(i="leading"in n?!!n.leading:i,a="trailing"in n?!!n.trailing:a),Xv(e,t,{leading:i,maxWait:t,trailing:a})}class ty{constructor(e){this._timer=new pl,this.reportInteraction=ey((()=>{this._reportInteraction()}),1e3),this._api=e}initialize(){this._api.getConditionsManager().setState({interaction:!1})}hasInteraction(){return this._timer.isRunning()}_reportInteraction(){this._timer.stop();const e=this._api.getConfigManager().getConfig()?.view.interaction_seconds;e&&(this._api.getConditionsManager().setState({interaction:!0}),this._timer.start(e,(()=>{this._api.getConditionsManager().setState({interaction:!1}),this._api.getTriggersManager().isTriggered()||(this._api.getConfigManager().getConfig()?.view.reset_after_interaction&&this._api.getViewManager().setViewDefault(),this._api.getStyleManager().setLightOrDarkMode())})))}}const ny=50,iy=ny;function ay(e,t){let n;return n=e instanceof Event?e.composedPath()[0]:e,n instanceof HTMLImageElement?{width:n.naturalWidth,height:n.naturalHeight,...t}:n instanceof HTMLVideoElement?{width:n.videoWidth,height:n.videoHeight,...t}:n instanceof HTMLCanvasElement?{width:n.width,height:n.height,player:t?.player,...t}:null}function ry(e,t,n){const i=ay(t,n);i&&sy(e,i)}function sy(e,t){_p(e,"media:loaded",t)}function oy(e){_p(e,"media:unloaded")}function cy(e){_p(e,"media:volumechange")}function ly(e){_p(e,"media:play")}function dy(e){_p(e,"media:pause")}class uy{constructor(e){this._current=null,this._lastKnown=null,this._api=e}initialize(){this.clear()}set(e){var t;(t=e).height>=ny&&t.width>=iy&&(Np(this._api.getConfigManager().getCardWideConfig(),"Frigate Card media load: ",e),this._current=e,this._lastKnown=e,this._api.getConditionsManager().setState({media_loaded:!0}),this._api.getStyleManager().setExpandedMode(),this._api.getCardElementManager().update())}get(){return this._current}getLastKnown(){return this._lastKnown}clear(){this._current=null,this._api.getConditionsManager().setState({media_loaded:!1})}has(){return!!this._current}}class hy{static isEvent(e){return this.isClip(e)||this.isSnapshot(e)}static isRecording(e){return"recording"===e.getMediaType()}static isClip(e){return"clip"===e.getMediaType()}static isSnapshot(e){return"snapshot"===e.getMediaType()}static isVideo(e){return this.isClip(e)||this.isRecording(e)}}class my{constructor(e){this._mediaPlayers=[],this._api=e}getMediaPlayers(){return this._mediaPlayers}hasMediaPlayers(){return this._mediaPlayers.length>0}async initialize(){const e=this._api.getHASSManager().getHASS();if(!e)return!1;const t=Object.keys(e.states).filter((t=>{if(t.startsWith("media_player.")){const n=e.states[t];if(n&&"unavailable"!==n.state&&Lp(n,131072))return!0}return!1}));let n=null;try{n=await this._api.getEntityRegistryManager().getEntities(e,t)}catch(e){Cp(e)}return this._mediaPlayers=t.filter((e=>{const t=n?.get(e);return!t||!t.hidden_by})),!0}async stop(e){await(this._api.getHASSManager().getHASS()?.callService("media_player","media_stop",{entity_id:e}))}async playLive(e,t){const n=this._api.getCameraManager().getStore().getCameraConfig(t);n&&("dashboard"===n.cast?.method?await this._playLiveDashboard(e,n):await this._playLiveStandard(e,t,n))}async _playLiveStandard(e,t,n){const i=this._api.getHASSManager().getHASS(),a=n?.camera_entity??null;if(!i||!a)return;const r=this._api.getCameraManager().getCameraMetadata(t)?.title??null,s=i.states[a]?.attributes?.entity_picture??null;await i.callService("media_player","play_media",{entity_id:e,media_content_id:`media-source://camera/${a}`,media_content_type:"application/vnd.apple.mpegurl",extra:{...r&&{title:r},...s&&{thumb:s}}})}async _playLiveDashboard(e,t){const n=this._api.getHASSManager().getHASS();if(!n)return;const i=t.cast?.dashboard;i?.dashboard_path&&i?.view_path?await n.callService("cast","show_lovelace_view",{entity_id:e,dashboard_path:i.dashboard_path,view_path:i.view_path}):this._api.getMessageManager().setMessageIfHigherPriority({type:"error",icon:"mdi:cast",message:xm("error.no_dashboard_or_view")})}async playMedia(e,t){const n=this._api.getHASSManager().getHASS();if(!n||!t)return;const i=t.getTitle(),a=t.getThumbnail();await n.callService("media_player","play_media",{entity_id:e,media_content_id:t.getContentID(),media_content_type:hy.isVideo(t)?"video":"image",extra:{...i&&{title:i},...a&&{thumb:a}}})}}class gy{constructor(e){this._message=null,this._api=e}getMessage(){return this._message}hasMessage(){return!!this._message}hasErrorMessage(){return"error"===this._message?.type}reset(){const e=this.hasMessage();this._message=null,e&&this._api.getCardElementManager().update()}resetType(e){this._message?.type===e&&this.reset()}setErrorIfHigherPriority(e){e instanceof Error&&(Cp(e),this.setMessageIfHigherPriority({message:e.message,type:"error",...e instanceof mp&&{context:e.context}}))}setMessageIfHigherPriority(e){const t=this._message?gp[this._message.type]:0,n=gp[e.type];return!(this._message&&n<t)&&(this._message=e,this._api.getMediaLoadedInfoManager().clear(),this._api.getCardElementManager().scrollReset(),this._api.getCardElementManager().update(),!0)}}class py{constructor(e){this._timer=new pl,this._listeners=[],this._mute=!0,this._api=e}initialize(){this._setConditionState()}async connect(){try{this._stream=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1})}catch(e){return Cp(e),this._stream=null,this._api.getCardElementManager().update(),!1}return this._setMute(),this._setConditionState(),!0}disconnect(){this._stream?.getTracks().forEach((e=>e.stop())),this._stream=void 0,this._setConditionState(),this._api.getCardElementManager().update()}getStream(){return this._stream??void 0}mute(){const e=this.isMuted();this._mute=!0,this._setMute(),this._setConditionState(),e||this._callListeners("muted")}async unmute(){const e=!this.isMuted(),t=()=>{this._mute=!1,this._setMute()};this.isConnected()||this.isForbidden()?this.isConnected()&&t():(t(),await this.connect()),this._setConditionState(),e||this._callListeners("unmuted")}isConnected(){return!!this._stream}isForbidden(){return null===this._stream}isMuted(){return!this._stream||this._stream.getTracks().every((e=>!e.enabled))}addListener(e){this._listeners.push(e)}removeListener(e){this._listeners=this._listeners.filter((t=>t!==e))}_callListeners(e){this._listeners.forEach((t=>t(e)))}_setMute(){this._stream?.getTracks().forEach((e=>{e.enabled=!this._mute})),this._startTimer(),this._api.getCardElementManager().update()}_startTimer(){const e=this._api.getConfigManager().getConfig()?.live.microphone;if(e?.always_connected)return;const t=e?.disconnect_seconds??0;t&&this._timer.start(t,(()=>{this.disconnect()}))}_setConditionState(){this._api.getConditionsManager().setState({microphone:{muted:this.isMuted(),connected:this.isConnected()}})}}class fy{constructor(e){this.executeNonViewRelated=()=>{this._executeNonViewRelated(this._calculateIntent())},this.executeViewRelated=()=>{this._executeViewRelated(this._calculateIntent())},this.executeAll=()=>{const e=this._calculateIntent();this._executeViewRelated(e),this._executeNonViewRelated(e)},this._isViewAction=e=>{switch(e.frigate_card_action){case"clip":case"clips":case"diagnostics":case"image":case"live":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":return!0}return!1},this._api=e}hasViewRelatedActions(){return!!this._calculateIntent().view}_executeViewRelated(e){e.view&&(e.view.default?this._api.getViewManager().setViewDefault({...e.view.cameraID&&{cameraID:e.view.cameraID},...e.view.substream&&{substream:e.view.substream}}):this._api.getViewManager().setViewByParameters({...e.view.viewName&&{viewName:e.view.viewName},...e.view.cameraID&&{cameraID:e.view.cameraID},...e.view.substream&&{substream:e.view.substream}}))}_executeNonViewRelated(e){this._api.getCardElementManager().hasUpdated()&&e.other?.forEach((e=>this._api.getActionsManager().executeFrigateAction(e)))}_calculateIntent(){const e={};for(const t of this._getActions())this._isViewAction(t)?((e.view??={}).viewName=t.frigate_card_action,(e.view??={}).default=void 0):"default"===t.frigate_card_action?((e.view??={}).default=!0,(e.view??={}).viewName=void 0):"camera_select"===t.frigate_card_action?(e.view??={}).cameraID=t.camera:"live_substream_select"===t.frigate_card_action?(e.view??={}).substream=t.camera:(e.other??=[]).push(t);return e}_getActions(){const e=new URLSearchParams(window.location.search),t=[],n=new RegExp(/^frigate-card-action([.:](?<cardID>\w+))?[.:](?<action>\w+)/);for(const[i,a]of e.entries()){const e=i.match(n);if(!e||!e.groups)continue;const r=e.groups.cardID,s=e.groups.action;let o=null;switch(s){case"camera_select":case"live_substream_select":a&&(o=sl(s,a,{cardID:r}));break;case"camera_ui":case"clip":case"clips":case"default":case"diagnostics":case"download":case"expand":case"image":case"live":case"menu_toggle":case"recording":case"recordings":case"snapshot":case"snapshots":case"timeline":o=rl(s,{cardID:r});break;default:console.warn(`Frigate card received unknown card action in query string: ${s}`)}o&&t.push(o)}return t}}class _y{constructor(e){this._api=e}setLightOrDarkMode(){const e=this._api.getConfigManager().getConfig(),t="on"===e?.view.dark_mode||"auto"===e?.view.dark_mode&&(!this._api.getInteractionManager().hasInteraction()||!!this._api.getHASSManager().getHASS()?.themes.darkMode);zp(this._api.getCardElementManager().getElement(),t,"dark")}setExpandedMode(){const e=this._api.getCardElementManager().getElement(),t=this._api.getViewManager().getView(),n=this._api.getMediaLoadedInfoManager().getLastKnown();e.style.setProperty("--frigate-card-expand-aspect-ratio",t?.isAnyMediaView()&&n?`${n.width} / ${n.height}`:"unset");const i=t?.isGrid();e.style.setProperty("--frigate-card-expand-width",!i&&t?.isAnyMediaView()?"none":"var(--frigate-card-expand-max-width)"),e.style.setProperty("--frigate-card-expand-height",!i&&t?.isAnyMediaView()?"none":"var(--frigate-card-expand-max-height)")}setMinMaxHeight(){const e=this._api.getConfigManager().getConfig();if(e){const t=this._api.getCardElementManager().getElement();t.style.setProperty("--frigate-card-min-height",e.dimensions.min_height),t.style.setProperty("--frigate-card-max-height",e.dimensions.max_height)}}setPerformance(){((e,t)=>{const n=t?.style??{};for(const t of Object.keys(n)){const i=`--frigate-card-css-${t.replaceAll("_","-")}`;!1===n[t]?e.style.setProperty(i,wv[t]):e.style.removeProperty(i)}})(this._api.getCardElementManager().getElement(),this._api.getConfigManager().getCardWideConfig()?.performance)}_isAspectRatioEnforced(e,t){const n=e.dimensions.aspect_ratio_mode;return!(this._api.getFullscreenManager().isInFullscreen()||this._api.getExpandManager().isExpanded()||"unconstrained"===n||"dynamic"===n&&(!t||t?.isAnyMediaView()||t?.is("timeline")||t?.is("diagnostics")))}getAspectRatioStyle(){const e=this._api.getConfigManager().getConfig(),t=this._api.getViewManager().getView();if(e){if(!this._isAspectRatioEnforced(e,t))return"auto";const n=e.dimensions.aspect_ratio_mode,i=this._api.getMediaLoadedInfoManager().getLastKnown();return i&&"dynamic"===n?`${i.width} / ${i.height}`:`${e.dimensions.aspect_ratio[0]} / ${e.dimensions.aspect_ratio[1]}`}return"16 / 9"}}class vy{constructor(e){this._triggeredCameras=new Map,this._triggeredCameraTimers=new Map,this._triggeredState=new Set,this._api=e}getTriggeredCameraIDs(){return new Set(this._triggeredCameras.keys())}isTriggered(){return!!this._triggeredCameras.size}getMostRecentlyTriggeredCameraID(){const e=t_([...this._triggeredCameras.entries()],(e=>e[1].getTime()),"desc");return e.length?e[0][0]:null}updateTriggerHAState(e){const t=this._api.getConfigManager().getConfig()?.view.scan;if(!t||!t.enabled)return;const n=this._api.getHASSManager().getHASS();let i=!1;const a=this._api.getCameraManager().getStore().getVisibleCameraIDs();for(const[t,r]of this._api.getCameraManager().getStore().getCameraConfigEntries(a)){const a=r.triggers.entities,s=ef(n,e,a,{stateOnly:!0}).some((e=>uf(e.newState))),o=a.every((e=>!uf(n?.states[e])));s?(this._triggeredState.add(t),i=!0):o&&this._triggeredState.has(t)&&(this._triggeredState.delete(t),i=!0)}i&&this._evaluateTriggers()}updateView(e){e?.camera!==this._api.getViewManager().getView()?.camera&&this._evaluateTriggers()}_evaluateTriggers(){const e=this._api.getConfigManager().getConfig()?.view.scan;if(!e)return;const t=new Date;for(const n of this._triggeredState.keys())this._triggeredCameras.has(n)||e.filter_selected_camera&&n!==this._api.getViewManager().getView()?.camera||(this._triggeredCameras.set(n,t),this._setConditionState(),this._triggerAction(n));for(const e of this._triggeredCameras.keys())this._triggeredState.has(e)||this._startUntriggerTimer(e)}_hasAllowableInteractionStateForAction(){const e=this._api.getConfigManager().getConfig()?.view.scan,t=this._api.getInteractionManager().hasInteraction();return!!e&&("all"===e.actions.interaction_mode||"active"===e.actions.interaction_mode&&t||"inactive"===e.actions.interaction_mode&&!t)}_triggerAction(e){const t=this._api.getConfigManager().getConfig()?.view.scan.actions.trigger;"live"===t&&this._hasAllowableInteractionStateForAction()&&this._api.getViewManager().setViewByParameters({viewName:"live",cameraID:e}),this._api.getCardElementManager().update()}_setConditionState(){this._api.getConditionsManager().setState({triggered:this._triggeredCameras.size?new Set(this._triggeredCameras.keys()):void 0})}_untriggerAction(e){const t=this._api.getConfigManager().getConfig()?.view.scan.actions.untrigger;"default"===t&&this._hasAllowableInteractionStateForAction()&&this._api.getViewManager().setViewDefault(),this._triggeredCameras.delete(e),this._deleteTimer(e),this._setConditionState(),this._api.getCardElementManager().update()}_startUntriggerTimer(e){this._deleteTimer(e);const t=new pl;this._triggeredCameraTimers.set(e,t),t.start(
/* istanbul ignore next: the case of config being null here cannot be
           reached, as there's no way to have the untrigger call happen without
           a config. -- @preserve */
this._api.getConfigManager().getConfig()?.view.scan.untrigger_seconds??0,(()=>{this._untriggerAction(e)}))}_deleteTimer(e){this._triggeredCameraTimers.get(e)?.stop(),this._triggeredCameraTimers.delete(e)}}function yy(e,t){return t="function"==typeof t?t:void 0,e&&e.length?$_(e,void 0,t):[]}class by{constructor(e){this._queries=null,e&&(this._queries=e)}clone(){return zh(this)}getQueries(){return this._queries}setQueries(e){return this._queries=e,this}getQueryCameraIDs(){if(!this._queries)return null;const e=new Set;return this._queries.forEach((t=>[...t.cameraIDs].forEach((t=>e.add(t))))),e}setQueryCameraIDs(e){if(!this._queries)return this;const t=[];return this._queries.forEach((n=>t.push({...n,cameraIDs:wp(e)}))),this._queries=yy(t,hp),this}hasQueriesForCameraIDs(e){for(const t of e)if(!this._queries?.some((e=>e.cameraIDs.has(t))))return!1;return!0}}class wy extends by{convertToClipsQueries(){for(const e of this._queries??[])delete e.hasSnapshot,e.hasClip=!0;return this}}class xy extends by{}class Cy{static areEventQueries(e){return e instanceof wy}static areRecordingQueries(e){return e instanceof xy}static getQueriesType(e){return this.areEventQueries(e)?"event":this.areRecordingQueries(e)?"recording":null}}class My{constructor(e){this.view=e.view,this.camera=e.camera,this.query=e.query??null,this.queryResults=e.queryResults??null,this.context=e.context??null,this.displayMode=e.displayMode??null}static isMajorMediaChange(e,t){return!e||!t||e.view!==t.view||e.camera!==t.camera||"live"===t.view&&e.context?.live?.overrides?.get(e.camera)!==t.context?.live?.overrides?.get(t.camera)||"live"!==t.view&&e.queryResults!==t.queryResults}static adoptFromViewIfAppropriate(e,t){if(!t)return;let n=null;if(Cy.areEventQueries(t.query)){const e=t.query.getQueries();e?.every((e=>e.hasClip))||e?.every((e=>void 0===e.hasClip&&void 0===e.hasSnapshot))?n="clips":e?.every((e=>e.hasSnapshot))&&(n="snapshots")}else Cy.areRecordingQueries(t.query)&&(n="recordings");const i=!e.query||!e.queryResults,a=t.isViewerView()&&e.isGalleryView()&&e.view===n,r=t?.is("media")&&e.is("media");if(i&&(a&&t.query&&t.queryResults?(e.query=t.query,e.queryResults=t.queryResults):r&&n&&(e.view="clips"===n?"clip":"snapshots"===n?"snapshot":"recording")),t.is("live")&&e.is("live")&&t.context?.live?.overrides&&!e.context?.live?.overrides){const n=e.context?.live??{};n.overrides=t.context.live.overrides,e.mergeInContext({live:n})}}clone(){return new My({view:this.view,camera:this.camera,query:this.query?.clone()??null,queryResults:this.queryResults?.clone()??null,context:this.context,displayMode:this.displayMode})}evolve(e){return new My({view:void 0!==e.view?e.view:this.view,camera:void 0!==e.camera?e.camera:this.camera,query:void 0!==e.query?e.query:this.query?.clone()??null,queryResults:void 0!==e.queryResults?e.queryResults:this.queryResults?.clone()??null,context:void 0!==e.context?e.context:this.context,displayMode:void 0!==e.displayMode?e.displayMode:this.displayMode})}mergeInContext(e){return this.context=am({},this.context,e),this}removeContext(e){return this.context&&delete this.context[e],this}removeContextProperty(e,t){const n=this.context?.[e];return n&&delete n[t],this}is(e){return this.view==e}isGalleryView(){return["clips","snapshots","recordings"].includes(this.view)}isAnyMediaView(){return this.isViewerView()||this.is("live")||this.is("image")}isViewerView(){return["media","clip","snapshot","recording"].includes(this.view)}supportsMultipleDisplayModes(){return this.isViewerView()||this.is("live")}getDefaultMediaType(){return["clip","clips"].includes(this.view)?"clips":["snapshot","snapshots"].includes(this.view)?"snapshots":["recording","recordings"].includes(this.view)?"recordings":null}isGrid(){return"grid"===this.displayMode}dispatchChangeEvent(e){_p(e,"view:change",this)}}const Sy=(e,t)=>{_p(e,"view:change-context",t)};var $y='.dotdotdot:after {\n  animation: dots 2s linear infinite;\n  content: "";\n  display: inline-block;\n  width: 3em;\n}\n@keyframes dots {\n  0%, 20% {\n    content: ".";\n  }\n  40% {\n    content: "..";\n  }\n  60% {\n    content: "...";\n  }\n  90%, 100% {\n    content: "";\n  }\n}\n\n:host {\n  display: block;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  user-select: text;\n  -webkit-user-select: text;\n  color: var(--primary-text-color);\n}\n\ndiv.wrapper {\n  height: 100%;\n}\n\ndiv.message {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  height: 100%;\n}\n\ndiv.message.padded {\n  padding: 20px;\n}\n\ndiv.message div.contents {\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  margin-top: auto;\n  margin-bottom: auto;\n  min-width: 0;\n}\n\ndiv.message div.icon {\n  padding: 10px;\n}\n\n.vertical {\n  flex-direction: column;\n}\n\n.message a {\n  color: var(--primary-text-color, white);\n  word-break: break-word;\n}\n\n.message pre {\n  margin-top: 20px;\n  white-space: pre-wrap;\n  word-break: break-all;\n}';let Ey=class extends ne{constructor(){super(...arguments),this.message=""}render(){const e=this.icon?this.icon:"mdi:information-outline",t={dotdotdot:!!this.dotdotdot};return P` <div class="wrapper">
      <div class="message padded">
        <div class="icon">
          <ha-icon icon="${e}"> </ha-icon>
        </div>
        <div class="contents">
          <span class="${he(t)}">
            ${this.message?P`${this.message}${this.context&&"string"==typeof this.context?": "+this.context:""}`:""}
          </span>
          ${this.context&&"string"!=typeof this.context?P`<pre>${JSON.stringify(this.context,null,2)}</pre>`:""}
        </div>
      </div>
    </div>`}static get styles(){return s($y)}};e([se({attribute:!1})],Ey.prototype,"message",void 0),e([se({attribute:!1})],Ey.prototype,"context",void 0),e([se({attribute:!1})],Ey.prototype,"icon",void 0),e([se({attribute:!0,type:Boolean})],Ey.prototype,"dotdotdot",void 0),Ey=e([ae("frigate-card-message")],Ey);let ky=class extends ne{render(){if(this.message)return P` <frigate-card-message
      .message=${P` ${this.message.message}.
        <a href="${ui}"> ${xm("error.troubleshooting")}</a>.`}
      .icon=${this.message.icon??"mdi:alert-circle"}
      .context=${this.message.context}
      .dotdotdot=${this.message.dotdotdot}
    >
    </frigate-card-message>`}static get styles(){return s($y)}};e([se({attribute:!1})],ky.prototype,"message",void 0),ky=e([ae("frigate-card-error-message")],ky);let Ay=class extends ne{constructor(){super(...arguments),this.message="",this.animated=!1,this.size="large"}render(){return P` <div class="message vertical">
      ${this.animated?P`<ha-circular-progress active="true" size="${this.size}">
          </ha-circular-progress>`:P`<ha-icon icon="mdi:timer-sand"></ha-icon>`}
      ${this.message?P`<span>${this.message}</span>`:P``}
    </div>`}static get styles(){return s($y)}};function Ty(e){return"error"===e?.type?P` <frigate-card-error-message
      .message=${e}
    ></frigate-card-error-message>`:e?P` <frigate-card-message
      .message=${e.message}
      .icon=${e.icon}
      .context=${e.context}
      .dotdotdot=${e.dotdotdot}
    ></frigate-card-message>`:P``}function Iy(e){return P`
    <frigate-card-progress-indicator
      class="${he(e?.classes??{})}"
      .size=${e?.size}
      ${e?.componentRef?Ee(e.componentRef):""}
      .message=${e?.message||""}
      .animated=${e?.cardWideConfig?.performance?.features.animated_progress_indicator??!0}
    >
    </frigate-card-progress-indicator>
  `}function Dy(e,t,n,i){_p(e,"message",{message:t,type:n,icon:i?.icon,context:i?.context})}function zy(e,t,n){Dy(e,t,"error",{context:n?.context})}function jy(e,t){t instanceof Error&&zy(e,t.message,{...t instanceof mp&&{context:t.context}})}e([se({attribute:!1})],Ay.prototype,"message",void 0),e([se({attribute:!1})],Ay.prototype,"animated",void 0),e([se({attribute:!1})],Ay.prototype,"size",void 0),Ay=e([ae("frigate-card-progress-indicator")],Ay);class Oy{constructor(e){this._results=e?.results??[],this._selectedIndex=this._getInitialSelectedIndex(e)}_getInitialSelectedIndex(e){return null!=e?.selectedIndex?e.selectedIndex:e?.results&&e.results.length?e?.selectApproach&&"last"!==e?.selectApproach?0:e.results.length-1:null}clone(){return new Oy({results:this._results,selectedIndex:this._selectedIndex})}getResults(){return this._results}getSelectedIndex(){return this._selectedIndex}getResultsCount(){return this.getResults().length}hasResults(){return 0!==this.getResultsCount()}getResult(e){return void 0===e?null:this._results[e]}getSelectedResult(){const e=this.getSelectedIndex();return null!==e?this.getResult(e):null}hasSelectedResult(){return null!==this.getSelectedResult()}resetSelectedResult(){this._selectedIndex=null}selectIndex(e){(null===e||e>=0&&e<this._results.length)&&(this._selectedIndex=e)}selectResultIfFound(e){for(const[t,n]of this._results.entries())if(e(n)){this.selectIndex(t);break}}selectBestResult(e){const t=e(this._results);null!==t&&this.selectIndex(t)}}class Ry{constructor(e){this._resultsTimestamp=null,this._cameras=new Map,this._resultsTimestamp=new Date,this._main=new Oy(e),this._buildByCameraSlices(e?.selectApproach)}_buildByCameraSlices(e){const t=new Map;for(const e of this._main.getResults()){const n=e.getCameraID(),i=t.get(n)??[];i.push(e),t.set(n,i)}for(const[n,i]of t.entries())this._cameras.set(n,new Oy({results:i,selectApproach:e}))}clone(){const e=new Ry;e._resultsTimestamp=this._resultsTimestamp,e._main=this._main.clone();for(const[t,n]of this._cameras.entries())e._cameras.set(t,n.clone());return e}isSupersetOf(e){const t=new Set(this._main.getResults()?.map((e=>e.getID()))),n=new Set(e._main.getResults()?.map((e=>e.getID())));return!(!t.size||!n.size||t.has(null)||n.has(null))&&((e,t)=>{for(const n of t)if(!e.has(n))return!1;return!0})(t,n)}getCameraIDs(){return new Set(this._cameras.keys())}getSlice(e){return e?this._cameras.get(e)??null:this._main}getResults(e){return this.getSlice(e)?.getResults()??null}getResultsCount(e){return this.getSlice(e)?.getResultsCount()??0}hasResults(e){return 0!==this.getSlice(e)?.getResultsCount()}getResult(e,t){return this.getSlice(t)?.getResult(e)??null}getSelectedIndex(e){return this.getSlice(e)?.getSelectedIndex()??null}getSelectedResult(e){return this.getSlice(e)?.getSelectedResult()??null}getMultipleSelectedResults(e){const t=[];if(!e||e.main){const e=this.getSelectedResult();e&&t.push(e)}const n=this._getCameraIDsFromCriteria(e);for(const e of n??[]){const n=this.getSelectedResult(e);n&&t.push(n)}return t}hasSelectedResult(e){return this.getSlice(e)?.hasSelectedResult()??!1}resetSelectedResult(e){return this.getSlice(e)?.resetSelectedResult(),this}getResultsTimestamp(){return this._resultsTimestamp}selectIndex(e,t){return this.getSlice(t)?.selectIndex(e),t||this.demoteMainSelectionToCameraSelection(),this}demoteMainSelectionToCameraSelection(){const e=this.getSelectedResult();if(e){const t=e.getCameraID();this.resetSelectedResult(t),this.selectResultIfFound((t=>t===e),{cameraID:t})}return this}promoteCameraSelectionToMainSelection(e){const t=this.getSelectedResult(e);return this.resetSelectedResult(),this.selectResultIfFound((e=>e===t)),this}_getCameraIDsFromCriteria(e){return e?.allCameras?this.getCameraIDs():e?.cameraID?new Set([e.cameraID]):null}selectResultIfFound(e,t){t&&!t?.main||(this._main.selectResultIfFound(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectResultIfFound(e);return this}selectBestResult(e,t){t&&!t.main||(this._main.selectBestResult(e),this.demoteMainSelectionToCameraSelection());const n=this._getCameraIDsFromCriteria(t);for(const t of n??[])this.getSlice(t)?.selectBestResult(e);return this}}const Py=async(e,t,n,i,a)=>{const r=a?.allCameras?t.getStore().getVisibleCameraIDs():t.getStore().getAllDependentCameras(i.camera);if(!r.size)return;const s=Ny(t,n,r,{eventsMediaType:a?.eventsMediaType});s&&(await Hy(e,t,i,s,{targetView:a?.targetView,select:a?.select}))?.dispatchChangeEvent(e)},Ny=(e,t,n,i)=>{const a=t.performance?.features.media_chunk_size??50,r=e.generateDefaultEventQueries(n,{limit:a,..."clips"===i?.eventsMediaType&&{hasClip:!0},..."snapshots"===i?.eventsMediaType&&{hasSnapshot:!0}});return r?new wy(r):null},Ly=async(e,t,n,i,a)=>{const r=a?.allCameras?t.getStore().getVisibleCameraIDs():t.getStore().getAllDependentCameras(i.camera);if(!r.size)return;const s=Fy(t,n,r);s&&(await Hy(e,t,i,s,{targetView:a?.targetView,select:a?.select}))?.dispatchChangeEvent(e)},Fy=(e,t,n)=>{const i=t.performance?.features.media_chunk_size??50,a=e.generateDefaultRecordingQueries(n,{limit:i});return a?new xy(a):null},Vy=async(e,t,n,i)=>{const a=n.getQueries();if(!a)return null;const r=await e.executeMediaQueries(a);if(!r)return null;const s=new Ry({results:r});let o={};const c=i?.targetCameraID??t.camera;return"time"===i?.select&&i?.targetTime&&(s.selectBestResult((e=>Uy(e,i.targetTime,c))),o={mediaViewer:{seek:i.targetTime}}),t.evolve({query:n,queryResults:s,view:i?.targetView,camera:c}).mergeInContext(o)},Hy=async(e,t,n,i,a)=>{try{return await Vy(t,n,i,{targetCameraID:a?.targetCameraID,targetView:a?.targetView,targetTime:a?.targetTime,select:a?.select})}catch(t){Cp(t),jy(e,t)}return null},Uy=(e,t,n)=>{let i;for(const[a,r]of e.entries()){const e=r.getStartTime(),s=r.getUsableEndTime();if(r.includesTime(t)&&e&&s){const t=s.getTime()-e.getTime();(!i||n&&i.cameraID!==n&&r.getCameraID()===n||t>i.duration&&(!n||i.cameraID!==n||r.getCameraID()===n))&&(i={index:a,duration:t,cameraID:r.getCameraID()})}}return i?i.index:null};class Zy{constructor(e){this._view=null,this._api=e}getView(){return this._view}hasView(){return!!this.getView()}setView(e){this._setView(e)}setViewDefault(e){const t=this._api.getConfigManager().getConfig();if(t){let n=e?.cameraID??null;if(!n&&this._view?.camera&&t.view.update_cycle_camera){const e=[...this._api.getCameraManager().getStore().getVisibleCameraIDs()],t=e.indexOf(this._view.camera);n=e[t+1>=e.length?0:t+1]}this.setViewByParameters({...e,viewName:t.view.default,...n&&{cameraID:n}}),this._api.getAutoUpdateManager().startDefaultViewTimer()}}setViewByParameters(e){const t=this._api.getConfigManager().getConfig();if(t){let n=null;const i=this._api.getCameraManager().getStore().getVisibleCameraIDs();i.size&&(n=e?.cameraID&&i.has(e.cameraID)?e.cameraID:i.keys().next().value);const a=e?.viewName??this._view?.view??t.view.default;if(n&&a&&this.isViewSupportedByCamera(n,a)){const i=this._view?.displayMode??this._getDefaultDisplayModeForView(a,t);let r=new My({view:a,camera:n,displayMode:i});e.substream&&(r=this._createViewWithSelectedSubstream(r,e.substream)),this._setView(r)}}}setViewWithNewContext(e){if(this._view)return this._setView(this._view?.clone().mergeInContext(e))}reset(){this._view=null}async setViewWithNewDisplayMode(e){const t=this._api.getHASSManager().getHASS();if(this._view&&t){const t=this._view.evolve({displayMode:e}),n=this._api.getCameraManager().getStore().getVisibleCameraCount(),i=t.query?.getQueryCameraIDs()?.size??0;if(!(t?.query&&i&&(t.isGrid()&&i<n||!t.isGrid()&&i>1)&&t&&t.query))return this._setView(t);{let e=null;try{e=await Vy(this._api.getCameraManager(),t,t.query.clone().setQueryCameraIDs(t.isGrid()?this._api.getCameraManager().getStore().getVisibleCameraIDs():t.camera))}catch(e){this._api.getMessageManager().setErrorIfHigherPriority(e)}if(e)return this._setView(e)}}}setViewWithSubstream(e){this._view&&this._setView(e?this._createViewWithSelectedSubstream(this._view,e):this._createViewWithNextStream(this._view))}setViewWithoutSubstream(){const e=this._createViewWithoutSubstream();if(e)return this._setView(e)}isViewSupportedByCamera(e,t){const n=this._api.getCameraManager().getCameraCapabilities(e);switch(t){case"live":case"image":case"diagnostics":return!0;case"clip":case"clips":return!!n?.supportsClips;case"snapshot":case"snapshots":return!!n?.supportsSnapshots;case"recording":case"recordings":return!!n?.supportsRecordings;case"timeline":return!!n?.supportsTimeline;case"media":return!!n?.supportsClips||!!n?.supportsSnapshots||!!n?.supportsRecordings}}_getDefaultDisplayModeForView(e,t){let n=null;switch(e){case"media":case"clip":case"recording":case"snapshot":n=t?.media_viewer.display?.mode??null;break;case"live":n=t?.live.display?.mode??null}return n??"single"}_setView(e){const t=this._view;My.adoptFromViewIfAppropriate(e,t),Np(this._api.getConfigManager().getCardWideConfig(),"Frigate Card view change: ",e),this._view=e,My.isMajorMediaChange(t,e)&&this._api.getMediaLoadedInfoManager().clear(),t?.view!==e.view&&this._api.getCardElementManager().scrollReset(),this._api.getMessageManager().reset(),this._api.getStyleManager().setExpandedMode(),this._api.getConditionsManager()?.setState({view:e.view,camera:e.camera,displayMode:e.displayMode??void 0}),this._api.getTriggersManager().updateView(t),this._api.getCardElementManager().update()}_createViewWithSelectedSubstream(e,t){const n=e?.context?.live?.overrides??new Map;return n.set(e.camera,t),e.clone().mergeInContext({live:{overrides:n}})}_createViewWithNextStream(e){const t=[...this._api.getCameraManager().getStore().getAllDependentCameras(e.camera)];if(t.length<=1)return e.clone();const n=e.clone(),i=n.context?.live?.overrides??new Map,a=i.get(n.camera)??n.camera,r=t.indexOf(a),s=r<0?0:(r+1)%t.length;return i.set(n.camera,t[s]),n.mergeInContext({live:{overrides:i}}),n}_createViewWithoutSubstream(){if(!this._view)return null;const e=this._view.clone(),t=e.context?.live?.overrides;return t&&t.has(e.camera)&&e.context?.live?.overrides?.delete(e.camera),e}}class Wy{constructor(e,t,n,i){this._entityRegistryManager=new L_(new F_),this._resolvedMediaCache=new H_,this._actionsManager=new q_(this),this._automationsManager=new Q_(this),this._autoUpdateManager=new B_(this),this._cameraManager=new R_(this),this._cameraURLManager=new Y_(this),this._configManager=new $v(this),this._downloadManager=new Tv(this),this._expandManager=new Iv(this),this._fullscreenManager=new Pv(this),this._hassManager=new Nv(this),this._initializationManager=new Sv(this),this._interactionManager=new ty(this),this._mediaLoadedInfoManager=new uy(this),this._mediaPlayerManager=new my(this),this._messageManager=new gy(this),this._microphoneManager=new py(this),this._queryStringManager=new fy(this),this._styleManager=new _y(this),this._triggersManager=new vy(this),this._viewManager=new Zy(this),e.addController(this),this._conditionsManager=new vv(this,i),this._cardElementManager=new G_(this,e,t,n)}getActionsManager(){return this._actionsManager}getAutomationsManager(){return this._automationsManager}getAutoUpdateManager(){return this._autoUpdateManager}getCameraManager(){return this._cameraManager}getCameraURLManager(){return this._cameraURLManager}getCardElementManager(){return this._cardElementManager}getConditionsManager(){return this._conditionsManager}static async getConfigElement(){return await import("./editor-77483e14.js"),document.createElement("frigate-card-editor")}getConfigManager(){return this._configManager}getDownloadManager(){return this._downloadManager}getEntityRegistryManager(){return this._entityRegistryManager}getExpandManager(){return this._expandManager}getFullscreenManager(){return this._fullscreenManager}getHASSManager(){return this._hassManager}getInitializationManager(){return this._initializationManager}getInteractionManager(){return this._interactionManager}getMediaLoadedInfoManager(){return this._mediaLoadedInfoManager}getMediaPlayerManager(){return this._mediaPlayerManager}getMessageManager(){return this._messageManager}getMicrophoneManager(){return this._microphoneManager}getQueryStringManager(){return this._queryStringManager}getResolvedMediaCache(){return this._resolvedMediaCache}static getStubConfig(e){return{cameras:[{camera_entity:e.find((e=>e.startsWith("camera.")))??"camera.demo"}]}}getStyleManager(){return this._styleManager}getTriggersManager(){return this._triggersManager}getViewManager(){return this._viewManager}hostConnected(){this.getCardElementManager().elementConnected()}hostDisconnected(){this.getCardElementManager().elementDisconnected()}}class qy{constructor(){this._dynamicMenuButtons=[]}addDynamicMenuButton(e){this._dynamicMenuButtons.includes(e)||this._dynamicMenuButtons.push(e)}removeDynamicMenuButton(e){this._dynamicMenuButtons=this._dynamicMenuButtons.filter((t=>t!=e))}calculateButtons(e,t,n,i,a){const r=n.getStore().getVisibleCameraIDs(),s=i.camera,o=n.getStore().getCameraConfig(s),c=n.getStore().getAllDependentCameras(s),l=i.queryResults?.getSelectedResult(),d=n.getCameraCapabilities(s),u=n.getAggregateCameraCapabilities(c),h=l?n?.getMediaCapabilities(l):null,m=[];if(m.push({icon:Ps,...t.menu.buttons.frigate,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.frigate"),tap_action:"hidden"===t.menu?.style?rl("menu_toggle"):rl("default"),hold_action:rl("diagnostics")}),r.size){const e=Array.from(n.getStore().getCameraConfigEntries(r),(([e,t])=>{const i=sl("camera_select",e),a=n.getCameraMetadata(e);return{enabled:!0,icon:a?.icon,entity:t.camera_entity,state_color:!0,title:a?.title,selected:s===e,...i&&{tap_action:i}}}));m.push({icon:"mdi:video-switch",...t.menu.buttons.cameras,type:"custom:frigate-card-menu-submenu",title:xm("config.menu.buttons.cameras"),items:e})}if(s&&c&&i.is("live")){const e=[...c],a=i.context?.live?.overrides?.get(s);if(2===e.length)m.push({icon:"mdi:video-input-component",style:a&&a!==s?this._getEmphasizedStyle():{},title:xm("config.menu.buttons.substreams"),...t.menu.buttons.substreams,type:"custom:frigate-card-menu-icon",tap_action:rl(W_(i)?"live_substream_off":"live_substream_on")});else if(e.length>2){const r=Array.from(e,(e=>{const t=sl("live_substream_select",e),a=n.getCameraMetadata(e)??void 0,r=n.getStore().getCameraConfig(e);return{enabled:!0,icon:a?.icon,entity:r?.camera_entity,state_color:!0,title:a?.title,selected:(i.context?.live?.overrides?.get(s)??s)===e,...t&&{tap_action:t}}}));m.push({icon:"mdi:video-input-component",title:xm("config.menu.buttons.substreams"),style:a&&a!==s?this._getEmphasizedStyle():{},...t.menu.buttons.substreams,type:"custom:frigate-card-menu-submenu",items:r})}}if(m.push({icon:"mdi:cctv",...t.menu.buttons.live,type:"custom:frigate-card-menu-icon",title:xm("config.view.views.live"),style:i.is("live")?this._getEmphasizedStyle():{},tap_action:rl("live")}),u?.supportsClips&&m.push({icon:"mdi:filmstrip",...t.menu.buttons.clips,type:"custom:frigate-card-menu-icon",title:xm("config.view.views.clips"),style:i?.is("clips")?this._getEmphasizedStyle():{},tap_action:rl("clips"),hold_action:rl("clip")}),u?.supportsSnapshots&&m.push({icon:"mdi:camera",...t.menu.buttons.snapshots,type:"custom:frigate-card-menu-icon",title:xm("config.view.views.snapshots"),style:i?.is("snapshots")?this._getEmphasizedStyle():{},tap_action:rl("snapshots"),hold_action:rl("snapshot")}),u?.supportsRecordings&&m.push({icon:"mdi:album",...t.menu.buttons.recordings,type:"custom:frigate-card-menu-icon",title:xm("config.view.views.recordings"),style:i.is("recordings")?this._getEmphasizedStyle():{},tap_action:rl("recordings"),hold_action:rl("recording")}),m.push({icon:"mdi:image",...t.menu.buttons.image,type:"custom:frigate-card-menu-icon",title:xm("config.view.views.image"),style:i?.is("image")?this._getEmphasizedStyle():{},tap_action:rl("image")}),u?.supportsTimeline&&m.push({icon:"mdi:chart-gantt",...t.menu.buttons.timeline,type:"custom:frigate-card-menu-icon",title:xm("config.view.views.timeline"),style:i.is("timeline")?this._getEmphasizedStyle():{},tap_action:rl("timeline")}),h?.canDownload&&!this._isBeingCasted()&&m.push({icon:"mdi:download",...t.menu.buttons.download,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.download"),tap_action:rl("download")}),a?.showCameraUIButton&&m.push({icon:"mdi:web",...t.menu.buttons.camera_ui,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.camera_ui"),tap_action:rl("camera_ui")}),a?.microphoneManager&&a?.currentMediaLoadedInfo?.capabilities?.supports2WayAudio){const e=a.microphoneManager.isForbidden(),n=a.microphoneManager.isMuted(),i=t.menu.buttons.microphone.type;m.push({icon:e?"mdi:microphone-message-off":n?"mdi:microphone-off":"mdi:microphone",...t.menu.buttons.microphone,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.microphone"),style:e||n?{}:this._getEmphasizedStyle(!0),...!e&&"momentary"===i&&{start_tap_action:rl("microphone_unmute"),end_tap_action:rl("microphone_mute")},...!e&&"toggle"===i&&{tap_action:rl(a.microphoneManager.isMuted()?"microphone_unmute":"microphone_mute")}})}if(this._isBeingCasted()||m.push({icon:a?.inFullscreenMode?"mdi:fullscreen-exit":"mdi:fullscreen",...t.menu.buttons.fullscreen,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.fullscreen"),tap_action:rl("fullscreen"),style:a?.inFullscreenMode?this._getEmphasizedStyle():{}}),m.push({icon:a?.inExpandedMode?"mdi:arrow-collapse-all":"mdi:arrow-expand-all",...t.menu.buttons.expand,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.expand"),tap_action:rl("expand"),style:a?.inExpandedMode?this._getEmphasizedStyle():{}}),a?.mediaPlayerController?.hasMediaPlayers()&&(i?.isViewerView()||i.is("live")&&o?.camera_entity)){const n=a.mediaPlayerController.getMediaPlayers().map((t=>{const n=cf(e,t)||t,i=e.states[t],a=ol(t,"play"),r=ol(t,"stop"),s=!i||"unavailable"===i.state;return{enabled:!0,selected:!1,icon:lf(e,t),entity:t,state_color:!1,title:n,disabled:s,...!s&&a&&{tap_action:a},...!s&&r&&{hold_action:r}}}));m.push({icon:"mdi:cast",...t.menu.buttons.media_player,type:"custom:frigate-card-menu-submenu",title:xm("config.menu.buttons.media_player"),items:n})}if(a?.currentMediaLoadedInfo&&a.currentMediaLoadedInfo.player){if(a.currentMediaLoadedInfo.capabilities?.supportsPause){const e=a.currentMediaLoadedInfo.player.isPaused();m.push({icon:e?"mdi:play":"mdi:pause",...t.menu.buttons.play,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.play"),tap_action:rl(e?"play":"pause")})}if(a.currentMediaLoadedInfo.capabilities?.hasAudio){const e=a.currentMediaLoadedInfo.player.isMuted();m.push({icon:e?"mdi:volume-off":"mdi:volume-high",...t.menu.buttons.mute,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.mute"),tap_action:rl(e?"unmute":"mute")})}}if(a?.currentMediaLoadedInfo&&a.currentMediaLoadedInfo.player&&m.push({icon:"mdi:monitor-screenshot",...t.menu.buttons.screenshot,type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.screenshot"),tap_action:rl("screenshot")}),i.supportsMultipleDisplayModes()&&r.size>1){const e=i.isGrid();m.push({icon:e?"mdi:grid-off":"mdi:grid",...t.menu.buttons.display_mode,style:e?this._getEmphasizedStyle():{},type:"custom:frigate-card-menu-icon",title:xm(e?"display_modes.single":"display_modes.grid"),tap_action:cl(e?"single":"grid")})}if(((e,t)=>{for(const e of Ks)if("actions_"+e in t)return!0;return!!e?.ptz})(d,t.live.controls.ptz)){const e=!1!==i.context?.live?.ptzVisible&&"on"===t.live.controls.ptz.mode;m.push({icon:"mdi:pan",...t.menu.buttons.ptz,style:e?this._getEmphasizedStyle():{},type:"custom:frigate-card-menu-icon",title:xm("config.menu.buttons.ptz"),tap_action:ll(!e)})}const g=this._dynamicMenuButtons.map((e=>({style:this._getStyleFromActions(t,i,e,a),...e})));return m.concat(g)}_getEmphasizedStyle(e){return e?{animation:"pulse 3s infinite",color:"var(--error-color, white)"}:{color:"var(--primary-color, white)"}}_getStyleFromActions(e,t,n,i){for(const a of[n.tap_action,n.double_tap_action,n.hold_action,n.start_tap_action,n.end_tap_action]){const n=Array.isArray(a)?a:[a];for(const a of n){if(!a||"fire-dom-event"!==a.action||!("frigate_card_action"in a))continue;const n=a;if(Zs.some((e=>e===n.frigate_card_action&&t?.is(n.frigate_card_action)))||"default"===n.frigate_card_action&&t.is(e.view.default)||"fullscreen"===n.frigate_card_action&&i?.inFullscreenMode||"camera_select"===n.frigate_card_action&&t.camera===n.camera)return this._getEmphasizedStyle()}}return{}}_isBeingCasted(){return!!navigator.userAgent.match(/CrKey\//)}}let By=class extends ne{constructor(){super(...arguments),this._root=null}createRenderRoot(){return this}_createRoot(){const e=customElements.get("hui-conditional-element");if(!e||!this.hass)throw new Error(xm("error.could_not_render_elements"));const t=new e;t.hass=this.hass;const n={type:"conditional",conditions:[],elements:this.elements};try{t.setConfig(n)}catch(e){throw Cp(e,console.error),new mp(xm("error.invalid_elements_config"))}return t}willUpdate(e){try{!this.elements||this._root&&!e.has("elements")||(this._root=this._createRoot())}catch(e){return jy(this,e)}}render(){return P`${this._root||""}`}updated(){this.hass&&this._root&&(this._root.hass=this.hass)}};e([se({attribute:!1})],By.prototype,"elements",void 0),e([se({attribute:!1})],By.prototype,"conditionsManagerEpoch",void 0),e([se({attribute:!1})],By.prototype,"hass",void 0),By=e([ae("frigate-card-elements-core")],By);let Qy=class extends ne{constructor(){super(...arguments),this._boundMenuRemoveHandler=this._menuRemoveHandler.bind(this)}_menuRemoveHandler(e){_p(this,"menu-remove",e.detail)}_menuAddHandler(e){const t=e.composedPath();t.length&&(t[0].removeEventListener("frigate-card:menu-remove",this._boundMenuRemoveHandler),t[0].addEventListener("frigate-card:menu-remove",this._boundMenuRemoveHandler))}connectedCallback(){super.connectedCallback(),this.addEventListener("frigate-card:menu-add",this._menuAddHandler)}disconnectedCallback(){this.removeEventListener("frigate-card:menu-add",this._menuAddHandler),super.disconnectedCallback()}render(){return P`<frigate-card-elements-core
      .hass=${this.hass}
      .conditionsManagerEpoch=${this.conditionsManagerEpoch}
      .elements=${this.elements}
    >
    </frigate-card-elements-core>`}static get styles(){return s(":host {\n  position: absolute;\n  inset: 0;\n  overflow: hidden;\n  pointer-events: none;\n}\n\n.element {\n  position: absolute;\n  transform: translate(-50%, -50%);\n  pointer-events: auto;\n}\n\nhui-error-card.element {\n  inset: 0px;\n  transform: unset;\n}")}};e([se({attribute:!1})],Qy.prototype,"hass",void 0),e([se({attribute:!1})],Qy.prototype,"conditionsManagerEpoch",void 0),e([se({attribute:!1})],Qy.prototype,"elements",void 0),Qy=e([ae("frigate-card-elements")],Qy);let Yy=class extends ne{setConfig(e){this._config=e}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.className=""}render(){if(function(e,t){if(!t)return!0;const n=new fv(t,{bubbles:!0,composed:!0});return e.dispatchEvent(n),n.evaluation??!1}(this,this._config.conditions))return P` <frigate-card-elements-core
        .hass=${this.hass}
        .elements=${this._config.elements}
      >
      </frigate-card-elements-core>`}};e([se({attribute:!1,hasChanged:()=>!0})],Yy.prototype,"hass",void 0),Yy=e([ae("frigate-card-conditional")],Yy);class Gy extends ne{constructor(){super(...arguments),this._config=null}setConfig(e){this._config=e}connectedCallback(){super.connectedCallback(),this._config&&_p(this,"menu-add",this._config)}disconnectedCallback(){this._config&&_p(this,"menu-remove",this._config),super.disconnectedCallback()}}e([oe()],Gy.prototype,"_config",void 0);let Ky=class extends Gy{};Ky=e([ae("frigate-card-menu-icon")],Ky);let Xy=class extends Gy{};Xy=e([ae("frigate-card-menu-state-icon")],Xy);let Jy=class extends Gy{};Jy=e([ae("frigate-card-menu-submenu")],Jy);let eb=class extends Gy{};eb=e([ae("frigate-card-menu-submenu-select")],eb);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const tb=e=>null!=e?e:L,nb="m 4.8759466,22.743573 c 0.0866,0.69274 0.811811,1.16359 0.37885,1.27183 -0.43297,0.10824 -2.32718,-3.43665 -2.7601492,-4.95202 -0.4329602,-1.51538 -0.6764993,-3.22017 -0.5682593,-4.19434 0.1082301,-0.97417 5.7097085,-2.48955 5.7097085,-2.89545 0,-0.4059 -1.81304,-0.0271 -1.89422,-0.35178 -0.0812,-0.32472 1.36925,-0.12989 1.75892,-0.64945 0.60885,-0.81181 1.3800713,-0.6765 1.8671505,-1.1094696 0.4870902,-0.4329599 1.0824089,-2.0836399 1.1906589,-2.7871996 0.108241,-0.70357 -1.0824084,-1.51538 -1.4071389,-2.05658 -0.3247195,-0.54121 0.7035702,-0.92005 3.1931099,-1.94834 2.48954,-1.02829 10.39114,-3.30134994 10.49938,-3.03074994 0.10824,0.27061 -2.59779,1.40713994 -4.492,2.11069994 -1.89422,0.70357 -4.97909,2.05658 -4.97909,2.43542 0,0.37885 0.16236,0.67651 0.0541,1.54244 -0.10824,0.86593 -0.12123,1.2702597 -0.32472,1.8400997 -0.1353,0.37884 -0.2706,1.27183 0,2.0836295 0.21648,0.64945 0.92005,1.13653 1.24477,1.24478 0.2706,0.018 1.01746,0.0433 1.8401,0 1.02829,-0.0541 2.48954,0.0541 2.48954,0.32472 0,0.2706 -2.21894,0.10824 -2.21894,0.48708 0,0.37885 2.27306,-0.0541 2.21894,0.32473 -0.0541,0.37884 -1.89422,0.21648 -2.86839,0.21648 -0.77933,0 -1.93031,-0.0361 -2.43542,-0.21648 l -0.10824,0.37884 c -0.18038,0 -0.55744,0.10824 -0.94711,0.10824 -0.48708,0 -0.51414,0.16236 -1.40713,0.16236 -0.892989,0 -0.622391,-0.0541 -1.4341894,-0.10824 -0.81181,-0.0541 -3.842561,2.27306 -4.383761,3.03075 -0.54121,0.75768 -0.21649,2.59778 -0.21649,3.43665 0,0.75379 -0.10824,2.43542 0,3.30135 z";class ib{constructor(e){this._config=null,this._buttons=[],this._expanded=!1,this._host=e}setMenuConfig(e){this._config=e,this._host.style.setProperty("--frigate-card-menu-button-size",`${e.button_size}px`),this._host.setAttribute("data-style",e.style),this._host.setAttribute("data-position",e.position),this._host.setAttribute("data-alignment",e.alignment),this._sortButtons(),this._host.requestUpdate()}getMenuConfig(){return this._config}isExpanded(){return this._expanded}setButtons(e){this._buttons=e,this._sortButtons(),this._host.requestUpdate()}getButtons(e){const t=this._config?.style,n=e=>"hidden"!==t||this._expanded||e.icon===Ps;return this._buttons.filter((t=>(e=>!1!==e.enabled)(t)&&(t=>t.alignment===e||"matching"===e&&!t.alignment)(t)&&n(t)))}setExpanded(e){this._expanded=e,this._host.setAttribute("expanded",""),this._host.requestUpdate()}toggleExpanded(){this.setExpanded(!this._expanded)}actionHandler(e,t,n){if(t.stopPropagation(),t.detail.config&&(n=t.detail.config),!n)return;const i=t.detail.action,a=dl(i,n);if(!a)return;const r=bp(a);let s=!1;const o=r.filter((e=>jp(e)&&!this._isMenuToggleAction(e)));if(o.length!=r.length&&(s=!0),o.length&&ul(this._host,e,n,i,r),this._isHidingMenu())if(s)this.setExpanded(!this._expanded);else{const e=dl("hold",n),t=dl("double_tap",n),a=dl("tap",n),r=dl("end_tap",n);"end_tap"!==i&&("start_tap"!==i||e||t||a||r)&&("end_tap"===i||r)||this.setExpanded(!1)}}getFreshButtonState(e,t){const n={...t};return e&&"custom:frigate-card-menu-state-icon"===t.type?of(e,n):n}getSVGPath(e){return e.icon===Ps?nb:""}_sortButtons(){const e=this._config?.style;this._buttons.sort(((t,n)=>{if("hidden"===e){if(t.icon===Ps)return-1;if(n.icon===Ps)return 1}return void 0===t.priority||void 0!==n.priority&&n.priority>t.priority?1:void 0===n.priority||void 0!==t.priority&&n.priority<t.priority?-1:0}))}_isHidingMenu(){return"hidden"===this._config?.style??!1}_isMenuToggleAction(e){const t=al(e);return!!t&&"menu_toggle"==t.frigate_card_action}}const ab=(e,t,n)=>{const i=e.states[t],a=n?.state?n.state:i?i.state:null;if(!a)return null;const r=Ge(t),s=i?i.attributes:null;return n?.entity?.translation_key&&e.localize(`component.${n.entity.platform}.entity.${r}.${n.entity.translation_key}.state.${a}`)||s?.device_class&&e.localize(`component.${r}.state.${s.device_class}.${a}`)||e.localize(`component.${r}.state._.${a}`)||a};let rb=class extends ne{_renderItem(e){if(!this.hass)return;const t=of(this.hass,{...e});return P`
      <mwc-list-item
        style="${ke(t.style||{})}"
        graphic=${tb(t.icon?"icon":void 0)}
        ?twoline=${!!e.subtitle}
        ?selected=${e.selected}
        ?activated=${e.selected}
        ?disabled=${!1===e.enabled}
        aria-label="${t.title||""}"
        @action=${t=>{t.detail.config=e}}
        .actionHandler=${vl({hasHold:ml(e.hold_action),hasDoubleClick:ml(e.double_tap_action)})}
      >
        <span>${t.title||""}</span>
        ${e.subtitle?P`<span slot="secondary">${e.subtitle}</span>`:""}
        ${(e=>e.icon?P` <ha-icon
          style="${ke(e.style||{})}"
          data-domain=${tb(e.data_domain)}
          data-state=${tb(e.data_state)}
          slot="graphic"
          icon="${e.icon||""}"
        >
        </ha-icon>`:P``)(t)}
      </mwc-list-item>
    `}render(){return this.submenu?P`
      <ha-button-menu
        corner=${"BOTTOM_LEFT"}
        @closed=${e=>e.stopPropagation()}
        @click=${e=>gl(e)}
      >
        <ha-icon-button
          style="${ke(this.submenu.style||{})}"
          class="button"
          slot="trigger"
          .label=${this.submenu.title||""}
          .actionHandler=${vl({allowPropagation:!0,hasHold:ml(this.submenu.hold_action),hasDoubleClick:ml(this.submenu.double_tap_action)})}
        >
          <ha-icon icon="${this.submenu.icon}"></ha-icon>
        </ha-icon-button>
        ${this.submenu.items.map(this._renderItem.bind(this))}
      </ha-button-menu>
    `:P``}static get styles(){return s("ha-icon-button.button {\n  color: var(--secondary-color, white);\n  background-color: rgba(0, 0, 0, 0.6);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n  opacity: 0.9;\n}\n\n@keyframes pulse {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.6;\n  }\n  100% {\n    opacity: 1;\n  }\n}\nha-icon[data-domain=alert][data-state=on],\nha-icon[data-domain=automation][data-state=on],\nha-icon[data-domain=binary_sensor][data-state=on],\nha-icon[data-domain=calendar][data-state=on],\nha-icon[data-domain=camera][data-state=streaming],\nha-icon[data-domain=cover][data-state=open],\nha-icon[data-domain=fan][data-state=on],\nha-icon[data-domain=humidifier][data-state=on],\nha-icon[data-domain=light][data-state=on],\nha-icon[data-domain=input_boolean][data-state=on],\nha-icon[data-domain=lock][data-state=unlocked],\nha-icon[data-domain=media_player][data-state=on],\nha-icon[data-domain=media_player][data-state=paused],\nha-icon[data-domain=media_player][data-state=playing],\nha-icon[data-domain=script][data-state=on],\nha-icon[data-domain=sun][data-state=above_horizon],\nha-icon[data-domain=switch][data-state=on],\nha-icon[data-domain=timer][data-state=active],\nha-icon[data-domain=vacuum][data-state=cleaning],\nha-icon[data-domain=group][data-state=on],\nha-icon[data-domain=group][data-state=home],\nha-icon[data-domain=group][data-state=open],\nha-icon[data-domain=group][data-state=locked],\nha-icon[data-domain=group][data-state=problem] {\n  color: var(--paper-item-icon-active-color, #fdd835);\n}\n\nha-icon[data-domain=climate][data-state=cooling] {\n  color: var(--cool-color, var(--state-climate-cool-color));\n}\n\nha-icon[data-domain=climate][data-state=heating] {\n  color: var(--heat-color, var(--state-climate-heat-color));\n}\n\nha-icon[data-domain=climate][data-state=drying] {\n  color: var(--dry-color, var(--state-climate-dry-color));\n}\n\nha-icon[data-domain=alarm_control_panel] {\n  color: var(--alarm-color-armed, var(--label-badge-red));\n}\n\nha-icon[data-domain=alarm_control_panel][data-state=disarmed] {\n  color: var(--alarm-color-disarmed, var(--label-badge-green));\n}\n\nha-icon[data-domain=alarm_control_panel][data-state=pending],\nha-icon[data-domain=alarm_control_panel][data-state=arming] {\n  color: var(--alarm-color-pending, var(--label-badge-yellow));\n  animation: pulse 1s infinite;\n}\n\nha-icon[data-domain=alarm_control_panel][data-state=triggered] {\n  color: var(--alarm-color-triggered, var(--label-badge-red));\n  animation: pulse 1s infinite;\n}\n\nha-icon[data-domain=plant][data-state=problem],\nha-icon[data-domain=zwave][data-state=dead] {\n  color: var(--state-icon-error-color);\n}\n\n/* Color the icon if unavailable */\nha-icon[data-state=unavailable] {\n  color: var(--state-unavailable-color);\n}\n\nha-icon-button[data-domain=alert][data-state=on],\nha-icon-button[data-domain=automation][data-state=on],\nha-icon-button[data-domain=binary_sensor][data-state=on],\nha-icon-button[data-domain=calendar][data-state=on],\nha-icon-button[data-domain=camera][data-state=streaming],\nha-icon-button[data-domain=cover][data-state=open],\nha-icon-button[data-domain=fan][data-state=on],\nha-icon-button[data-domain=humidifier][data-state=on],\nha-icon-button[data-domain=light][data-state=on],\nha-icon-button[data-domain=input_boolean][data-state=on],\nha-icon-button[data-domain=lock][data-state=unlocked],\nha-icon-button[data-domain=media_player][data-state=on],\nha-icon-button[data-domain=media_player][data-state=paused],\nha-icon-button[data-domain=media_player][data-state=playing],\nha-icon-button[data-domain=script][data-state=on],\nha-icon-button[data-domain=sun][data-state=above_horizon],\nha-icon-button[data-domain=switch][data-state=on],\nha-icon-button[data-domain=timer][data-state=active],\nha-icon-button[data-domain=vacuum][data-state=cleaning],\nha-icon-button[data-domain=group][data-state=on],\nha-icon-button[data-domain=group][data-state=home],\nha-icon-button[data-domain=group][data-state=open],\nha-icon-button[data-domain=group][data-state=locked],\nha-icon-button[data-domain=group][data-state=problem] {\n  color: var(--paper-item-icon-active-color, #fdd835);\n}\n\nha-icon-button[data-domain=climate][data-state=cooling] {\n  color: var(--cool-color, var(--state-climate-cool-color));\n}\n\nha-icon-button[data-domain=climate][data-state=heating] {\n  color: var(--heat-color, var(--state-climate-heat-color));\n}\n\nha-icon-button[data-domain=climate][data-state=drying] {\n  color: var(--dry-color, var(--state-climate-dry-color));\n}\n\nha-icon-button[data-domain=alarm_control_panel] {\n  color: var(--alarm-color-armed, var(--label-badge-red));\n}\n\nha-icon-button[data-domain=alarm_control_panel][data-state=disarmed] {\n  color: var(--alarm-color-disarmed, var(--label-badge-green));\n}\n\nha-icon-button[data-domain=alarm_control_panel][data-state=pending],\nha-icon-button[data-domain=alarm_control_panel][data-state=arming] {\n  color: var(--alarm-color-pending, var(--label-badge-yellow));\n  animation: pulse 1s infinite;\n}\n\nha-icon-button[data-domain=alarm_control_panel][data-state=triggered] {\n  color: var(--alarm-color-triggered, var(--label-badge-red));\n  animation: pulse 1s infinite;\n}\n\nha-icon-button[data-domain=plant][data-state=problem],\nha-icon-button[data-domain=zwave][data-state=dead] {\n  color: var(--state-icon-error-color);\n}\n\n/* Color the icon if unavailable */\nha-icon-button[data-state=unavailable] {\n  color: var(--state-unavailable-color);\n}\n\n:host {\n  pointer-events: auto;\n}\n\nmwc-list-item {\n  z-index: 20;\n}")}};e([se({attribute:!1})],rb.prototype,"hass",void 0),e([se({attribute:!1})],rb.prototype,"submenu",void 0),rb=e([ae("frigate-card-submenu")],rb);let sb=class extends ne{shouldUpdate(e){const t=e.get("hass");return!e.has("hass")||!t||!this.submenuSelect||tf(this.hass,t,[this.submenuSelect.entity])}async _refreshOptionTitles(){if(!this.hass||!this.submenuSelect)return;const e=this.submenuSelect.entity,t=this.hass.states[e]?.attributes?.options,n=await(this.entityRegistryManager?.getEntity(this.hass,e))??null,i={};for(const a of t){const t=ab(this.hass,e,{...n&&{entity:n},state:a});t&&(i[a]=t)}this._optionTitles=i}willUpdate(){if(!this.submenuSelect||!this.hass)return;this._optionTitles||this._refreshOptionTitles();const e=this.submenuSelect.entity,t=this.hass.states[e],n=t?.attributes?.options;if(!t||!n)return;const i={icon:Kp("select"),...of(this.hass,this.submenuSelect),...this.submenuSelect,type:"custom:frigate-card-menu-submenu",items:[]};delete i.options;for(const a of n){const n=this._optionTitles?.[a]??a;i.items.push({state_color:!0,selected:t.state===a,enabled:!0,title:n||a,...(e.startsWith("select.")||e.startsWith("input_select."))&&{tap_action:{action:"call-service",service:e.startsWith("select.")?"select.select_option":"input_select.select_option",data:{entity_id:e,option:a}}},...this.submenuSelect.options&&this.submenuSelect.options[a]})}this._generatedSubmenu=i}render(){return P` <frigate-card-submenu
      .hass=${this.hass}
      .submenu=${this._generatedSubmenu}
    ></frigate-card-submenu>`}};e([se({attribute:!1})],sb.prototype,"hass",void 0),e([se({attribute:!1})],sb.prototype,"submenuSelect",void 0),e([se({attribute:!1})],sb.prototype,"entityRegistryManager",void 0),e([oe()],sb.prototype,"_optionTitles",void 0),sb=e([ae("frigate-card-submenu-select")],sb);let ob=class extends ne{constructor(){super(...arguments),this._controller=new ib(this)}set menuConfig(e){this._controller.setMenuConfig(e)}set buttons(e){this._controller.setButtons(e)}set expanded(e){this._controller.setExpanded(e)}toggleMenu(){this._controller.toggleExpanded()}_renderButton(e){if(!this.hass)return;if("custom:frigate-card-menu-submenu"===e.type)return P` <frigate-card-submenu
        .hass=${this.hass}
        .submenu=${e}
        @action=${e=>this.hass&&this._controller.actionHandler(this.hass,e)}
      >
      </frigate-card-submenu>`;if("custom:frigate-card-menu-submenu-select"===e.type)return P` <frigate-card-submenu-select
        .hass=${this.hass}
        .submenuSelect=${e}
        .entityRegistryManager=${this.entityRegistryManager}
        @action=${e=>this.hass&&this._controller.actionHandler(this.hass,e)}
      >
      </frigate-card-submenu-select>`;const t=this._controller.getFreshButtonState(this.hass,e),n=this._controller.getSVGPath(e);return P` <ha-icon-button
      data-domain=${tb(t.data_domain)}
      data-state=${tb(t.data_state)}
      class="button"
      style="${ke(t.style||{})}"
      .actionHandler=${vl({hasHold:ml(e.hold_action),hasDoubleClick:ml(e.double_tap_action)})}
      .label=${t.title||""}
      @action=${t=>this.hass&&this._controller.actionHandler(this.hass,t,e)}
    >
      ${n?P`<ha-svg-icon .path="${n}"></ha-svg-icon>`:P`<ha-icon
            icon="${t.icon||"mdi:gesture-tap-button"}"
          ></ha-icon>`}
    </ha-icon-button>`}render(){const e=this._controller.getMenuConfig(),t=e?.style;if(!e||"none"===t)return;const n=this._controller.getButtons("matching"),i=this._controller.getButtons("opposing");return P` <div
        class="matching"
        style="${ke({flex:String(n.length)})}"
      >
        ${n.map((e=>this._renderButton(e)))}
      </div>
      <div
        class="opposing"
        style="${ke({flex:String(i.length)})}"
      >
        ${i.map((e=>this._renderButton(e)))}
      </div>`}static get styles(){return s('ha-icon-button.button {\n  color: var(--secondary-color, white);\n  background-color: rgba(0, 0, 0, 0.6);\n  border-radius: 50%;\n  padding: 0px;\n  margin: 3px;\n  --ha-icon-display: block;\n  /* Buttons can always be clicked */\n  pointer-events: auto;\n  opacity: 0.9;\n}\n\n@keyframes pulse {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.6;\n  }\n  100% {\n    opacity: 1;\n  }\n}\nha-icon[data-domain=alert][data-state=on],\nha-icon[data-domain=automation][data-state=on],\nha-icon[data-domain=binary_sensor][data-state=on],\nha-icon[data-domain=calendar][data-state=on],\nha-icon[data-domain=camera][data-state=streaming],\nha-icon[data-domain=cover][data-state=open],\nha-icon[data-domain=fan][data-state=on],\nha-icon[data-domain=humidifier][data-state=on],\nha-icon[data-domain=light][data-state=on],\nha-icon[data-domain=input_boolean][data-state=on],\nha-icon[data-domain=lock][data-state=unlocked],\nha-icon[data-domain=media_player][data-state=on],\nha-icon[data-domain=media_player][data-state=paused],\nha-icon[data-domain=media_player][data-state=playing],\nha-icon[data-domain=script][data-state=on],\nha-icon[data-domain=sun][data-state=above_horizon],\nha-icon[data-domain=switch][data-state=on],\nha-icon[data-domain=timer][data-state=active],\nha-icon[data-domain=vacuum][data-state=cleaning],\nha-icon[data-domain=group][data-state=on],\nha-icon[data-domain=group][data-state=home],\nha-icon[data-domain=group][data-state=open],\nha-icon[data-domain=group][data-state=locked],\nha-icon[data-domain=group][data-state=problem] {\n  color: var(--paper-item-icon-active-color, #fdd835);\n}\n\nha-icon[data-domain=climate][data-state=cooling] {\n  color: var(--cool-color, var(--state-climate-cool-color));\n}\n\nha-icon[data-domain=climate][data-state=heating] {\n  color: var(--heat-color, var(--state-climate-heat-color));\n}\n\nha-icon[data-domain=climate][data-state=drying] {\n  color: var(--dry-color, var(--state-climate-dry-color));\n}\n\nha-icon[data-domain=alarm_control_panel] {\n  color: var(--alarm-color-armed, var(--label-badge-red));\n}\n\nha-icon[data-domain=alarm_control_panel][data-state=disarmed] {\n  color: var(--alarm-color-disarmed, var(--label-badge-green));\n}\n\nha-icon[data-domain=alarm_control_panel][data-state=pending],\nha-icon[data-domain=alarm_control_panel][data-state=arming] {\n  color: var(--alarm-color-pending, var(--label-badge-yellow));\n  animation: pulse 1s infinite;\n}\n\nha-icon[data-domain=alarm_control_panel][data-state=triggered] {\n  color: var(--alarm-color-triggered, var(--label-badge-red));\n  animation: pulse 1s infinite;\n}\n\nha-icon[data-domain=plant][data-state=problem],\nha-icon[data-domain=zwave][data-state=dead] {\n  color: var(--state-icon-error-color);\n}\n\n/* Color the icon if unavailable */\nha-icon[data-state=unavailable] {\n  color: var(--state-unavailable-color);\n}\n\nha-icon-button[data-domain=alert][data-state=on],\nha-icon-button[data-domain=automation][data-state=on],\nha-icon-button[data-domain=binary_sensor][data-state=on],\nha-icon-button[data-domain=calendar][data-state=on],\nha-icon-button[data-domain=camera][data-state=streaming],\nha-icon-button[data-domain=cover][data-state=open],\nha-icon-button[data-domain=fan][data-state=on],\nha-icon-button[data-domain=humidifier][data-state=on],\nha-icon-button[data-domain=light][data-state=on],\nha-icon-button[data-domain=input_boolean][data-state=on],\nha-icon-button[data-domain=lock][data-state=unlocked],\nha-icon-button[data-domain=media_player][data-state=on],\nha-icon-button[data-domain=media_player][data-state=paused],\nha-icon-button[data-domain=media_player][data-state=playing],\nha-icon-button[data-domain=script][data-state=on],\nha-icon-button[data-domain=sun][data-state=above_horizon],\nha-icon-button[data-domain=switch][data-state=on],\nha-icon-button[data-domain=timer][data-state=active],\nha-icon-button[data-domain=vacuum][data-state=cleaning],\nha-icon-button[data-domain=group][data-state=on],\nha-icon-button[data-domain=group][data-state=home],\nha-icon-button[data-domain=group][data-state=open],\nha-icon-button[data-domain=group][data-state=locked],\nha-icon-button[data-domain=group][data-state=problem] {\n  color: var(--paper-item-icon-active-color, #fdd835);\n}\n\nha-icon-button[data-domain=climate][data-state=cooling] {\n  color: var(--cool-color, var(--state-climate-cool-color));\n}\n\nha-icon-button[data-domain=climate][data-state=heating] {\n  color: var(--heat-color, var(--state-climate-heat-color));\n}\n\nha-icon-button[data-domain=climate][data-state=drying] {\n  color: var(--dry-color, var(--state-climate-dry-color));\n}\n\nha-icon-button[data-domain=alarm_control_panel] {\n  color: var(--alarm-color-armed, var(--label-badge-red));\n}\n\nha-icon-button[data-domain=alarm_control_panel][data-state=disarmed] {\n  color: var(--alarm-color-disarmed, var(--label-badge-green));\n}\n\nha-icon-button[data-domain=alarm_control_panel][data-state=pending],\nha-icon-button[data-domain=alarm_control_panel][data-state=arming] {\n  color: var(--alarm-color-pending, var(--label-badge-yellow));\n  animation: pulse 1s infinite;\n}\n\nha-icon-button[data-domain=alarm_control_panel][data-state=triggered] {\n  color: var(--alarm-color-triggered, var(--label-badge-red));\n  animation: pulse 1s infinite;\n}\n\nha-icon-button[data-domain=plant][data-state=problem],\nha-icon-button[data-domain=zwave][data-state=dead] {\n  color: var(--state-icon-error-color);\n}\n\n/* Color the icon if unavailable */\nha-icon-button[data-state=unavailable] {\n  color: var(--state-unavailable-color);\n}\n\n:host {\n  --frigate-card-menu-button-size: 40px;\n  --mdc-icon-button-size: var(--frigate-card-menu-button-size);\n  --mdc-icon-size: calc(var(--mdc-icon-button-size) / 2);\n  pointer-events: none;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n}\n\n/***********************************\n * Aligned divs: matching & opposing\n ***********************************/\ndiv.matching,\ndiv.opposing {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  align-items: flex-start;\n  min-width: 0px;\n  min-height: 0px;\n}\n\ndiv.matching {\n  justify-content: flex-start;\n}\n\ndiv.opposing {\n  justify-content: flex-end;\n}\n\n/********************\n * Outside menu style\n ********************/\n:host([data-style=outside]) {\n  width: 100%;\n  background: var(--secondary-background-color);\n}\n\n/************************************\n * Match menu rounded corners to card\n ************************************/\n:host([data-position=top]),\n:host([data-position=left]) {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n}\n\n:host([data-position=top]),\n:host([data-position=right]) {\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n:host([data-position=bottom]),\n:host([data-position=left]) {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n}\n\n:host([data-position=bottom]),\n:host([data-position=right]) {\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n/**************************************\n * Positioning for absolute menu styles\n **************************************/\n:host(:not([data-style=outside])[data-position=top]),\n:host(:not([data-style=outside])[data-position=left][data-alignment=top]),\n:host(:not([data-style=outside])[data-position=right][data-alignment=top]) {\n  top: 0px;\n}\n\n:host(:not([data-style=outside])[data-position=bottom]),\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]),\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]) {\n  bottom: 0px;\n}\n\n:host(:not([data-style=outside])[data-position=left]),\n:host(:not([data-style=outside])[data-position=top][data-alignment=left]),\n:host(:not([data-style=outside])[data-position=bottom][data-alignment=left]) {\n  left: 0px;\n}\n\n:host(:not([data-style=outside])[data-position=right]),\n:host(:not([data-style=outside])[data-position=top][data-alignment=right]),\n:host(:not([data-style=outside])[data-position=bottom][data-alignment=right]) {\n  right: 0px;\n}\n\n/********************************************************\n * Hack: Ensure host & div expand for column flex layouts\n ********************************************************/\n:host(:not([data-style=outside])[data-position=left]) {\n  writing-mode: vertical-lr;\n}\n\n:host(:not([data-style=outside])[data-position=right]) {\n  writing-mode: vertical-rl;\n}\n\n:host(:not([data-style=outside])[data-style=overlay][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=overlay][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style*=hover][data-position=right]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=left]) div > *,\n:host(:not([data-style=outside])[data-style=hidden][data-position=right]) div > * {\n  writing-mode: horizontal-tb;\n}\n\n/**********************\n * "Reverse" alignments\n **********************/\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]),\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]),\n:host([data-position=top][data-alignment=right]),\n:host([data-position=bottom][data-alignment=right]),\n:host(:not([data-style=outside])[data-position=left][data-alignment=bottom]) div,\n:host(:not([data-style=outside])[data-position=right][data-alignment=bottom]) div,\n:host([data-position=top][data-alignment=right]) div,\n:host([data-position=bottom][data-alignment=right]) div {\n  flex-direction: row-reverse;\n}\n\n/****************************\n * Wrap upwards on the bottom\n ****************************/\n:host(:not([data-style=outside])[data-position=bottom]) div {\n  flex-wrap: wrap-reverse;\n}\n\n/********************************************\n * Positioning for absolute based menu styles\n ********************************************/\n:host([data-style=overlay]),\n:host([data-style*=hover]),\n:host([data-style=hidden]) {\n  position: absolute;\n  overflow: hidden;\n  width: calc(var(--frigate-card-menu-button-size) + 6px);\n  height: calc(var(--frigate-card-menu-button-size) + 6px);\n}\n\n:host([data-style=overlay][data-position=top]),\n:host([data-style=overlay][data-position=bottom]),\n:host([data-style*=hover][data-position=top]),\n:host([data-style*=hover][data-position=bottom]),\n:host([data-style=hidden][data-position=top][expanded]),\n:host([data-style=hidden][data-position=bottom][expanded]) {\n  width: 100%;\n  height: auto;\n  overflow: visible;\n  background: linear-gradient(90deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));\n}\n\n:host([data-style=overlay][data-position=left]),\n:host([data-style=overlay][data-position=right]),\n:host([data-style*=hover][data-position=left]),\n:host([data-style*=hover][data-position=right]),\n:host([data-style=hidden][data-position=left][expanded]),\n:host([data-style=hidden][data-position=right][expanded]) {\n  height: 100%;\n  width: auto;\n  overflow: visible;\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0));\n}')}};e([se({attribute:!1})],ob.prototype,"entityRegistryManager",void 0),e([se({attribute:!1})],ob.prototype,"hass",void 0),ob=e([ae("frigate-card-menu")],ob);class cb{constructor(e){this._scrolling=!1,this._shouldReInitOnScrollStop=!1,this._scrollingStart=()=>{this._scrolling=!0},this._scrollingStop=()=>{this._scrolling=!1,this._shouldReInitOnScrollStop&&(this._shouldReInitOnScrollStop=!1,this._debouncedReInit())},this._debouncedReInit=Xv((()=>{this._scrolling=!1,this._shouldReInitOnScrollStop=!1,this._emblaApi?.reInit()}),500,{trailing:!0}),this._emblaApi=e,this._emblaApi.on("scroll",this._scrollingStart),this._emblaApi.on("settle",this._scrollingStop),this._emblaApi.on("destroy",this.destroy)}destroy(){this._emblaApi.off("scroll",this._scrollingStart),this._emblaApi.off("settle",this._scrollingStop),this._emblaApi.off("destroy",this.destroy)}reinit(){this._scrolling?this._shouldReInitOnScrollStop=!0:this._debouncedReInit()}}function lb(){let e,t=null,n=null;const i=new Map,a=new ResizeObserver((function(e){let t=!1;for(const n of e){const e={height:n.contentRect.height,width:n.contentRect.width},a=i.get(n.target);e.width&&e.height&&(a?.height!==e.height||a?.width!==e.width)&&(i.set(n.target,e),t=!0)}t&&s()})),r=new IntersectionObserver((function(e){const i=e.some((e=>e.isIntersecting));if(i!==n){const e=null!==n;n=i,e&&t?.reinit()}})),s=Xv((()=>function(){const{slideRegistry:n,options:{axis:i}}=e.internalEngine();if("y"===i)return;e.containerNode().style.removeProperty("max-height");const a=n[e.selectedScrollSnap()],r=e.slideNodes(),s=Math.max(...a.map((e=>r[e].getBoundingClientRect().height)));!isNaN(s)&&s>0&&(e.containerNode().style.maxHeight=`${s}px`);t?.reinit()}()),200,{trailing:!0});return{name:"autoSize",options:{},init:function(n){e=n,t=new cb(e),r.observe(e.containerNode()),a.observe(e.containerNode());for(const t of e.slideNodes())a.observe(t);e.containerNode().addEventListener("frigate-card:media:loaded",s),e.on("settle",s)},destroy:function(){r.disconnect(),a.disconnect(),t?.destroy(),e.containerNode().removeEventListener("frigate-card:media:loaded",s),e.off("settle",s)}}}function db(e){return"number"==typeof e}function ub(e){return"string"==typeof e}function hb(e){return"boolean"==typeof e}function mb(e){return"[object Object]"===Object.prototype.toString.call(e)}function gb(e){return Math.abs(e)}function pb(e){return Math.sign(e)}function fb(e,t){return gb(e-t)}function _b(e){return wb(e).map(Number)}function vb(e){return e[yb(e)]}function yb(e){return Math.max(0,e.length-1)}function bb(e,t=0){return Array.from(Array(e),((e,n)=>t+n))}function wb(e){return Object.keys(e)}function xb(e,t){return[e,t].reduce(((e,t)=>(wb(t).forEach((n=>{const i=e[n],a=t[n],r=mb(i)&&mb(a);e[n]=r?xb(i,a):a})),e)),{})}function Cb(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function Mb(e,t){const n={start:function(){return 0},center:function(e){return i(e)/2},end:i};function i(e){return t-e}const a={measure:function(i){return db(e)?t*Number(e):n[e](i)}};return a}function Sb(e,t){const n=gb(e-t);function i(t){return t<e}function a(e){return e>t}function r(e){return i(e)||a(e)}const s={length:n,max:t,min:e,constrain:function(n){return r(n)?i(n)?e:t:n},reachedAny:r,reachedMax:a,reachedMin:i,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}};return s}function $b(e,t,n){const{constrain:i}=Sb(0,e),a=e+1;let r=s(t);function s(e){return n?gb((a+e)%a):i(e)}function o(){return r}function c(){return $b(e,o(),n)}const l={get:o,set:function(e){return r=s(e),l},add:function(e){return c().set(o()+e)},clone:c};return l}function Eb(){let e=[];const t={add:function(n,i,a,r={passive:!0}){let s;if("addEventListener"in n)n.addEventListener(i,a,r),s=()=>n.removeEventListener(i,a,r);else{const e=n;e.addListener(a),s=()=>e.removeListener(a)}return e.push(s),t},clear:function(){e=e.filter((e=>e()))}};return t}function kb(e,t,n,i,a,r,s,o,c,l,d,u,h,m,g,p,f,_,v,y){const{cross:b}=e,w=["INPUT","SELECT","TEXTAREA"],x={passive:!1},C=Eb(),M=Eb(),S=Sb(50,225).constrain(g.measure(20)),$={mouse:300,touch:400},E={mouse:500,touch:600},k=p?43:25;let A=!1,T=0,I=0,D=!1,z=!1,j=!1,O=!1;function R(e){const n=s.readPoint(e),i=s.readPoint(e,b),a=fb(n,T),o=fb(i,I);if(!z&&!O){if(!e.cancelable)return P(e);if(z=a>o,!z)return P(e)}const l=s.pointerMove(e);a>f&&(j=!0),d.useFriction(.3).useDuration(1),c.start(),r.add(t.apply(l)),e.preventDefault()}function P(e){const n=u.byDistance(0,!1).index!==h.get(),i=s.pointerUp(e)*(p?E:$)[O?"mouse":"touch"],a=function(e,t){const n=h.add(-1*pb(e)),i=u.byDistance(e,!p).distance;return p||gb(e)<S?i:_&&t?.5*i:u.byIndex(n.get(),0).distance}(t.apply(i),n),r=function(e,t){if(0===e||0===t)return 0;if(gb(e)<=gb(t))return 0;const n=fb(gb(e),gb(t));return gb(n/e)}(i,a),o=k-10*r,c=v+r/50;z=!1,D=!1,M.clear(),d.useDuration(o).useFriction(c),l.distance(a,!p),O=!1,m.emit("pointerUp")}function N(e){j&&(e.stopPropagation(),e.preventDefault())}return{init:function(e){if(!y)return;function t(t){(hb(y)||y(e,t))&&function(e){const t=Cb(e,a);if(O=t,t&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return w.includes(t)}(e.target))return;j=p&&t&&!e.buttons&&A,A=fb(r.get(),o.get())>=2,D=!0,s.pointerDown(e),d.useFriction(0).useDuration(0),r.set(o),function(){const e=O?i:n;M.add(e,"touchmove",R,x).add(e,"touchend",P).add(e,"mousemove",R,x).add(e,"mouseup",P)}(),T=s.readPoint(e),I=s.readPoint(e,b),m.emit("pointerDown")}(t)}const c=n;C.add(c,"dragstart",(e=>e.preventDefault()),x).add(c,"touchmove",(()=>{}),x).add(c,"touchend",(()=>{})).add(c,"touchstart",t).add(c,"mousedown",t).add(c,"touchcancel",P).add(c,"contextmenu",P).add(c,"click",N,!0)},pointerDown:function(){return D},destroy:function(){C.clear(),M.clear()}}}function Ab(e,t){const n=170;let i,a;function r(e){return e.timeStamp}function s(n,i){const a="client"+("x"===(i||e.scroll)?"X":"Y");return(Cb(n,t)?n:n.touches[0])[a]}return{pointerDown:function(e){return i=e,a=e,s(e)},pointerMove:function(e){const t=s(e)-s(a),o=r(e)-r(i)>n;return a=e,o&&(i=e),t},pointerUp:function(e){if(!i||!a)return 0;const t=s(a)-s(i),o=r(e)-r(i),c=r(e)-r(a)>n,l=t/o;return o&&!c&&gb(l)>.1?l:0},readPoint:s}}function Tb(e,t,n,i,a,r){let s,o,c=[],l=!1;function d(e){return a.measureSize(e.getBoundingClientRect())}return{init:function(a){if(!r)return;o=d(e),c=i.map(d),s=new ResizeObserver((s=>{l||(hb(r)||r(a,s))&&function(r){for(const s of r){const r=s.target===e,l=i.indexOf(s.target),u=r?o:c[l];if(gb(d(r?e:i[l])-u)>=.2){n.requestAnimationFrame((()=>{a.reInit(),t.emit("resize")}));break}}}(s)})),[e].concat(i).forEach((e=>s.observe(e)))},destroy:function(){s&&s.disconnect(),l=!0}}}function Ib(e,t,n,i,a){const r=a.measure(10),s=a.measure(50),o=Sb(.1,.99);let c=!1;return{constrain:function(a){if(c||!e.reachedAny(n.get())||!e.reachedAny(t.get()))return;const l=e.reachedMin(t.get())?"min":"max",d=gb(e[l]-t.get()),u=n.get()-t.get(),h=o.constrain(d/s);n.subtract(u*h),!a&&gb(u)<r&&(n.set(e.constrain(n.get())),i.useDuration(25).useBaseFriction())},toggleActive:function(e){c=!e}}}function Db(e,t,n,i){const a=t.min+.1,r=t.max+.1,{reachedMin:s,reachedMax:o}=Sb(a,r);const c={loop:function(t){if(!function(e){return 1===e?o(n.get()):-1===e&&s(n.get())}(t))return;const a=e*(-1*t);i.forEach((e=>e.add(a)))}};return c}function zb(e,t,n,i,a){const{reachedAny:r,removeOffset:s,constrain:o}=i;function c(e){return e.concat().sort(((e,t)=>gb(e)-gb(t)))[0]}function l(t,i){const a=[t,t+n,t-n];if(!e)return a[0];if(!i)return c(a);const r=a.filter((e=>pb(e)===i));return r.length?c(r):vb(a)-n}const d={byDistance:function(n,i){const c=a.get()+n,{index:d,distance:u}=function(n){const i=e?s(n):o(n),a=t.map((e=>e-i)).map((e=>l(e,0))).map(((e,t)=>({diff:e,index:t}))).sort(((e,t)=>gb(e.diff)-gb(t.diff))),{index:r}=a[0];return{index:r,distance:i}}(c),h=!e&&r(c);return!i||h?{index:d,distance:n}:{index:d,distance:n+l(t[d]-u,0)}},byIndex:function(e,n){return{index:e,distance:l(t[e]-a.get(),n)}},shortcut:l};return d}function jb(e){let t=e;function n(e){return db(e)?e:e.get()}const i={get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}};return i}function Ob(e,t,n){const i="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},a=n.style;let r=!1;return{clear:function(){r||(a.transform="",n.getAttribute("style")||n.removeAttribute("style"))},to:function(e){r||(a.transform=i(t.apply(e)))},toggleActive:function(e){r=!e}}}function Rb(e,t,n,i,a,r,s,o,c,l){const d=.5,u=_b(r),h=_b(r).reverse(),m=function(){const e=o[0]-1;return f(p(h,e),i,!1)}().concat(function(){const e=n-o[0]-1;return f(p(u,e),-i,!0)}());function g(e,t){return e.reduce(((e,t)=>e-r[t]),t)}function p(e,t){return e.reduce(((e,n)=>g(e,t)>0?e.concat([n]):e),[])}function f(r,o,u){const h=function(e){return s.map(((t,i)=>({start:t-a[i]+d+e,end:t+n-d+e})))}(o);return r.map((n=>{const a=u?0:-i,r=u?i:0,s=u?"end":"start",o=h[n][s];return{index:n,slideLocation:jb(-1),translate:Ob(e,t,l[n]),target:()=>c.get()>o?a:r}}))}const _={canLoop:function(){return m.every((({index:e})=>{const t=u.filter((t=>t!==e));return g(t,n)<=.1}))},clear:function(){m.forEach((e=>e.translate.clear()))},loop:function(){m.forEach((e=>{const{target:t,translate:n,slideLocation:i}=e,a=t();a!==i.get()&&(n.to(a),i.set(a))}))},loopPoints:m};return _}function Pb(e,t,n){let i,a=!1;return{init:function(r){n&&(i=new MutationObserver((e=>{a||(hb(n)||n(r,e))&&function(e){for(const n of e)if("childList"===n.type){r.reInit(),t.emit("slidesChanged");break}}(e)})),i.observe(e,{childList:!0}))},destroy:function(){i&&i.disconnect(),a=!0}}}function Nb(e,t,n,i){const a={};let r,s=null,o=null,c=!1;return{init:function(){r=new IntersectionObserver((e=>{c||(e.forEach((e=>{const n=t.indexOf(e.target);a[n]=e})),s=null,o=null,n.emit("slidesInView"))}),{root:e.parentElement,threshold:i}),t.forEach((e=>r.observe(e)))},destroy:function(){r&&r.disconnect(),c=!0},get:function(e=!0){if(e&&s)return s;if(!e&&o)return o;const t=function(e){return wb(a).reduce(((t,n)=>{const i=parseInt(n),{isIntersecting:r}=a[i];return(e&&r||!e&&!r)&&t.push(i),t}),[])}(e);return e&&(s=t),e||(o=t),t}}}function Lb(e,t,n,i,a,r,s,o,c){const{startEdge:l,endEdge:d}=e,u=db(i);const h={groupSlides:function(e){return u?function(e,t){return _b(e).filter((e=>e%t==0)).map((n=>e.slice(n,n+t)))}(e,i):function(e){return e.length?_b(e).reduce(((i,u)=>{const h=vb(i)||0,m=0===h,g=u===yb(e),p=r[l]-s[h][l],f=r[l]-s[u][d],_=!a&&m?t.apply(o):0;return gb(f-(!a&&g?t.apply(c):0)-(p+_))>n&&i.push(u),g&&i.push(e.length),i}),[]).map(((t,n,i)=>{const a=Math.max(i[n-1]||0);return e.slice(a,t)})):[]}(e)}};return h}function Fb(e,t,n,i,a,r,s,o){const{align:c,axis:l,direction:d,startIndex:u,loop:h,duration:m,dragFree:g,dragThreshold:p,inViewThreshold:f,slidesToScroll:_,skipSnaps:v,containScroll:y,watchResize:b,watchSlides:w,watchDrag:x}=r,C=t.getBoundingClientRect(),M=n.map((e=>e.getBoundingClientRect())),S=function(e){const t="rtl"===e?-1:1,n={apply:function(e){return e*t}};return n}(d),$=function(e,t){const n="y"===e?"y":"x";return{scroll:n,cross:"y"===e?"x":"y",startEdge:"y"===n?"top":"rtl"===t?"right":"left",endEdge:"y"===n?"bottom":"rtl"===t?"left":"right",measureSize:function(e){const{width:t,height:i}=e;return"x"===n?t:i}}}(l,d),E=$.measureSize(C),k=function(e){const t={measure:function(t){return e*(t/100)}};return t}(E),A=Mb(c,E),T=!h&&!!y,I=h||!!y,{slideSizes:D,slideSizesWithGaps:z,startGap:j,endGap:O}=function(e,t,n,i,a,r){const{measureSize:s,startEdge:o,endEdge:c}=e,l=n[0]&&a,d=function(){if(!l)return 0;const e=n[0];return gb(t[o]-e[o])}(),u=function(){if(!l)return 0;const e=r.getComputedStyle(vb(i));return parseFloat(e.getPropertyValue(`margin-${c}`))}(),h=n.map(s),m=n.map(((e,t,n)=>{const i=!t,a=t===yb(n);return i?h[t]+d:a?h[t]+u:n[t+1][o]-e[o]})).map(gb);return{slideSizes:h,slideSizesWithGaps:m,startGap:d,endGap:u}}($,C,M,n,I,a),R=Lb($,S,E,_,h,C,M,j,O),{snaps:P,snapsAligned:N}=function(e,t,n,i,a){const{startEdge:r,endEdge:s}=e,{groupSlides:o}=a,c=o(i).map((e=>vb(e)[s]-e[0][r])).map(gb).map(t.measure),l=i.map((e=>n[r]-e[r])).map((e=>-gb(e))),d=o(l).map((e=>e[0])).map(((e,t)=>e+c[t]));return{snaps:l,snapsAligned:d}}($,A,C,M,R),L=-vb(P)+vb(z),{snapsContained:F,scrollContainLimit:V}=function(e,t,n,i){const a=Sb(-t+e,0),r=n.map(a.constrain).map((e=>parseFloat(e.toFixed(3)))),s=function(){const e=r[0],t=vb(r);return Sb(r.lastIndexOf(e),r.indexOf(t)+1)}();return{snapsContained:function(){if(t<=e)return[a.max];if("keepSnaps"===i)return r;const{min:n,max:o}=s;return r.slice(n,o)}(),scrollContainLimit:s}}(E,L,N,y),H=T?F:N,{limit:U}=function(e,t,n){const i=t[0];return{limit:Sb(n?i-e:vb(t),i)}}(L,H,h),Z=$b(yb(H),u,h),W=Z.clone(),q=_b(n),B={start:()=>o.start(se),stop:()=>o.stop(se),update:()=>(({dragHandler:e,scrollBody:t,scrollBounds:n,eventHandler:i,animation:a,options:{loop:r}})=>{const s=e.pointerDown();r||n.constrain(s);const o=t.seek().settled();o&&!s&&(a.stop(),i.emit("settle")),o||i.emit("scroll")})(se),render:e=>(({scrollBody:e,translate:t,location:n,offsetLocation:i,scrollLooper:a,slideLooper:r,options:{loop:s}},o)=>{const c=e.velocity();i.set(n.get()-c+c*o),s&&(a.loop(e.direction()),r.loop()),t.to(i.get())})(se,e)},Q=H[Z.get()],Y=jb(Q),G=jb(Q),K=jb(Q),X=function(e,t,n,i){let a=!0,r=0,s=0,o=n,c=i,l=e.get(),d=0;function u(e){return o=e,m}function h(e){return c=e,m}const m={direction:function(){return s},duration:function(){return o},velocity:function(){return r},seek:function(){const n=t.get()-e.get();let i=0;return o?(r+=n/o,r*=c,l+=r,e.add(r),i=l-d):(r=0,e.set(t),i=n),s=pb(i),d=l,a=gb(n)<.001,m},settled:function(){return a},useBaseFriction:function(){return h(i)},useBaseDuration:function(){return u(n)},useFriction:h,useDuration:u};return m}(Y,K,m,.68),J=zb(h,H,L,U,K),ee=function(e,t,n,i,a,r,s){function o(i){const o=i.distance,c=i.index!==t.get();r.add(o),o&&(a.duration()?e.start():(e.update(),e.render(1),e.update())),c&&(n.set(t.get()),t.set(i.index),s.emit("select"))}const c={distance:function(e,t){o(i.byDistance(e,t))},index:function(e,n){const a=t.clone().set(e);o(i.byIndex(a.get(),n))}};return c}(B,Z,W,J,X,K,s),te=function(e){const{max:t,length:n}=e,i={get:function(e){return n?(e-t)/-n:0}};return i}(U),ne=Eb(),ie=Nb(t,n,s,f),{slideRegistry:ae}=function(e,t,n,i,a,r){const{groupSlides:s}=a,{min:o,max:c}=i;return{slideRegistry:function(){const i=s(r);return!n||t<=e?i:i.slice(o,c).map(((e,t,n)=>{const i=!t,a=!i&&t===yb(n);return i?bb(vb(n[0])+1):a?bb(yb(r)-vb(n)[0]+1,vb(n)[0]):e}))}()}}(E,L,T,V,R,q),re=function(e,t,n,i,a,r){let s=0;function o(e){"Tab"===e.code&&(s=(new Date).getTime())}function c(o){r.add(o,"focus",(()=>{if((new Date).getTime()-s>10)return;e.scrollLeft=0;const r=t.indexOf(o),c=n.findIndex((e=>e.includes(r)));db(c)&&(a.useDuration(0),i.index(c,0))}),{passive:!0,capture:!0})}return{init:function(){r.add(document,"keydown",o,!1),t.forEach(c)}}}(e,n,ae,ee,X,ne),se={ownerDocument:i,ownerWindow:a,eventHandler:s,containerRect:C,slideRects:M,animation:B,axis:$,direction:S,dragHandler:kb($,S,e,i,a,K,Ab($,a),Y,B,ee,X,J,Z,s,k,g,p,v,.68,x),eventStore:ne,percentOfView:k,index:Z,indexPrevious:W,limit:U,location:Y,offsetLocation:G,options:r,resizeHandler:Tb(t,s,a,n,$,b),scrollBody:X,scrollBounds:Ib(U,Y,K,X,k),scrollLooper:Db(L,U,G,[Y,G,K]),scrollProgress:te,scrollSnapList:H.map(te.get),scrollSnaps:H,scrollTarget:J,scrollTo:ee,slideLooper:Rb($,S,E,L,D,z,P,H,G,n),slideFocus:re,slidesHandler:Pb(t,s,w),slidesInView:ie,slideIndexes:q,slideRegistry:ae,slidesToScroll:R,target:K,translate:Ob($,S,t)};return se}const Vb={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function Hb(e){function t(e,t){return xb(e,t||{})}const n={mergeOptions:t,optionsAtMedia:function(n){const i=n.breakpoints||{},a=wb(i).filter((t=>e.matchMedia(t).matches)).map((e=>i[e])).reduce(((e,n)=>t(e,n)),{});return t(n,a)},optionsMediaQueries:function(t){return t.map((e=>wb(e.breakpoints||{}))).reduce(((e,t)=>e.concat(t)),[]).map(e.matchMedia)}};return n}function Ub(e,t,n){const i=e.ownerDocument,a=i.defaultView,r=Hb(a),s=function(e){let t=[];return{init:function(n,i){return t=i.filter((({options:t})=>!1!==e.optionsAtMedia(t).active)),t.forEach((t=>t.init(n,e))),i.reduce(((e,t)=>Object.assign(e,{[t.name]:t})),{})},destroy:function(){t=t.filter((e=>e.destroy()))}}}(r),o=Eb(),c=Eb(),l=function(){const e={};let t;function n(t){return e[t]||[]}const i={init:function(e){t=e},emit:function(e){return n(e).forEach((n=>n(t,e))),i},off:function(t,a){return e[t]=n(t).filter((e=>e!==a)),i},on:function(t,a){return e[t]=n(t).concat([a]),i}};return i}(),{animationRealms:d}=Ub,{mergeOptions:u,optionsAtMedia:h,optionsMediaQueries:m}=r,{on:g,off:p,emit:f}=l,_=k;let v,y,b,w,x=!1,C=u(Vb,Ub.globalOptions),M=u(C),S=[];function $(t,n){const r=Fb(e,b,w,i,a,t,l,n);if(t.loop&&!r.slideLooper.canLoop()){return $(Object.assign({},t,{loop:!1}),n)}return r}function E(t,n){if(x)return;const r=d.find((e=>e.window===a)),l=r||function(e){const t=1e3/60;let n=[],i=null,a=0,r=0;function s(o){i||(i=o);const c=o-i;for(i=o,a+=c;a>=t;)n.forEach((({animation:e})=>e.update())),a-=t;const l=gb(a/t);n.forEach((({animation:e})=>e.render(l))),r&&e.requestAnimationFrame(s)}const o={start:function(t){n.includes(t)||n.push(t),r||(r=e.requestAnimationFrame(s))},stop:function(t){n=n.filter((e=>e!==t)),n.length||(e.cancelAnimationFrame(r),i=null,a=0,r=0)},reset:function(){i=null,a=0},window:e};return o}(a);r||d.push(l),C=u(C,t),M=h(C),S=n||S,function(){const{container:t,slides:n}=M,i=ub(t)?e.querySelector(t):t;b=i||e.children[0];const a=ub(n)?b.querySelectorAll(n):n;w=[].slice.call(a||b.children)}(),v=$(M,l),m([C,...S.map((({options:e})=>e))]).forEach((e=>o.add(e,"change",k))),M.active&&(v.translate.to(v.location.get()),v.slidesInView.init(),v.slideFocus.init(),v.eventHandler.init(D),v.resizeHandler.init(D),v.slidesHandler.init(D),c.add(i,"visibilitychange",(()=>{i.hidden&&l.reset()})),v.options.loop&&v.slideLooper.loop(),b.offsetParent&&w.length&&v.dragHandler.init(D),y=s.init(D,S))}function k(e,t){const n=I();A(),E(u({startIndex:n},e),t),l.emit("reInit")}function A(){v.dragHandler.destroy(),v.animation.stop(),v.eventStore.clear(),v.translate.clear(),v.slideLooper.clear(),v.resizeHandler.destroy(),v.slidesHandler.destroy(),s.destroy(),o.clear(),c.clear()}function T(e,t,n){M.active&&!x&&(v.scrollBody.useBaseFriction().useDuration(t?0:M.duration),v.scrollTo.index(e,n||0))}function I(){return v.index.get()}const D={canScrollNext:function(){return v.index.add(1).get()!==I()},canScrollPrev:function(){return v.index.add(-1).get()!==I()},containerNode:function(){return b},internalEngine:function(){return v},destroy:function(){x||(x=!0,o.clear(),A(),l.emit("destroy"))},off:p,on:g,emit:f,plugins:function(){return y},previousScrollSnap:function(){return v.indexPrevious.get()},reInit:_,rootNode:function(){return e},scrollNext:function(e){T(v.index.add(1).get(),!0===e,-1)},scrollPrev:function(e){T(v.index.add(-1).get(),!0===e,1)},scrollProgress:function(){return v.scrollProgress.get(v.location.get())},scrollSnapList:function(){return v.scrollSnapList},scrollTo:T,selectedScrollSnap:I,slideNodes:function(){return w},slidesInView:function(){return v.slidesInView.get()},slidesNotInView:function(){return v.slidesInView.get(!1)}};return E(t,n),setTimeout((()=>l.emit("init")),0),D}function Zb(){return Zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zb.apply(this,arguments)}Ub.animationRealms=[],Ub.globalOptions=void 0;var Wb=function(e,t){return void 0===t&&(t=.996),e*t/(1-t)};function qb(e,t){if(e.length!==t.length)throw new Error("vectors must be same length");return e.map((function(e,n){return e+t[n]}))}function Bb(e){return Math.max.apply(Math,e.map(Math.abs))}function Qb(e){return Object.freeze(e),Object.values(e).forEach((function(e){null===e||"object"!=typeof e||Object.isFrozen(e)||Qb(e)})),e}var Yb=[1,18,"undefined"!=typeof window&&window.innerHeight||800];var Gb=[-1,-1,-1];var Kb=function(e){return Zb({},e,{axisDelta:e.axisDelta.map((function(e){return t=e,n=-700,i=700,Math.min(Math.max(n,t),i);var t,n,i}))})},Xb=.6,Jb=.96,ew=2,tw=5,nw=Qb({preventWheelAction:!0,reverseSign:[!0,!0,!1]}),iw=400;function aw(){return{isStarted:!1,isStartPublished:!1,isMomentum:!1,startTime:0,lastAbsDelta:1/0,axisMovement:[0,0,0],axisVelocity:[0,0,0],accelerationFactors:[],scrollPoints:[],scrollPointsToMerge:[],willEndTimeout:iw}}function rw(e){void 0===e&&(e={});var t,n,i,a=function(){var e={};function t(t,n){e[t]=(e[t]||[]).filter((function(e){return e!==n}))}return Qb({on:function(n,i){return e[n]=(e[n]||[]).concat(i),function(){return t(n,i)}},off:t,dispatch:function(t,n){t in e&&e[t].forEach((function(e){return e(n)}))}})}(),r=a.on,s=a.off,o=a.dispatch,c=nw,l=aw(),d=!1,u=function(e){Array.isArray(e)?e.forEach((function(e){return g(e)})):g(e)},h=function(e){return void 0===e&&(e={}),Object.values(e).some((function(e){return null==e}))?c:c=Qb(Zb({},nw,c,e))},m=function(e){var i=Zb({event:t,isStart:!1,isEnding:!1,isMomentumCancel:!1,isMomentum:l.isMomentum,axisDelta:[0,0,0],axisVelocity:l.axisVelocity,axisMovement:l.axisMovement,get axisMovementProjection(){return qb(i.axisMovement,i.axisVelocity.map((function(e){return Wb(e)})))}},e);o("wheel",Zb({},i,{previous:n})),n=i},g=function(e){var n=Kb(function(e,t){if(!t)return e;var n=!0===t?Gb:t.map((function(e){return e?-1:1}));return Zb({},e,{axisDelta:e.axisDelta.map((function(e,t){return e*n[t]}))})}(function(e){var t=e.deltaX*Yb[e.deltaMode],n=e.deltaY*Yb[e.deltaMode],i=(e.deltaZ||0)*Yb[e.deltaMode];return{timeStamp:e.timeStamp,axisDelta:[t,n,i]}}(e),c.reverseSign)),i=n.axisDelta,a=n.timeStamp,r=Bb(i);e.preventDefault&&function(e,t){var n=c.preventWheelAction,i=t[0],a=t[1],r=t[2];if("boolean"==typeof n)return n;switch(n){case"x":return Math.abs(i)>=e;case"y":return Math.abs(a)>=e;case"z":return Math.abs(r)>=e;default:return!1}}(r,i)&&e.preventDefault(),l.isStarted?l.isMomentum&&r>Math.max(2,2*l.lastAbsDelta)&&(M(!0),x()):x(),0===r&&Object.is&&Object.is(e.deltaX,-0)?d=!0:(t=e,l.axisMovement=qb(l.axisMovement,i),l.lastAbsDelta=r,l.scrollPointsToMerge.push({axisDelta:i,timeStamp:a}),p(),m({axisDelta:i,isStart:!l.isStartPublished}),l.isStartPublished=!0,C())},p=function(){var e;l.scrollPointsToMerge.length===ew?(l.scrollPoints.unshift({axisDeltaSum:l.scrollPointsToMerge.map((function(e){return e.axisDelta})).reduce(qb),timeStamp:(e=l.scrollPointsToMerge.map((function(e){return e.timeStamp})),e.reduce((function(e,t){return e+t}))/e.length)}),_(),l.scrollPointsToMerge.length=0,l.scrollPoints.length=1,l.isMomentum||b()):l.isStartPublished||f()},f=function(){var e;l.axisVelocity=(e=l.scrollPointsToMerge,e[e.length-1]).axisDelta.map((function(e){return e/l.willEndTimeout}))},_=function(){var e=l.scrollPoints,t=e[0],n=e[1];if(n&&t){var i=t.timeStamp-n.timeStamp;if(!(i<=0)){var a=t.axisDeltaSum.map((function(e){return e/i})),r=a.map((function(e,t){return e/(l.axisVelocity[t]||1)}));l.axisVelocity=a,l.accelerationFactors.push(r),v(i)}}},v=function(e){var t=10*Math.ceil(e/10)*1.2;l.isMomentum||(t=Math.max(100,2*t)),l.willEndTimeout=Math.min(1e3,Math.round(t))},y=function(e){return 0===e||e<=Jb&&e>=Xb},b=function(){if(l.accelerationFactors.length>=tw){if(d&&(d=!1,Bb(l.axisVelocity)>=.2))return void w();var e=l.accelerationFactors.slice(-1*tw);e.every((function(e){var t=!!e.reduce((function(e,t){return e&&e<1&&e===t?1:0})),n=e.filter(y).length===e.length;return t||n}))&&w(),l.accelerationFactors=e}},w=function(){l.isMomentum=!0},x=function(){(l=aw()).isStarted=!0,l.startTime=Date.now(),n=void 0,d=!1},C=function(){clearTimeout(i),i=setTimeout(M,l.willEndTimeout)},M=function(e){void 0===e&&(e=!1),l.isStarted&&(l.isMomentum&&e?m({isEnding:!0,isMomentumCancel:!0}):m({isEnding:!0}),l.isMomentum=!1,l.isStarted=!1)},S=function(e){var t=[],n=function(n){n.removeEventListener("wheel",e),t=t.filter((function(e){return e!==n}))};return Qb({observe:function(i){return i.addEventListener("wheel",e,{passive:!1}),t.push(i),function(){return n(i)}},unobserve:n,disconnect:function(){t.forEach(n)}})}(u),$=S.observe,E=S.unobserve,k=S.disconnect;return h(e),Qb({on:r,off:s,observe:$,unobserve:E,disconnect:k,feedWheel:u,updateOptions:h})}var sw={active:!0,breakpoints:{},wheelDraggingClass:"is-wheel-dragging",forceWheelAxis:void 0,target:void 0};function ow(e){var t;void 0===e&&(e={});var n=function(){};var i={name:"wheelGestures",options:e,init:function(i,a){var r,s,o=a.mergeOptions,c=a.optionsAtMedia,l=o(sw,ow.globalOptions),d=o(l,e);t=c(d);var u,h=i.internalEngine(),m=null!=(r=t.target)?r:i.containerNode().parentNode,g=null!=(s=t.forceWheelAxis)?s:h.options.axis,p=rw({preventWheelAction:g,reverseSign:[!0,!0,!1]}),f=p.observe(m),_=p.on("wheel",(function(e){var i=e.axisDelta,a=i[0],r=i[1],s="x"===g?a:r,o="x"===g?r:a,c=e.isMomentum&&e.previous&&!e.previous.isMomentum,l=e.isEnding&&!e.isMomentum||c;Math.abs(s)>Math.abs(o)&&!v&&!e.isMomentum&&function(e){try{x(u=new MouseEvent("mousedown",e.event))}catch(e){return n()}v=!0,document.documentElement.addEventListener("mousemove",b,!0),document.documentElement.addEventListener("mouseup",b,!0),void document.documentElement.addEventListener("mousedown",b,!0),t.wheelDraggingClass&&m.classList.add(t.wheelDraggingClass)}(e);if(!v)return;l?function(e){v=!1,x(w("mouseup",e)),y(),t.wheelDraggingClass&&m.classList.remove(t.wheelDraggingClass)}(e):x(w("mousemove",e))})),v=!1;function y(){document.documentElement.removeEventListener("mousemove",b,!0),document.documentElement.removeEventListener("mouseup",b,!0),document.documentElement.removeEventListener("mousedown",b,!0)}function b(e){v&&e.isTrusted&&e.stopImmediatePropagation()}function w(e,t){var n,i;if(g===h.options.axis){var a=t.axisMovement;n=a[0],i=a[1]}else{var r=t.axisMovement;i=r[0],n=r[1]}return new MouseEvent(e,{clientX:u.clientX+n,clientY:u.clientY+i,screenX:u.screenX+n,screenY:u.screenY+i,movementX:n,movementY:i,button:0,bubbles:!0,cancelable:!0,composed:!0})}function x(e){i.containerNode().dispatchEvent(e)}n=function(){f(),_(),y()}},destroy:function(){return n()}};return i}ow.globalOptions=void 0;class cw{constructor(e,t,n){this._mutationObserver=new MutationObserver(((e,t)=>this._refreshCarouselContents())),this._refreshCarouselContents=()=>{const e=Rp(this._parent);!hp(this._carousel.slideNodes(),e)&&(this._carousel.destroy(),this._carousel=this._createCarousel(e))},this._root=e,this._parent=t,this._direction=n?.direction??"horizontal",this._transitionEffect=n?.transitionEffect??"slide",this._startIndex=n?.startIndex??0,this._dragFree=n?.dragFree??!1,this._loop=n?.loop??!1,this._draggable=n?.dragEnabled??!0,this._plugins=n?.plugins??[],this._carousel=this._createCarousel(Rp(this._parent)),t instanceof HTMLSlotElement&&t.addEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.observe(this._parent,{childList:!0})}destroy(){this._parent instanceof HTMLSlotElement&&this._parent.removeEventListener("slotchange",this._refreshCarouselContents),this._mutationObserver.disconnect(),this._carousel.destroy()}getSlide(e){return this._carousel.slideNodes()[e]??null}getSelectedSlide(){return this.getSlide(this.getSelectedIndex())}getSelectedIndex(){return this._carousel.selectedScrollSnap()}selectSlide(e){this._carousel.scrollTo(e,"none"===this._transitionEffect)}_createCarousel(e){const t=Ub(this._root,{slides:e,axis:"horizontal"===this._direction?"x":"y",duration:20,startIndex:this._startIndex,dragFree:this._dragFree,loop:this._loop,containScroll:"trimSnaps",watchSlides:!1,watchResize:!1,watchDrag:this._draggable},[...this._plugins,...e.length>1?[ow({forceWheelAxis:"y"})]:[]]),n=()=>{const e=t.selectedScrollSnap(),n=t.slideNodes()[e]??null;return n?{index:e,element:n}:null},i=()=>{const e=n();e&&_p(this._parent,"carousel:select",e)};return t.on("select",(()=>i())),t.on("settle",(()=>{const e=n();e&&_p(this._parent,"carousel:settle",e)})),t}}let lw=class extends ne{constructor(){super(...arguments),this.direction="horizontal",this.dragEnabled=!0,this.selected=0,this._refParent=Me(),this._refRoot=Me(),this._carousel=null}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){this._carousel?.destroy(),this._carousel=null,super.disconnectedCallback()}willUpdate(e){e.has("direction")&&this.setAttribute("direction",this.direction);["direction","dragEnabled","dragFree","loop","plugins","transitionEffect"].some((t=>e.has(t)))&&(this._carousel?.destroy(),this._carousel=null)}render(){return P` <div class="embla">
      <slot name="previous"></slot>
      <div ${Ee(this._refRoot)} class="embla__viewport">
        <div class="embla__container">
          <slot ${Ee(this._refParent)}></slot>
        </div>
      </div>
      <slot name="next"></slot>
    </div>`}updated(e){!this._carousel&&this._refRoot.value&&this._refParent.value?this._carousel=new cw(this._refRoot.value,this._refParent.value,{direction:this.direction,dragEnabled:this.dragEnabled,dragFree:this.dragFree,startIndex:this.selected,transitionEffect:this.transitionEffect,loop:this.loop,plugins:this.plugins}):e.has("selected")&&this._carousel?.selectSlide(this.selected)}static get styles(){return s(":host {\n  display: block;\n  height: 100%;\n  width: 100%;\n  position: relative;\n}\n\n.embla {\n  width: 100%;\n  height: 100%;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.embla__container {\n  display: flex;\n  width: 100%;\n  height: 100%;\n  user-select: none;\n  -webkit-touch-callout: none;\n  -khtml-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n:host([direction=vertical]) .embla__container {\n  flex-direction: column;\n}\n\n:host([direction=horizontal]) .embla__container {\n  flex-direction: row;\n}\n\n.embla__viewport {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.embla__viewport.is-draggable {\n  cursor: move;\n  cursor: grab;\n}\n\n.embla__viewport.is-dragging {\n  cursor: grabbing;\n}\n\n:host([direction=vertical]) ::slotted(.embla__slide) {\n  margin-bottom: 5px;\n}\n\n:host([direction=horizontal]) ::slotted(.embla__slide) {\n  margin-right: 5px;\n}")}};e([se({attribute:!0,reflect:!0})],lw.prototype,"direction",void 0),e([se({attribute:!0})],lw.prototype,"transitionEffect",void 0),e([se({attribute:!1})],lw.prototype,"loop",void 0),e([se({attribute:!1})],lw.prototype,"dragFree",void 0),e([se({attribute:!1})],lw.prototype,"dragEnabled",void 0),e([se({attribute:!1})],lw.prototype,"plugins",void 0),e([se({attribute:!1})],lw.prototype,"selected",void 0),lw=e([ae("frigate-card-carousel")],lw);var dw=":host {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-left: 5px;\n  padding: 5px;\n  color: var(--primary-text-color);\n  overflow: hidden;\n  column-gap: 5%;\n}\n\ndiv.title {\n  font-size: 1.2rem;\n  font-weight: bold;\n}\n\ndiv.details {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  --mdc-icon-size: 16px;\n  min-height: 0px;\n}";const uw=(e,t,n,i)=>{const a={...i?.cardWideConfig&&{cardWideConfig:i.cardWideConfig}};return P` ${t.render({initial:()=>i?.inProgressFunc?.()??Iy(a),pending:()=>i?.inProgressFunc?.()??Iy(a),error:t=>{Cp(t),jy(e,t)},complete:n})}`},hw=0,mw=Symbol();
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class gw{constructor(e,t,n){this.o=0,this.status=0,this.autoRun=!0,this.i=e,this.i.addController(this);const i="object"==typeof t?t:{task:t,args:n};this.t=i.task,this.h=i.args,void 0!==i.autoRun&&(this.autoRun=i.autoRun),this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))}hostUpdated(){this.performTask()}async performTask(){var e;const t=null===(e=this.h)||void 0===e?void 0:e.call(this);this.shouldRun(t)&&this.run(t)}shouldRun(e){return this.autoRun&&this.v(e)}async run(e){var t;let n,i;null!=e||(e=null===(t=this.h)||void 0===t?void 0:t.call(this)),2!==this.status&&3!==this.status||(this.taskComplete=new Promise(((e,t)=>{this.l=e,this.u=t}))),this.status=1,this._=void 0,this.m=void 0,this.i.requestUpdate();const a=++this.o;try{n=await this.t(e)}catch(e){i=e}this.o===a&&(n===mw?this.status=0:(void 0===i?(this.status=2,this.l(n)):(this.status=3,this.u(i)),this.m=n,this._=i),this.i.requestUpdate())}get value(){return this.m}get error(){return this._}render(e){var t,n,i,a;switch(this.status){case 0:return null===(t=e.initial)||void 0===t?void 0:t.call(e);case 1:return null===(n=e.pending)||void 0===n?void 0:n.call(e);case 2:return null===(i=e.complete)||void 0===i?void 0:i.call(e,this.value);case 3:return null===(a=e.error)||void 0===a?void 0:a.call(e,this.error);default:this.status}}v(e){const t=this.T;return this.T=e,Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.some(((e,n)=>f(e,t[n]))):e!==t}}const pw=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,fw=(e,t,n,i=!0)=>new gw(e,{args:()=>[!!t(),n()],task:async([e,n])=>{const i=t();return e&&i&&n?(async(e,t)=>e&&t?t.startsWith("data:")||t.match(pw)?t:new Promise(((n,i)=>{e?e.fetchWithAuth(t).then((e=>e.blob())).then((e=>{const t=new FileReader;t.onload=()=>{const e=t.result;n("string"==typeof e?e:null)},t.onerror=e=>i(e),t.readAsDataURL(e)})):i()})):null)(i,n):null},autoRun:i}),_w=300;let vw=class extends ne{constructor(){super(),this._intersectionObserver=new IntersectionObserver(this._intersectionHandler.bind(this))}connectedCallback(){this._intersectionObserver.observe(this),super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback(),this._intersectionObserver.disconnect()}willUpdate(e){e.has("thumbnail")&&(this._embedThumbnailTask=fw(this,(()=>this.hass),(()=>this.thumbnail),!1),this._intersectionObserver.unobserve(this),this._intersectionObserver.observe(this))}_intersectionHandler(e){this._embedThumbnailTask?.status===hw&&e.some((e=>e.isIntersecting))&&this._embedThumbnailTask?.run()}render(){if(!this._embedThumbnailTask)return;const e=P`<ha-icon
      icon="mdi:image-off"
      title=${xm("thumbnail.no_thumbnail")}
    ></ha-icon> `;return P`${this.thumbnail?uw(this,this._embedThumbnailTask,(e=>e?P`<img src="${e}" />`:P``),{inProgressFunc:()=>e}):e} `}static get styles(){return s(":host {\n  display: block;\n  overflow: hidden;\n  aspect-ratio: 1/1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nimg {\n  display: block;\n}\n\nimg,\nha-icon {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0;\n  border-radius: var(--frigate-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  max-width: var(--frigate-card-thumbnail-size);\n  max-height: 100%;\n  aspect-ratio: 1/1;\n  object-fit: cover;\n}\n\nha-icon {\n  --mdc-icon-size: 50%;\n  color: var(--primary-text-color);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  box-sizing: border-box;\n  opacity: 0.2;\n}")}};e([se({attribute:!1})],vw.prototype,"thumbnail",void 0),e([se({attribute:!1})],vw.prototype,"hass",void 0),vw=e([ae("frigate-card-thumbnail-feature-event")],vw);let yw=class extends ne{render(){if(this.date)return P`
      <div class="title">${Dg(this.date,"HH:mm")}</div>
      <div class="subtitle">${Dg(this.date,"MMM do")}</div>
      ${this.cameraTitle?P`<div class="camera">${this.cameraTitle}</div>`:P``}
    `}static get styles(){return s(":host {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  aspect-ratio: 1/1;\n  overflow: hidden;\n  max-width: var(--frigate-card-thumbnail-size);\n  max-height: var(--frigate-card-thumbnail-size);\n  padding: 10px;\n  border: 1px solid var(--secondary-color);\n  background-color: var(--secondary-background-color);\n  border-radius: var(--frigate-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  box-sizing: border-box;\n  color: var(--primary-text-color);\n}\n\ndiv {\n  text-align: center;\n}\n\ndiv.title {\n  font-size: 1.5rem;\n}\n\ndiv.camera {\n  font-size: 0.7em;\n}")}};e([se({attribute:!1})],yw.prototype,"date",void 0),e([se({attribute:!1})],yw.prototype,"cameraTitle",void 0),yw=e([ae("frigate-card-thumbnail-feature-recording")],yw);let bw=class extends ne{render(){if(!this.media)return;const e=this.media.getScore(),t=e?(100*e).toFixed(2)+"%":null,n=this.media.getStartTime(),i=n?Sp(n):null,a=this.media.getEndTime(),r=n&&a?kp(n,a):null,s=this.media.inProgress()?xm("event.in_progress"):null,o=vp(this.media.getWhat()?.join(", "))??null,c=vp(this.media.getWhere()?.join(", "))??null,l=vp(this.media.getTags()?.join(", "))??null,d=o||l?(o??"")+(o&&l?": ":"")+(l??""):null,u=this.seek?Dg(this.seek,"HH:mm:ss"):null;return P`
      ${d?P` <div class="title">
            <span title=${d}>${d}</span>
            ${t?P`<span title="${t}">${t}</span>`:""}
          </div>`:""}
      <div class="details">
        ${i?P` <div>
                <ha-icon
                  title=${xm("event.start")}
                  .icon=${"mdi:calendar-clock-outline"}
                ></ha-icon>
                <span title="${i}">${i}</span>
              </div>
              ${r||s?P` <div>
                    <ha-icon
                      title=${xm("event.duration")}
                      .icon=${"mdi:clock-outline"}
                    ></ha-icon>
                    ${r?P`<span title="${r}">${r}</span>`:""}
                    ${s?P`<span title="${s}">${s}</span>`:""}
                  </div>`:""}`:""}
        ${this.cameraTitle?P` <div>
              <ha-icon title=${xm("event.camera")} .icon=${"mdi:cctv"}></ha-icon>
              <span title="${this.cameraTitle}">${this.cameraTitle}</span>
            </div>`:""}
        ${c?P` <div>
              <ha-icon
                title=${xm("event.where")}
                .icon=${"mdi:map-marker-outline"}
              ></ha-icon>
              <span title="${c}">${c}</span>
            </div>`:P``}
        ${l?P` <div>
              <ha-icon title=${xm("event.tag")} .icon=${"mdi:tag"}></ha-icon>
              <span title="${l}">${l}</span>
            </div>`:P``}
        ${u?P` <div>
              <ha-icon
                title=${xm("event.seek")}
                .icon=${"mdi:clock-fast"}
              ></ha-icon>
              <span title="${u}">${u}</span>
            </div>`:P``}
      </div>
    `}static get styles(){return s(dw)}};e([se({attribute:!1})],bw.prototype,"media",void 0),e([se({attribute:!1})],bw.prototype,"seek",void 0),e([se({attribute:!1})],bw.prototype,"cameraTitle",void 0),bw=e([ae("frigate-card-thumbnail-details-event")],bw);let ww=class extends ne{render(){if(!this.media)return;const e=this.media.getStartTime(),t=e?Sp(e):null,n=this.media.getEndTime(),i=e&&n?kp(e,n):null,a=this.media.inProgress()?xm("recording.in_progress"):null,r=this.seek?Dg(this.seek,"HH:mm:ss"):null,s=this.media.getEventCount();return P`
      ${this.cameraTitle?P` <div class="title">
            <span title="${this.cameraTitle}">${this.cameraTitle}</span>
          </div>`:""}
      <div class="details">
        ${t?P` <div>
                <ha-icon
                  title=${xm("recording.start")}
                  .icon=${"mdi:calendar-clock-outline"}
                ></ha-icon>
                <span title="${t}">${t}</span>
              </div>
              ${i||a?P` <div>
                    <ha-icon
                      title=${xm("recording.duration")}
                      .icon=${"mdi:clock-outline"}
                    ></ha-icon>
                    ${i?P`<span title="${i}">${i}</span>`:""}
                    ${a?P`<span title="${a}">${a}</span>`:""}
                  </div>`:""}`:""}
        ${r?P` <div>
              <ha-icon
                title=${xm("event.seek")}
                .icon=${"mdi:clock-fast"}
              ></ha-icon>
              <span title="${r}">${r}</span>
            </div>`:P``}
        ${null!==s?P`<div>
              <ha-icon
                title=${xm("recording.events")}
                .icon=${"mdi:shield-alert"}
              ></ha-icon>
              <span title="${s}">${s}</span>
            </div>`:""}
      </div>
    `}static get styles(){return s(dw)}};e([se({attribute:!1})],ww.prototype,"media",void 0),e([se({attribute:!1})],ww.prototype,"seek",void 0),e([se({attribute:!1})],ww.prototype,"cameraTitle",void 0),ww=e([ae("frigate-card-thumbnail-details-recording")],ww);let xw=class extends ne{constructor(){super(...arguments),this.details=!1,this.show_favorite_control=!1,this.show_timeline_control=!1,this.show_download_control=!1}render(){if(!this.media||!this.cameraManager||!this.hass)return;const e=this.media.getThumbnail(),t=this.media.getTitle()??"",n={star:!0,starred:!!this.media?.isFavorite()},i=this.show_timeline_control&&(!hy.isRecording(this.media)||this.media.getStartTime()&&this.media.getEndTime()),a=this.cameraManager?.getMediaCapabilities(this.media),r=this.show_favorite_control&&this.media&&this.hass&&a?.canFavorite,s=this.show_download_control&&this.hass&&this.media.getID()&&a?.canDownload,o=this.cameraManager.getCameraMetadata(this.media.getCameraID())?.title;return P`
      ${hy.isEvent(this.media)?P`<frigate-card-thumbnail-feature-event
            aria-label="${t??""}"
            title=${t}
            .hass=${this.hass}
            .thumbnail=${e??void 0}
          ></frigate-card-thumbnail-feature-event>`:hy.isRecording(this.media)?P`<frigate-card-thumbnail-feature-recording
            aria-label="${t??""}"
            title="${t??""}"
            .cameraTitle=${this.details?void 0:o}
            .date=${this.media.getStartTime()??void 0}
          ></frigate-card-thumbnail-feature-recording>`:P``}
      ${r?P` <ha-icon
            class="${he(n)}"
            icon=${this.media.isFavorite()?"mdi:star":"mdi:star-outline"}
            title=${xm("thumbnail.retain_indefinitely")}
            @click=${async e=>{if(gl(e),this.hass&&this.media){try{await(this.cameraManager?.favoriteMedia(this.media,!this.media?.isFavorite()))}catch(e){return void Cp(e)}this.requestUpdate()}}}
          /></ha-icon>`:""}
      ${this.details&&hy.isEvent(this.media)?P`<frigate-card-thumbnail-details-event
            .media=${this.media??void 0}
            .cameraTitle=${o}
            .seek=${this.seek}
          ></frigate-card-thumbnail-details-event>`:this.details&&hy.isRecording(this.media)?P`<frigate-card-thumbnail-details-recording
            .media=${this.media??void 0}
            .cameraTitle=${o}
            .seek=${this.seek}
          ></frigate-card-thumbnail-details-recording>`:P``}
      ${i?P`<ha-icon
            class="timeline"
            icon="mdi:target"
            title=${xm("thumbnail.timeline")}
            @click=${e=>{gl(e),this.view&&this.media&&this.view.evolve({view:"timeline",queryResults:this.view.queryResults?.clone().selectResultIfFound((e=>e===this.media))}).removeContext("timeline").dispatchChangeEvent(this)}}
          ></ha-icon>`:""}
      ${s?P` <ha-icon
            class="download"
            icon=${"mdi:download"}
            title=${xm("thumbnail.download")}
            @click=${async e=>{if(gl(e),this.hass&&this.cameraManager&&this.media)try{await kv(this.hass,this.cameraManager,this.media)}catch(e){jy(this,e)}}}
          ></ha-icon>`:""}
    `}static get styles(){return s(":host {\n  display: flex;\n  flex-direction: row;\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n  transition: transform 0.2s linear;\n}\n\n:host(:not([details])) {\n  aspect-ratio: 1/1;\n}\n\n:host([details]) {\n  border: 1px solid var(--primary-color);\n  border-radius: var(--frigate-card-css-border-radius, var(--ha-card-border-radius, 4px));\n  padding: 2px;\n  background-color: var(--primary-background-color, black);\n}\n\n:host(:hover) {\n  transform: scale(1.04);\n}\n\nha-icon {\n  position: absolute;\n  border-radius: 50%;\n  opacity: 0.5;\n  color: var(--primary-color);\n  cursor: pointer;\n  transition: opacity 0.2s ease-in-out, color 0.2s ease-in-out;\n}\n\nha-icon:hover {\n  opacity: 1;\n}\n\nha-icon.star {\n  top: 3px;\n  left: 3px;\n}\n\nha-icon.star.starred {\n  color: gold;\n}\n\nha-icon.timeline {\n  top: 3px;\n  right: 3px;\n}\n\nha-icon.download {\n  right: 3px;\n  bottom: 3px;\n}\n\nfrigate-card-thumbnail-details-event, frigate-card-thumbnail-details-recording {\n  flex: 1;\n}")}};e([se({attribute:!1})],xw.prototype,"cameraManager",void 0),e([se({attribute:!0})],xw.prototype,"media",void 0),e([se({attribute:!0,type:Boolean})],xw.prototype,"details",void 0),e([se({attribute:!0,type:Boolean})],xw.prototype,"show_favorite_control",void 0),e([se({attribute:!0,type:Boolean})],xw.prototype,"show_timeline_control",void 0),e([se({attribute:!0,type:Boolean})],xw.prototype,"show_download_control",void 0),e([se({attribute:!1})],xw.prototype,"seek",void 0),xw=e([ae("frigate-card-thumbnail")],xw);let Cw=class extends ne{constructor(){super(...arguments),this.fadeThumbnails=!1,this._thumbnailSlides=[],this._plugins=[lb()]}willUpdate(e){if(e.has("config")){this.config?.size&&this.style.setProperty("--frigate-card-thumbnail-size",`${this.config.size}px`);const e=this._getDirection();e?this.setAttribute("direction",e):this.removeAttribute("direction")}["cameraManager","config","transitionEffect","view"].some((t=>e.has(t)))&&(this._thumbnailSlides=this._renderSlides()),e.has("view")&&this.style.setProperty("--frigate-card-carousel-thumbnail-opacity",this.fadeThumbnails&&null!==this._getSelectedSlide()?"0.4":"1.0")}_getSelectedSlide(e){return(e??this.view)?.queryResults?.getSelectedIndex()??null}_renderSlides(){const e=[],t=this.view?.context?.mediaViewer?.seek,n=this._getSelectedSlide();for(const i of this.view?.queryResults?.getResults()??[]){const a=e.length,r={embla__slide:!0,"slide-selected":n===a};e.push(P` <frigate-card-thumbnail
        class="${he(r)}"
        .cameraManager=${this.cameraManager}
        .hass=${this.hass}
        .media=${i}
        .view=${this.view}
        .seek=${t&&i.includesTime(t)?t:void 0}
        ?details=${!!this.config?.show_details}
        ?show_favorite_control=${this.config?.show_favorite_control}
        ?show_timeline_control=${this.config?.show_timeline_control}
        ?show_download_control=${this.config?.show_download_control}
        @click=${e=>{this.view&&this.view.queryResults&&_p(this,"thumbnail-carousel:tap",{queryResults:this.view.queryResults.clone().selectIndex(a)}),gl(e)}}
      >
      </frigate-card-thumbnail>`)}return e}_getDirection(){return"left"===this.config?.mode||"right"===this.config?.mode?"vertical":"above"===this.config?.mode||"below"===this.config?.mode?"horizontal":null}render(){const e=this._getDirection();if(this._thumbnailSlides.length&&this.config&&e)return P`<frigate-card-carousel
      direction=${e}
      .plugins=${this._plugins}
      .selected=${this._getSelectedSlide()??0}
      .dragFree=${!0}
    >
      ${this._thumbnailSlides}
    </frigate-card-carousel>`}static get styles(){return s(":host {\n  --frigate-card-thumbnail-size-max: 175px;\n  --frigate-card-thumbnail-details-width: calc(\n    var(--frigate-card-thumbnail-size) + 200px\n  );\n}\n\n:host {\n  display: block;\n  width: 100%;\n  height: 100%;\n  --frigate-card-carousel-thumbnail-opacity: 1;\n}\n\n:host([direction=vertical]) {\n  height: 100%;\n}\n\n:host([direction=horizontal]) {\n  height: auto;\n}\n\n.embla__slide {\n  flex: 0 0 auto;\n  opacity: var(--frigate-card-carousel-thumbnail-opacity);\n}\n\n.embla__slide.slide-selected {\n  opacity: 1;\n}\n\nfrigate-card-thumbnail {\n  width: var(--frigate-card-thumbnail-size);\n  height: var(--frigate-card-thumbnail-size);\n  max-width: 100%;\n}\n\nfrigate-card-thumbnail[details] {\n  width: var(--frigate-card-thumbnail-details-width);\n}")}};e([se({attribute:!1})],Cw.prototype,"hass",void 0),e([se({attribute:!1})],Cw.prototype,"view",void 0),e([se({attribute:!1})],Cw.prototype,"cameraManager",void 0),e([se({attribute:!1})],Cw.prototype,"config",void 0),e([se({attribute:!1})],Cw.prototype,"fadeThumbnails",void 0),Cw=e([ae("frigate-card-thumbnail-carousel")],Cw);var Mw=":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}";const Sw=document.createElement("template");Sw.innerHTML='<style>\n:host {\n  background-color: #ffffff;\n  width: 350px;\n  max-width: 75vw;\n\n  visibility: hidden;\n  transition: visibility 0.5s;\n}\n\n:host([open]) {\n  visibility: visible;\n}\n\n::slotted(div) {\n  box-sizing: border-box;\n}\n\n#d {\n  position: fixed;\n  z-index: 99;\n  background-color: inherit;\n  -webkit-overflow-scrolling: touch;\n  overflow: auto;\n  overscroll-behavior: contain;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n  box-sizing: border-box;\n  transform: translateX(-100%);\n  transition: var(\n    --side-drawer-transition,\n    transform 0.25s ease-out\n  );\n  width: inherit;\n  max-width: inherit;\n  border-top-right-radius: inherit;\n  border-bottom-right-radius: inherit;\n}\n\n:host([open]) #d {\n  transform: none;\n  box-shadow: 0px 0px 25px 0px rgba(0, 0, 0, 0.5);\n}\n\n#fs {\n  position: fixed;\n  z-index: 98;\n  background-color: #000000;\n  backdrop-filter: var(--side-drawer-backdrop-filter, none);\n\n  top: 0;\n  bottom: 0;\n  right: -30px; /* hide scrollbar until overscroll bug is fixed */\n  height: 100vh;\n  transition: var(\n    --side-drawer-overlay-transition,\n    opacity linear 0.25s\n  );\n  width: calc(\n    100vw + 30px\n  ); /* put back to just 100vw once overscroll bug fixed */\n  opacity: 0;\n  visibility: hidden;\n\n  overflow: auto;\n  overscroll-behavior: contain;\n}\n\n:host([open]) #fs {\n  opacity: var(--side-drawer-overlay-opacity, 0.7);\n  visibility: visible;\n}\n\n/*\n   * Workaround for bug https://bugs.chromium.org/p/chromium/issues/detail?id=813094\n   * Once bug is fixed and in the wild we can remove this element and make #if overflow:hidden\n   * and set "right: 0; width: 100vw" for #fs\n   */\n#ifs {\n  height: calc(100vh + 1px);\n}\n</style>\n<div id="d"><slot></slot></div>\n<div id="fs"><div id="ifs"></div></div>\n';class $w extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"});e.appendChild(Sw.content.cloneNode(!0)),this._freeSpaceDiv=e.getElementById("fs")}connectedCallback(){this._freeSpaceDiv&&this._freeSpaceDiv.addEventListener("click",this.handleFreeSpaceDivClick),this.upgradeProperty("open")}disconnectedCallback(){document.removeEventListener("keyup",this.handleKeyUp)}upgradeProperty(e){if(this.hasOwnProperty(e)){let t=this[e];delete this[e],this[e]=t}}handleKeyUp=e=>{if(!e.altKey&&"Escape"===e.key)e.preventDefault(),this.open=!1};get open(){return this.hasAttribute("open")}set open(e){e?this.hasAttribute("open")||this.setAttribute("open",""):this.hasAttribute("open")&&this.removeAttribute("open")}static get observedAttributes(){return["open"]}attributeChangedCallback(e,t,n){"open"===e&&(this.open?(this.setAttribute("tabindex","0"),this.setAttribute("aria-disabled","false"),this.focus({preventScroll:!0}),document.addEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("open",{bubbles:!0}))):(this.setAttribute("tabindex","-1"),this.setAttribute("aria-disabled","true"),document.removeEventListener("keyup",this.handleKeyUp),this.dispatchEvent(new CustomEvent("close",{bubbles:!0}))))}handleFreeSpaceDivClick=()=>{this.open=!1}}customElements.define("side-drawer",$w);let Ew=class extends ne{constructor(){super(...arguments),this.location="left",this.control=!0,this.open=!1,this.empty=!0,this._refDrawer=Me(),this._refSlot=Me(),this._resizeObserver=new ResizeObserver((()=>this._hideDrawerIfNecessary())),this._isHoverableDevice=Mp()}firstUpdated(e){super.firstUpdated(e);const t=document.createElement("style");t.innerHTML=":host {\n  width: unset;\n}\n\n#fs {\n  display: none;\n  width: 100%;\n  inset: 0;\n}\n\n#d,\n#fs {\n  height: 100%;\n  position: absolute;\n}\n\n#d {\n  overflow: visible;\n  max-width: 90%;\n}\n\n:host([location=right]) #d {\n  left: unset;\n  right: 0;\n  transform: translateX(100%);\n}\n\n:host([location=right][open]) #d {\n  transform: none;\n  box-shadow: var(--frigate-card-css-box-shadow, 0px 0px 25px 0px black);\n}\n\n#ifs {\n  height: 100%;\n}",this._refDrawer.value?.shadowRoot?.appendChild(t)}_slotChanged(){const e=this._refSlot.value?Rp(this._refSlot.value):[];this._resizeObserver.disconnect();for(const t of e)this._resizeObserver.observe(t);this._hideDrawerIfNecessary()}_hideDrawerIfNecessary(){if(!this._refDrawer.value)return;const e=this._refSlot.value?Rp(this._refSlot.value):null;this.empty=!e||!e.length||e.every((e=>{const t=e.getBoundingClientRect();return!t.width||!t.height}))}render(){return P`
      <side-drawer
        ${Ee(this._refDrawer)}
        location="${this.location}"
        ?open=${this.open}
        @mouseleave=${()=>{this.open&&(this.open=!1)}}
      >
        ${this.control?P`
              <div
                class="control-surround"
                @click=${e=>{gl(e),this.open=!this.open}}
              >
                <ha-icon
                  class="control"
                  icon="${this.open?this.icons?.open??"mdi:menu-open":this.icons?.closed??"mdi:menu"}"
                  @mouseenter=${()=>{this._isHoverableDevice&&!this.open&&(this.open=!0)}}
                >
                </ha-icon>
              </div>
            `:""}
        <slot ${Ee(this._refSlot)} @slotchange=${()=>this._slotChanged()}></slot>
      </side-drawer>
    `}static get styles(){return s("side-drawer {\n  background-color: var(--card-background-color);\n}\n\ndiv.control-surround {\n  position: absolute;\n  bottom: 50%;\n  transform: translateY(50%);\n  z-index: 0;\n  padding-top: 20px;\n  padding-bottom: 20px;\n}\n\n:host([location=left]) div.control-surround {\n  padding-right: 12px;\n  left: 100%;\n}\n\n:host([location=right]) div.control-surround {\n  padding-left: 12px;\n  right: 100%;\n}\n\n:host([empty]), :host([empty]) > * {\n  visibility: hidden;\n}\n\n:host(:not([empty])), :host(:not([empty])) > * {\n  visibility: visible;\n}\n\nha-icon.control {\n  color: var(--secondary-color, white);\n  background-color: rgba(0, 0, 0, 0.7);\n  opacity: 0.5;\n  pointer-events: all;\n  --mdc-icon-size: 20px;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  transition: opacity 0.5s ease;\n}\n\n:host([open]) ha-icon.control, ha-icon.control:hover {\n  opacity: 1;\n  background-color: black;\n}\n\n:host([location=left]) ha-icon.control {\n  border-top-right-radius: 20px;\n  border-bottom-right-radius: 20px;\n}\n\n:host([location=right]) ha-icon.control {\n  border-top-left-radius: 20px;\n  border-bottom-left-radius: 20px;\n}")}};e([se({attribute:!0,reflect:!0})],Ew.prototype,"location",void 0),e([se({attribute:!0,reflect:!0,type:Boolean})],Ew.prototype,"control",void 0),e([se({type:Boolean,reflect:!0,attribute:!0})],Ew.prototype,"open",void 0),e([se({attribute:!1})],Ew.prototype,"icons",void 0),e([se({type:Boolean,reflect:!0,attribute:!0})],Ew.prototype,"empty",void 0),Ew=e([ae("frigate-card-drawer")],Ew);let kw=class extends ne{constructor(){super(...arguments),this._refDrawerLeft=Me(),this._refDrawerRight=Me(),this._boundDrawerHandler=this._drawerHandler.bind(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("frigate-card:drawer:open",this._boundDrawerHandler),this.addEventListener("frigate-card:drawer:close",this._boundDrawerHandler)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("frigate-card:drawer:open",this._boundDrawerHandler),this.removeEventListener("frigate-card:drawer:close",this._boundDrawerHandler)}_drawerHandler(e){const t=e.detail.drawer,n=e.type.endsWith(":open");"left"===t&&this._refDrawerLeft.value?this._refDrawerLeft.value.open=n:"right"===t&&this._refDrawerRight.value&&(this._refDrawerRight.value.open=n)}render(){return P` <slot name="above"></slot>
      <slot></slot>
      <frigate-card-drawer
        ${Ee(this._refDrawerLeft)}
        location="left"
        .icons=${this.drawerIcons?.left}
      >
        <slot name="left"></slot>
      </frigate-card-drawer>
      <frigate-card-drawer
        ${Ee(this._refDrawerRight)}
        location="right"
        .icons=${this.drawerIcons?.right}
      >
        <slot name="right"></slot>
      </frigate-card-drawer>
      <slot name="below"></slot>`}static get styles(){return s(":host {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  overflow: hidden;\n}\n\n::slotted(:not([slot])) {\n  flex: 1;\n  min-height: 0px;\n}")}};e([se({attribute:!1})],kw.prototype,"drawerIcons",void 0),kw=e([ae("frigate-card-surround-basic")],kw);let Aw=class extends ne{async _fetchMedia(){this.cameraManager&&this.cardWideConfig&&this.fetchMediaType&&this.fetchEventsMediaType&&this.hass&&this.view&&!this.view.query&&this.thumbnailConfig&&"none"!==this.thumbnailConfig.mode&&(this.view.context?.thumbnails?.fetch??1)&&("events"===this.fetchMediaType?await Py(this,this.cameraManager,this.cardWideConfig,this.view,{allCameras:this.view.isGrid(),targetView:this.view.view,eventsMediaType:this.fetchEventsMediaType,select:"latest"}):"recordings"===this.fetchMediaType&&await Ly(this,this.cameraManager,this.cardWideConfig,this.view,{allCameras:this.view.isGrid(),targetView:this.view.view,select:"latest"}))}_hasDrawer(){return!!this.thumbnailConfig&&["left","right"].includes(this.thumbnailConfig.mode)}willUpdate(e){this.timelineConfig?.mode&&"none"!==this.timelineConfig.mode&&import("./timeline-8c893ce8.js");const t=e.get("view");e.has("view")&&(My.isMajorMediaChange(t,this.view)||t.displayMode!==this.view?.displayMode)&&(this._cameraIDsForTimeline=this._getCameraIDsForTimeline()??void 0),["view","fetch","browseMediaParams"].some((t=>e.has(t)))&&this._fetchMedia()}_getCameraIDsForTimeline(){return this.view?this.view?.is("live")?this.view.isGrid()?this.cameraManager?.getStore().getVisibleCameraIDs()??null:this.cameraManager?.getStore().getAllDependentCameras(this.view.camera)??null:this.view.isViewerView()?this.view.query?.getQueryCameraIDs()??null:null:null}render(){if(!this.hass||!this.view)return;const e=(e,t)=>{this.thumbnailConfig&&this._hasDrawer()&&_p(e.composedPath()[0],"drawer:"+t,{drawer:this.thumbnailConfig.mode})};return P` <frigate-card-surround-basic
      @frigate-card:thumbnails:open=${t=>e(t,"open")}
      @frigate-card:thumbnails:close=${t=>e(t,"close")}
    >
      ${this.thumbnailConfig&&"none"!==this.thumbnailConfig.mode?P` <frigate-card-thumbnail-carousel
            slot=${this.thumbnailConfig.mode}
            .hass=${this.hass}
            .config=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .fadeThumbnails=${this.view.isViewerView()}
            .view=${this.view}
            .selected=${this.view.queryResults?.getSelectedIndex()??void 0}
            @frigate-card:view:change=${t=>e(t,"close")}
            @frigate-card:thumbnail-carousel:tap=${e=>{const t=e.detail.queryResults.getSelectedResult();t&&this.view?.evolve({view:"media",queryResults:e.detail.queryResults,...t.getCameraID()&&{camera:t.getCameraID()}}).removeContext("timeline").dispatchChangeEvent(e.composedPath()[0])}}
          >
          </frigate-card-thumbnail-carousel>`:""}
      ${this.timelineConfig&&"none"!==this.timelineConfig.mode?P` <frigate-card-timeline-core
            slot=${this.timelineConfig.mode}
            .hass=${this.hass}
            .view=${this.view}
            .itemClickAction=${this.view.isViewerView()||!this.thumbnailConfig||"none"===this.thumbnailConfig?.mode?"play":"select"}
            .cameraIDs=${this._cameraIDsForTimeline}
            .mini=${!0}
            .timelineConfig=${this.timelineConfig}
            .thumbnailConfig=${this.thumbnailConfig}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </frigate-card-timeline-core>`:""}
      <slot></slot>
    </frigate-card-surround-basic>`}static get styles(){return s(Mw)}};e([se({attribute:!1})],Aw.prototype,"hass",void 0),e([se({attribute:!1})],Aw.prototype,"view",void 0),e([se({attribute:!1,hasChanged:xp})],Aw.prototype,"thumbnailConfig",void 0),e([se({attribute:!1,hasChanged:xp})],Aw.prototype,"timelineConfig",void 0),e([se({attribute:!1,hasChanged:xp})],Aw.prototype,"fetchMediaType",void 0),e([se({attribute:!1,hasChanged:xp})],Aw.prototype,"fetchEventsMediaType",void 0),e([se({attribute:!1})],Aw.prototype,"cameraManager",void 0),e([se({attribute:!1})],Aw.prototype,"cardWideConfig",void 0),Aw=e([ae("frigate-card-surround")],Aw);const Tw=li.object({model:li.string().nullable(),config_entries:li.string().array(),manufacturer:li.string().nullable()}).array(),Iw=async(e,t)=>{let n=[];if(e)try{n=await(async e=>await Xp(e,Tw,{type:"config/device_registry/list"}))(e)}catch(e){}const i=n?.filter((e=>"Frigate"===e.manufacturer)),a=new Map;return i?.forEach((e=>{e.config_entries.forEach((t=>{e.model&&a.set(t,e.model)}))})),{card_version:Fe,browser:navigator.userAgent,date:new Date,...a.size&&{frigate_versions:Object.fromEntries(a)},lang:wm(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,git:{build_version:Ue,build_date:Ve,commit_date:He},...e&&{ha_version:e.config.version},...t&&{config:t}}};let Dw=class extends ne{constructor(){super(...arguments),this._diagnostics=null}async _fetchDiagnostics(){this._diagnostics=await Iw(this.hass,this.rawConfig)}render(){if(this._diagnostics)return Ty({message:xm("error.diagnostics"),type:"diagnostics",icon:"mdi:information",context:this._diagnostics});this._fetchDiagnostics().then((()=>this.requestUpdate()))}static get styles(){return s(Mw)}};e([se({attribute:!1})],Dw.prototype,"hass",void 0),e([se({attribute:!1})],Dw.prototype,"rawConfig",void 0),e([oe()],Dw.prototype,"_diagnostics",void 0),Dw=e([ae("frigate-card-diagnostics")],Dw);let zw=class extends ne{willUpdate(e){(e.has("view")||e.has("config"))&&((this.view?.is("live")||this._shouldLivePreload())&&import("./live-0c4280a6.js").then((function(e){return e.l})),this.view?.isGalleryView()?import("./gallery-505d8d8f.js"):this.view?.isViewerView()?import("./viewer-e9ef7306.js"):this.view?.is("image")?import("./image-8db7070e.js"):this.view?.is("timeline")&&import("./timeline-8c893ce8.js")),e.has("hide")&&(this.hide?this.setAttribute("hidden",""):this.removeAttribute("hidden"))}shouldUpdate(e){return!0}_shouldLivePreload(){return!!this.overriddenConfig?.live.preload&&!this.view?.is("diagnostics")}render(){if(!(this.hass&&this.overriddenConfig&&this.nonOverriddenConfig&&this.cardWideConfig))return P``;const e={hidden:this._shouldLivePreload()&&!this.view?.is("live")},t={hidden:!!this.hide},n=this.view?.is("live")?this.overriddenConfig.live.controls.thumbnails:this.view?.isViewerView()?this.overriddenConfig.media_viewer.controls.thumbnails:this.view?.is("timeline")?this.overriddenConfig.timeline.controls.thumbnails:void 0,i=this.view?.is("live")?this.overriddenConfig.live.controls.timeline:this.view?.isViewerView()?this.overriddenConfig.media_viewer.controls.timeline:void 0,a=this.view?this.cameraManager?.getStore().getCameraConfig(this.view.camera)??null:null;return P` <frigate-card-surround
      class="${he(t)}"
      .hass=${this.hass}
      .view=${this.view}
      .fetchMediaType=${this.view?.is("live")?this.overriddenConfig.live.controls.thumbnails.media_type:void 0}
      .fetchEventsMediaType=${this.view?.is("live")?this.overriddenConfig.live.controls.thumbnails.events_media_type:void 0}
      .thumbnailConfig=${this.hide?void 0:n}
      .timelineConfig=${this.hide?void 0:i}
      .cameraManager=${this.cameraManager}
      .cardWideConfig=${this.cardWideConfig}
    >
      ${!this.hide&&this.view?.is("image")&&a?P` <frigate-card-image
            .imageConfig=${this.overriddenConfig.image}
            .view=${this.view}
            .hass=${this.hass}
            .cameraConfig=${a}
            .supportZoom=${!0}
          >
          </frigate-card-image>`:""}
      ${!this.hide&&this.view?.isGalleryView()?P` <frigate-card-gallery
            .hass=${this.hass}
            .view=${this.view}
            .galleryConfig=${this.overriddenConfig.media_gallery}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </frigate-card-gallery>`:""}
      ${!this.hide&&this.view?.isViewerView()?P`
            <frigate-card-viewer
              .hass=${this.hass}
              .view=${this.view}
              .viewerConfig=${this.overriddenConfig.media_viewer}
              .resolvedMediaCache=${this.resolvedMediaCache}
              .cameraManager=${this.cameraManager}
              .cardWideConfig=${this.cardWideConfig}
            >
            </frigate-card-viewer>
          `:""}
      ${!this.hide&&this.view?.is("timeline")?P` <frigate-card-timeline
            .hass=${this.hass}
            .view=${this.view}
            .timelineConfig=${this.overriddenConfig.timeline}
            .cameraManager=${this.cameraManager}
            .cardWideConfig=${this.cardWideConfig}
          >
          </frigate-card-timeline>`:""}
      ${!this.hide&&this.view?.is("diagnostics")?P` <frigate-card-diagnostics
            .hass=${this.hass}
            .rawConfig=${this.rawConfig}
          >
          </frigate-card-diagnostics>`:""}
      ${this._shouldLivePreload()||!this.hide&&this.view?.is("live")?P`
              <frigate-card-live
                .hass=${this.hass}
                .view=${this.view}
                .nonOverriddenLiveConfig=${this.nonOverriddenConfig.live}
                .overriddenLiveConfig=${this.overriddenConfig.live}
                .conditionsManagerEpoch=${this.conditionsManagerEpoch}
                .liveOverrides=${r="live",s=this.overriddenConfig.overrides,s?.filter((e=>r in e.overrides)).map((e=>({conditions:e.conditions,overrides:e.overrides[r]})))??[]}
                .cameraManager=${this.cameraManager}
                .cardWideConfig=${this.cardWideConfig}
                .microphoneManager=${this.microphoneManager}
                .triggeredCameraIDs=${this.triggeredCameraIDs}
                class="${he(e)}"
              >
              </frigate-card-live>
            `:""}
    </frigate-card-surround>`;var r,s}static get styles(){return s(":host {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n\n:host([hidden]),\n.hidden {\n  display: none;\n}")}};e([se({attribute:!1})],zw.prototype,"hass",void 0),e([se({attribute:!1})],zw.prototype,"view",void 0),e([se({attribute:!1})],zw.prototype,"cameraManager",void 0),e([se({attribute:!1})],zw.prototype,"nonOverriddenConfig",void 0),e([se({attribute:!1})],zw.prototype,"overriddenConfig",void 0),e([se({attribute:!1})],zw.prototype,"cardWideConfig",void 0),e([se({attribute:!1})],zw.prototype,"rawConfig",void 0),e([se({attribute:!1})],zw.prototype,"resolvedMediaCache",void 0),e([se({attribute:!1})],zw.prototype,"conditionsManagerEpoch",void 0),e([se({attribute:!1})],zw.prototype,"hide",void 0),e([se({attribute:!1})],zw.prototype,"microphoneManager",void 0),e([se({attribute:!1})],zw.prototype,"triggeredCameraIDs",void 0),zw=e([ae("frigate-card-views")],zw);console.info(`%c FRIGATE-HASS-CARD \n%c ${xm("common.version")} ${Fe} `,"color: pink; font-weight: bold; background: black","color: white; font-weight: bold; background: dimgray"),window.customCards=window.customCards||[],window.customCards.push({type:"frigate-card",name:xm("common.frigate_card"),description:xm("common.frigate_card_description"),preview:!0,documentationURL:di});let jw=class extends ne{constructor(){super(...arguments),this._controller=new Wy(this,(()=>this._refMain.value?.scroll({top:0})),(()=>this._refMenu.value?.toggleMenu()),this._requestUpdateForComponentsThatUseConditions.bind(this)),this._menuButtonController=new qy,this._refMenu=Me(),this._refMain=Me(),this._refElements=Me(),this._refViews=Me()}get _config(){return this._controller.getConfigManager().getConfig()}get _hass(){return this._controller.getHASSManager().getHASS()}set hass(e){this._controller.getHASSManager().setHASS(e),this._refMenu.value&&(this._refMenu.value.hass=e),this._refElements.value&&(this._refElements.value.hass=e),this._refViews.value&&(this._refViews.value.hass=e)}static async getConfigElement(){return await Wy.getConfigElement()}static getStubConfig(e,t){return Wy.getStubConfig(t)}_requestUpdateForComponentsThatUseConditions(){this._refViews.value&&(this._refViews.value.conditionsManagerEpoch=this._controller.getConditionsManager().getEpoch()??void 0),this._refElements.value&&(this._refElements.value.conditionsManagerEpoch=this._controller.getConditionsManager().getEpoch()??void 0)}setConfig(e){this._controller.getConfigManager().setConfig(e)}shouldUpdate(){return!!this._controller.getMessageManager().hasMessage()||(!!this._controller.getInitializationManager().isInitializedMandatory()||(this._controller.getInitializationManager().initializeMandatory(),!1))}willUpdate(){this._controller.getInitializationManager().initializeBackgroundIfNecessary()}_renderMenu(){const e=this._controller.getViewManager().getView();if(this._hass&&this._config&&e)return P`
      <frigate-card-menu
        ${Ee(this._refMenu)}
        .hass=${this._hass}
        .menuConfig=${this._config.menu}
        .buttons=${this._menuButtonController.calculateButtons(this._hass,this._config,this._controller.getCameraManager(),e,{inExpandedMode:this._controller.getExpandManager().isExpanded(),inFullscreenMode:this._controller.getFullscreenManager().isInFullscreen(),currentMediaLoadedInfo:this._controller.getMediaLoadedInfoManager().get(),showCameraUIButton:this._controller.getCameraURLManager().hasCameraURL(),mediaPlayerController:this._controller.getMediaPlayerManager(),microphoneManager:this._controller.getMicrophoneManager()})}
        .entityRegistryManager=${this._controller.getEntityRegistryManager()}
      ></frigate-card-menu>
    `}firstUpdated(){this._controller.getQueryStringManager().executeNonViewRelated()}_renderInDialogIfNecessary(e){return this._controller.getExpandManager().isExpanded()?P` <web-dialog
        open
        center
        @close=${()=>{this._controller.getExpandManager().setExpanded(!1)}}
      >
        ${e}
      </web-dialog>`:e}render(){if(!this._hass)return;const e={"aspect-ratio":this._controller.getStyleManager().getAspectRatioStyle()},t={main:!0,"curve-top":"outside"!==this._config?.menu.style||"top"!==this._config?.menu.position,"curve-bottom":"outside"!==this._config?.menu.style||"top"===this._config?.menu.position},n=this._controller.getActionsManager().getMergedActions(),i="outside"===this._config?.menu.style&&"top"===this._config?.menu.position,a=this._controller.getCameraManager();return this._renderInDialogIfNecessary(P` <ha-card
      id="ha-card"
      .actionHandler=${vl({hasHold:ml(n.hold_action),hasDoubleClick:ml(n.double_tap_action)})}
      style="${ke(e)}"
      @frigate-card:message=${e=>this._controller.getMessageManager().setMessageIfHigherPriority(e.detail)}
      @frigate-card:view:change=${e=>this._controller.getViewManager().setView(e.detail)}
      @frigate-card:view:change-context=${e=>this._controller.getViewManager().setViewWithNewContext(e.detail)}
      @frigate-card:media:loaded=${e=>this._controller.getMediaLoadedInfoManager().set(e.detail)}
      @frigate-card:media:unloaded=${()=>this._controller.getMediaLoadedInfoManager().clear()}
      @frigate-card:media:volumechange=${()=>this.requestUpdate()}
      @frigate-card:media:play=${()=>this.requestUpdate()}
      @frigate-card:media:pause=${()=>this.requestUpdate()}
    >
      ${i?this._renderMenu():""}
      <div ${Ee(this._refMain)} class="${he(t)}">
        ${a.isInitialized()||this._controller.getMessageManager().hasMessage()?P`<frigate-card-views
              ${Ee(this._refViews)}
              .hass=${this._hass}
              .view=${this._controller.getViewManager().getView()}
              .cameraManager=${a}
              .resolvedMediaCache=${this._controller.getResolvedMediaCache()}
              .nonOverriddenConfig=${this._controller.getConfigManager().getNonOverriddenConfig()}
              .overriddenConfig=${this._controller.getConfigManager().getConfig()}
              .cardWideConfig=${this._controller.getConfigManager().getCardWideConfig()}
              .rawConfig=${this._controller.getConfigManager().getRawConfig()}
              .configManager=${this._controller.getConfigManager()}
              .conditionsManagerEpoch=${this._controller.getConditionsManager()?.getEpoch()}
              .hide=${!!this._controller.getMessageManager().hasMessage()}
              .microphoneManager=${this._controller.getMicrophoneManager()}
              .triggeredCameraIDs=${this._config?.view.scan.show_trigger_status?this._controller.getTriggersManager().getTriggeredCameraIDs():void 0}
            ></frigate-card-views>`:Iy({cardWideConfig:this._controller.getConfigManager().getCardWideConfig()})}
        ${Ty(this._controller.getMessageManager().getMessage())}
      </div>
      ${i?"":this._renderMenu()}
      ${this._config?.elements?P` <frigate-card-elements
            ${Ee(this._refElements)}
            .hass=${this._hass}
            .elements=${this._config?.elements}
            .conditionsManagerEpoch=${this._controller.getConditionsManager()?.getEpoch()}
            @frigate-card:menu-add=${e=>{this._menuButtonController.addDynamicMenuButton(e.detail),this.requestUpdate()}}
            @frigate-card:menu-remove=${e=>{this._menuButtonController.removeDynamicMenuButton(e.detail),this.requestUpdate()}}
            @frigate-card:condition:evaluate=${e=>{e.evaluation=this._controller.getConditionsManager()?.evaluateCondition(e.condition)}}
          >
          </frigate-card-elements>`:""}
    </ha-card>`)}static get styles(){return s(":host {\n  display: block;\n  position: relative;\n  background-color: var(--card-background-color);\n  border-radius: var(--ha-card-border-radius, 4px);\n  max-height: var(--frigate-card-max-height);\n  min-height: var(--frigate-card-min-height);\n  --frigate-card-expand-max-height: calc((100vh - (2 * 56px)) * 0.85);\n  --frigate-card-expand-max-width: 85vw;\n  --frigate-card-expand-width: none;\n  --frigate-card-expand-height: none;\n  --frigate-card-expand-aspect-ratio: unset;\n  --frigate-card-max-height: none;\n  --frigate-card-min-height: none;\n}\n\n:host([dark]) {\n  filter: brightness(75%);\n}\n\n:host([panel]) {\n  height: 100%;\n}\n\ndiv.main {\n  position: relative;\n  overflow: auto;\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  display: block;\n  transform: translateZ(0);\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n/* Hide scrollbar for Chrome, Safari and Opera */\ndiv.main::-webkit-scrollbar {\n  display: none;\n}\n\ndiv.main.curve-top {\n  border-top-left-radius: var(--ha-card-border-radius, 4px);\n  border-top-right-radius: var(--ha-card-border-radius, 4px);\n}\n\ndiv.main.curve-bottom {\n  border-bottom-left-radius: var(--ha-card-border-radius, 4px);\n  border-bottom-right-radius: var(--ha-card-border-radius, 4px);\n}\n\n/* The 'hover' menu mode is styled applied outside of the menu itself */\nfrigate-card-menu[data-style*=hover] {\n  z-index: 1;\n  transition: opacity 0.5s ease;\n}\n\n.main + frigate-card-menu[data-style*=hover] {\n  opacity: 0;\n}\n\nfrigate-card-menu[data-style=hover]:hover {\n  opacity: 1;\n}\n\n.main:hover + frigate-card-menu[data-style=hover-card],\nfrigate-card-menu[data-style=hover-card]:hover {\n  opacity: 1;\n}\n\nha-card {\n  display: flex;\n  flex-direction: column;\n  margin: auto;\n  border: 0px;\n  overflow: visible;\n  width: 100%;\n  height: 100%;\n  position: static;\n  color: var(--secondary-text-color, white);\n}\n\n/************\n * Fullscreen\n *************/\n:host(:fullscreen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:-webkit-full-screen) #ha-card {\n  border-radius: 0px;\n  box-shadow: none;\n  margin: 0;\n}\n\n:host(:fullscreen) div.main,\n:host(:fullscreen) frigate-card-menu {\n  border-radius: 0px;\n}\n\n:host(:-webkit-full-screen) div.main,\n:host(:-webkit-full-screen) frigate-card-menu {\n  border-radius: 0px;\n}\n\n/***************\n * Expanded mode\n ***************/\nweb-dialog {\n  --dialog-padding: 0px;\n  --dialog-container-padding: 0px;\n  --dialog-max-height: var(--frigate-card-expand-max-height);\n  --dialog-max-width: var(--frigate-card-expand-max-width);\n  --dialog-width: var(--frigate-card-expand-width);\n  --dialog-height: var(--frigate-card-expand-height);\n  --dialog-overflow-x: visible;\n  --dialog-overflow-y: visible;\n  max-height: 100vh;\n}\n\nweb-dialog::part(dialog) {\n  aspect-ratio: var(--frigate-card-expand-aspect-ratio);\n  border-radius: 0px;\n  background: transparent;\n}")}getCardSize(){return this._controller.getCardElementManager().getCardHeight()/50}};jw=e([ae("frigate-card")],jw);export{nr as $,Pp as A,Hs as B,ra as C,av as D,nb as E,Us as F,et as G,hf as H,rv as I,Ji as J,Ki as K,Xi as L,ea as M,aa as N,ia as O,na as P,ta as Q,_s as R,fs as S,Yo as T,ps as U,vs as V,Vr as W,Nr as X,Br as Y,Lr as Z,Fr as _,bv as a,Na as a$,ir as a0,ar as a1,rr as a2,Hr as a3,Ur as a4,Ir as a5,jr as a6,Dr as a7,zr as a8,sr as a9,Pr as aA,Zr as aB,qr as aC,Wr as aD,ba as aE,fa as aF,va as aG,ya as aH,_a as aI,pa as aJ,xa as aK,Ca as aL,Ma as aM,Sa as aN,Ta as aO,Ya as aP,Ia as aQ,za as aR,Da as aS,$a as aT,Aa as aU,Ea as aV,ka as aW,ja as aX,Oa as aY,Ra as aZ,Ha as a_,or as aa,cr as ab,vr as ac,yr as ad,wr as ae,xr as af,br as ag,pr as ah,fr as ai,_r as aj,Ar as ak,Tr as al,Sr as am,Er as an,kr as ao,Cr as ap,Mr as aq,$r as ar,hr as as,gr as at,mr as au,dr as av,ur as aw,lr as ax,Or as ay,Rr as az,df as b,Ci as b$,Fa as b0,Va as b1,La as b2,Pa as b3,Ga as b4,Ka as b5,Wa as b6,Ba as b7,Qa as b8,Ua as b9,Os as bA,js as bB,nv as bC,ev as bD,s as bE,e as bF,se as bG,oe as bH,ae as bI,yp as bJ,mi as bK,Pi as bL,ji as bM,Si as bN,$i as bO,Mi as bP,gi as bQ,bi as bR,yi as bS,wi as bT,vi as bU,zi as bV,Ai as bW,Ti as bX,Ii as bY,Di as bZ,xi as b_,Za as ba,qa as bb,Xa as bc,Ja as bd,er as be,Xr as bf,es as bg,Jr as bh,ts as bi,Yr as bj,Gr as bk,Kr as bl,ls as bm,ds as bn,hs as bo,ms as bp,us as bq,cs as br,$s as bs,Ss as bt,Es as bu,ks as bv,zs as bw,Is as bx,Ds as by,Rs as bz,iv as c,Ry as c$,Ei as c0,ki as c1,Oi as c2,Ri as c3,Li as c4,Ni as c5,Vi as c6,Fi as c7,Hi as c8,pi as c9,N as cA,pl as cB,fw as cC,uw as cD,c as cE,bl as cF,xl as cG,__ as cH,y_ as cI,wy as cJ,g_ as cK,Hy as cL,xy as cM,yy as cN,hp as cO,Cy as cP,Cp as cQ,t_ as cR,Dg as cS,$p as cT,_p as cU,Ly as cV,Py as cW,Iy as cX,ey as cY,Ip as cZ,_w as c_,fi as ca,_i as cb,hi as cc,il as cd,de as ce,ue as cf,L as cg,fe as ch,zy as ci,dl as cj,ul as ck,Ks as cl,vl as cm,ml as cn,sy as co,xp as cp,tb as cq,Me as cr,lb as cs,_v as ct,Sy as cu,gl as cv,Ee as cw,oy as cx,Ty as cy,Mw as cz,cf as d,pf as d$,Cl as d0,yl as d1,Ml as d2,Mm as d3,Cm as d4,Sm as d5,Hm as d6,Vm as d7,Om as d8,Zm as d9,a_ as dA,k_ as dB,E_ as dC,$l as dD,o_ as dE,Mp as dF,Sp as dG,Uy as dH,Tm as dI,jp as dJ,s_ as dK,m_ as dL,f_ as dM,T_ as dN,lf as dO,I_ as dP,$_ as dQ,li as dR,Tp as dS,Xp as dT,mp as dU,h_ as dV,Ep as dW,Ap as dX,p_ as dY,b_ as dZ,v_ as d_,Nm as da,Fm as db,$g as dc,hg as dd,_g as de,vg as df,fg as dg,zm as dh,mg as di,zp as dj,Dy as dk,Av as dl,hy as dm,U_ as dn,mf as dp,ry as dq,cy as dr,ly as ds,dy as dt,o as du,le as dv,ge as dw,tf as dx,ay as dy,i_ as dz,sa as e,ff as e0,_f as e1,Dp as e2,Rp as e3,Qv as e4,zl as e5,Of as e6,Ce as e7,me as e8,Jp as e9,gw as ea,ca as f,tv as g,oa as h,sv as i,la as j,da as k,xm as l,ua as m,ha as n,ma as o,vp as p,he as q,ys as r,ne as s,os as t,is as u,as as v,rs as w,ss as x,P as y,Qo as z};
