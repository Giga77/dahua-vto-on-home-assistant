go2rtc:
  streams:
    doorbell:
      # H264
      - echo:/config/scripts/fix_vto_codecs.sh
        ffmpeg:rtsp://admin:pass@192.168.1.40/cam/realmonitor?channel=1&subtype=0#video=copy
      # AAC, OPUS
      - rtsp://127.0.0.1:8554/doorbell_hd?audio=all
      # PCMA, 2-way audio
      - echo:/config/scripts/fix_vto_codecs.sh
        rtsp://admin:pass@192.168.1.40/cam/realmonitor?channel=1&subtype=0&unicast=true&proto=Onvif#media=audio#backchannel=1
    doorbell_hd:
      # H264, AAC, OPUS
      - echo:/config/scripts/fix_vto_codecs.sh
        ffmpeg:rtsp://admin:pass@192.168.1.40/cam/realmonitor?channel=1&subtype=1#video=copy#audio=copy#audio=opus

cameras:
  doorbell:
    ffmpeg:
      inputs:
        - path: rtsp://127.0.0.1:8554/doorbell?video=copy&backchannel=0
          input_args: preset-rtsp-restream-low-latency
          roles:
            - detect
        - path: rtsp://127.0.0.1:8554/doorbell_hd
          input_args: preset-rtsp-restream-low-latency
          roles:
            - record
      output_args:
        record: preset-record-generic-audio-copy
